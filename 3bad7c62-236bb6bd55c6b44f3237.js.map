{"version":3,"sources":["webpack:///./node_modules/css-doodle/css-doodle.js"],"names":["_templateObject","_templateObject2","_templateObject3","_templateObject4","_templateObject5","_templateObject6","_templateObject7","_templateObject8","_templateObject9","_templateObject10","_templateObject11","_templateObject12","_templateObject13","_templateObject14","_templateObject15","_templateObject16","_templateObject17","_templateObject18","_assertThisInitialized","_inherits","_possibleConstructorReturn","_getPrototypeOf","_wrapNativeSuper","_objectWithoutProperties","_toArray","_taggedTemplateLiteral","_toConsumableArray","_slicedToArray","_classCallCheck","_createClass","_excluded","_createSuper","Derived","hasNativeReflectConstruct","Reflect","construct","sham","Proxy","Boolean","prototype","valueOf","call","e","_isNativeReflectConstruct","result","Super","NewTarget","this","constructor","arguments","apply","_createForOfIteratorHelper","o","allowArrayLike","it","Symbol","iterator","Array","isArray","minLen","_arrayLikeToArray","n","Object","toString","slice","name","from","test","_unsupportedIterableToArray","length","i","F","s","done","value","_e","f","TypeError","err","normalCompletion","didErr","step","next","_e2","return","arr","len","arr2","exports","symbols$1","is$1","escape","c","space","digit","sign","dot","quote","symbol","includes","hexNum","hex","a","b","letter","expWithSign","exp","dots","String","toLowerCase","comment","selfClosedTag","closedTag","Token","_ref","type","pos","status","key","_this","isSymbol","_len","values","_key","some","iterator$1","input","pointer","max","col","row","curr","undefined","end","get","prev","next2","next3","skipComments","iter","_iter$get","ignoreSpacingSymbol","readWord","temp","_iter$get2","isBreak","trim","readSpaces","_iter$get3","readNumber","hasDot","_iter$get4","readHexNumber","_iter$get5","last$1","array","scan","source","tokens","quoteStack","_iter$get6","num","push","_num","_lastToken","isNextDigit","isNumber","_num2","token","pop","word","spaces","_lastToken2","_next","_prev","ignoreLeft","ignoreRight","_word","lastToken","isSpace","walk$2","rules","_iter$get8","rule","parseVar","substr","startsWith","ret","_iter$get9","joinTokens$2","fallback","map","join","clamp","min","Number","Math","maybe","cond","range","start","stop","count","old","initial","_ref2","add_alias","obj","names","_i","_Object$entries","entries","_Object$entries$_i","alias","is_letter","is_nil","is_invalid_number","v","isNaN","is_empty","lazy","fn","wrap","sequence","_String$split","split","_String$split2","x","_String$split2$","y","ceil","index","j","cell_id","z","get_value","normalize_png_name","Date","now","replace","cache_image","src","delay","img","Image","crossOrigin","onload","setTimeout","is_safari","navigator","userAgent","un_entity","code","textarea","document","createElement","innerHTML","entity","hash","str","ch","seed","h1","h2","charCodeAt","imul","make_tag_function","_len2","vars","_key2","string","reduce","next_id","id","prefix","concat","lerp","t","unique_id","random","make_array","spliter","last","first","flat_map","flatMap","acc","Tokens","selector","styles","property","steps","is","symbols","PI","composible","read_until","reset","read_word","read_keyframe_name","read_line","read_step","extra","read_rule","read_selector","read_steps","read_keyframes","msg","_ref3","line","keyframes","info","console","warn","read_comments","flag","inline","skip_tag","read_property","prop","read_arguments","composition","doodle","args","group","stack","arg","raw","cloned","JSON","parse","stringify","normalize_argument","trimLeft","read_func","skip_last_empty_args","ft","ed","cf","ce","cluster","func","has_argument","_seperate_func_name","fname","substring","seperate_func_name","unshift","position","read_value","text","idx","skip","read_cond_selector","read_pseudo","pseudo","read_var","read_cond","assign","read_variable","get_variable","evaluate_value","forEach","p","parsed","other","every","parse$8","_index","parse_grid","size","_replace$replace$spli","parseInt","_replace$replace$spli2","max_xy","max_z","ratio","isIdentifier","lineBreak","removeParens","head","joinToken$2","create_svg_url","svg","encoded","encodeURIComponent","normalize_svg","xmlns","xmlnsXLink","nextId$1","Tag","Error","body","attrs","isTextNode","tag","_i2","_Object$entries2","_Object$entries2$_i","_step","_iterator","composeStyleRule","composeStyle","block","style","generate_svg","generate$1","element","parent","root","inlineId","_step2","el","_iterator2","append","_el","attr","_step3","_iterator3","found","find","_id","parse$6","matched","_iter$get11","isWord","unit","by_unit","units","_len3","_key3","_i3","_args","_parse$","_unit","by_charcode","_len4","_key4","codes","fromCharCode","default_context","gcd","_ref4","operator","calc","expr","context","repeat","_expr$shift","shift","expand$1","is_cycle","infix_to_postfix","negative","output","fns","right","left","compute","last_token","_ref5","get_tokens$1","op_stack","_tokens$i","func_body","op","pow","_ref6","match","_ref7","calc$1","Cache","CacheValue","cache","getKey","memo","_len5","_key5","set","Type","build_range","endsWith","get_tokens","_ref8","_value","to","reverse","_ref9","expand","_len6","_key6","Node","data","Stack","limit","_limit","_size","node","tail","Perlin","shuffle","h","u","grad","_map","floor","_map2","X","Y","Z","_map3","_map4","_map5","_map6","w","A","AA","AB","B","BA","BB","parse$5","commands","_iter$get12","joinTokens$1","transformNegative","prevMinus","nextMinus","currMinus","parse$4","noSpace","parenStack","_iter$get13","joinTokens","keywords","parse$3","direction","angle","_iter$get14","normalizeAngle","cos","sin","abs","atan2","_","create_shape_points","shapes","circle","triangle","pentagon","hexagon","octagon","star","infinity","heart","bean","bicorn","drop","fish","whale","windmill","vase","clover","k","hypocycloid","scale","bud","Point","calc_angle","dx","dy","option","base","factor","_parse$4$map3","_parse$4$map4","fx","_parse$4$map4$","props","_ref12","vertices","points","px","py","pr","r","_parse$2","degree","rotate","origin","move","first_point","first_point2","turn","frame","fill","rad","add","_ref10","_ref11","x1","y1","_ref11$","_ref11$2","_scale","_scale2","_scale3","_scale4","point","_i4","_t","_fn2","_fn3","_fn3$","_fn3$2","theta","_point","create_polygon_points","seq","_ref13","_ref14","_rotate","deg","_rotate2","_translate","offset","_parse$4$map","_parse$4$map2","_parse$4$map2$","translate","_translate2","readStatement$1","inlineBlock","fragment","_iter$get15","isStatementBreak","selectors","getGroups","tokenName","_skip","isSkip","resolveId","walk$1","joinToken$1","parentToken","tokenType","_iter$get16","isBlockBreak","isBlock","isSpecialProperty","statement","groupdValue","item","prevValue","nextValue","filter","_name$split","_name$split2","ids","_len7","_key7","parse$2","skipHeadSVG","parse$1","valid","uniform_time","uniform_mousex","uniform_mousey","uniform_width","uniform_height","Uniforms","freeze","__proto__","make_sequence","_len8","actions","_key8","evaluated","_len9","_key9","action","push_stack","flip_value","map2d","amp","dimention","sqrt","ma","mb","Expose","_ref15","_ref16","_ref17","_ref18","I","_ref19","grid","_ref20","_ref21","_ref22","_ref23","_ref24","lastExtra","nx","_ref25","ny","_ref26","N","_ref27","m","M","Âµ","_ref28","pick","_len10","_key10","last_pick_args","picked","P","_ref29","counter","_len11","_key11","normal","last_pick","findIndex","splice","pn","_ref30","_ref31","_ref32","_ref32$","pd","_ref33","_len12","_key12","_ref34","_ref35","_ref35$","lp","_ref36","_ref37","rand","_len13","_key13","transform","rn","_ref38","_ref39","_ref40","ni","nm","NX","NY","isSeqContext","_len14","_key14","_args$","_args$2","freq","_args$3","_ref41","Infinity","noise","lr","_ref42","last_rand","_ref43","rest","stripe","_len15","_key15","colors","default_count","custom_sizes","_parse$3","_parse$4","default_size","_parse$5","_parse$6","color","_len16","_key16","_len17","_key17","var","ut","uw","uh","ux","uy","plot","_ref44","_ref46","_ref46$","_ref46$2","config","shape","_len18","_key18","_commands","shaders","canvas","pattern","invert","_ref47","flipH","_ref48","flipV","_ref49","flip","_ref50","presets","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","a10","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","b10","b11","b12","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","c10","c11","c12","d0","d1","d2","d3","d4","d5","d6","postcard","poster","modes","portrait","pt","landscape","ls","l","all_props","get_props","Set","has","RegExp","build_mapping","reg","props_webkit_mapping","props_moz_mapping","prefixer","map_left_right","center","top","bottom","map_top_bottom","Property","_ref54","is_special_selector","_parse$7","_parse$8","_parse$8$","_get_preset","mode","_ref52","_ref53","get_preset","_get_preset2","_ref55","_parse$9","_parse$10","_parse$10$","cw","options","_value$split$map","_value$split$map2","_parse$11","_parse$12","use","literal","even","odd","_nth","Selector","at","_ref56","nth","_ref57","_len19","exprs","_key19","_ref58","_len20","_key20","_ref59","_len21","_key21","_ref60","_ref61","_ref62","_ref63","is_host_selector","is_parent_selector","_step4","MathFunc","_iterator4","getOwnPropertyNames","_loop","_len26","_key26","Rules","is_grid_defined","coords","doodles","custom_properties","uniforms","host","container","cells","_fn","_input","is_string_or_number","_len22","_key22","_ref64","argument","_this2","pick_func","check_uniforms","is_composable","_value2","compose_doodle","inject_variables","compose_shaders","compose_canvas","compose_pattern","_len23","_key23","compose_argument","apply_func","shader","_ref65","cell","_ref66","time","mousex","mousey","width","height","_i5","_Object$entries3","_Object$entries3$_i","_this3","val","_value3","_len24","_key24","_output","_coords","_this4","value_group","composed","compose_value","has_animation","compose_aname","has_transition","transformed","add_rule","compose","_this5","pre_compose","_this6","pre_compose_rule","_this7","compose_selector","compose_rule","special","_this8","_i6","_Object$entries4","_Object$entries4$_i","target","animation","_i7","_Object$entries5","_Object$entries5$_i","_name","keyframe","aname","generate_css","grid_size","_ref67","_len25","items","_key25","_count","create_shader","gl","createShader","shaderSource","compileShader","add_uniform","uniform","draw_shader","Promise","resolve","window","devicePixelRatio","getContext","textures","program","vss","fss","vs","VERTEX_SHADER","fs","FRAGMENT_SHADER","prog","createProgram","attachShader","linkProgram","getProgramParameter","LINK_STATUS","getProgramInfoLog","getShaderInfoLog","create_program","vertex","positionAttributeLocation","getAttribLocation","positionBuffer","createBuffer","bindBuffer","ARRAY_BUFFER","bufferData","Float32Array","STATIC_DRAW","enableVertexAttribArray","vertexAttribPointer","FLOAT","viewport","drawingBufferWidth","drawingBufferHeight","clearColor","clear","COLOR_BUFFER_BIT","useProgram","uniform2fv","getUniformLocation","image","texture","createTexture","activeTexture","pixelStorei","UNPACK_FLIP_Y_WEBGL","bindTexture","TEXTURE_2D","texImage2D","RGBA","UNSIGNED_BYTE","texParameteri","TEXTURE_WRAP_S","CLAMP_TO_EDGE","TEXTURE_WRAP_T","TEXTURE_MIN_FILTER","LINEAR","TEXTURE_MAG_FILTER","load_texture","uniform1i","drawArrays","TRIANGLES","toDataURL","readStatement","_iter$get18","joinToken","parseSelector","groups","selectorName","fragments","_iter$get20","self","walk","_iter$get19","newBlock","generate_statement","_extra$get_rgba_color","get_rgba_color","g","float","draw_pattern","_String$replace$repla","_String$replace$repla2","_String$replace$repla3","generate_block","generate_shader","nextId","draw_canvas","wrapped","generate","blob","Blob","CSS","paintWorklet","addModule","URL","createObjectURL","svg_to_png","reject","ctx","dpr","drawImage","toBlob","url","global","globalThis","math","pool","startdenom","significance","overflow","seedrandom","callback","shortseed","mixkey","flatten","depth","typ","entropy","tostring","out","Uint8Array","crypto","msCrypto","getRandomValues","browser","plugins","screen","autoseed","arc4","ARC4","prng","d","int32","quick","double","S","pass","is_math_call","state","copy","keylen","me","smear","stringseed","get_all_variables","getComputedStyle","computedStyleMap","_step5","_iterator5","_step5$value","_step6","_iterator6","_prop","getPropertyValue","_i8","_Object$entries6","_Object$entries6$_i","_get_rgba_color","_color$replace$split","_color$replace$split2","_color$replace$split3","querySelector","customElements","Doodle","_HTMLElement","_super","_this9","attachShadow","_get_variable","shadowRoot","again","_this10","load","_this11","get_use","get_grid","_this$grid_size","gx","gy","gz","compiled","build_grid","_compiled$grid","_x","_y","_z","set_content","get_grid_styles","connectedCallback","_seed_value","old_val","new_val","getAttribute","setAttribute","_grid","_compiled$styles","grid_container","create_grid","get_basic_styles","then","btoa","unescape","_ref68","shader_to_image","_ref69","_ref70","_this12","identifier","_iter$get10","parse$7","getElementById","_ref71","getBoundingClientRect","transforms","doodle_to_image","all","_this13","hasAttribute","addEventListener","update","_ref72","_this14","doodle_ids","keys","shader_ids","canvas_ids","pattern_ids","mappings","canvas_to_image","pattern_to_image","mapping","replaceAll","_ref73","_ref74","_this15","_compiled$props","has_delay","_compiled$styles2","style_container","style_cells","register_uniform_time","register_uniform_mouse","remove_uniform_mouse","register_uniform_resolution","remove_uniform_resolution","_this16","uniform_mouse_callback","_uniform_mousex","_uniform_mousey","detail","setProperty","offsetX","offsetY","event","CustomEvent","dispatchEvent","_uniform_mousex2","_uniform_mousey2","removeProperty","removeEventListener","_this17","uniform_resolution_observer","_uniform_width","_uniform_height","box","ResizeObserver","_step7","_iterator7","entry","contentBoxSize","contentRect","observe","_uniform_width2","_uniform_height2","unobserve","registerProperty","is_uniform_time_registered","_uniform_time","syntax","initialValue","inherits","_this18","_ref75","download","variables","html","_this18$getBoundingCl","_ref76","href","click","catch","error","_this19","styleSheet","cssText","HTMLElement","define","inherited_grid_props","grid_obj","_ref77","create_cell","_ref78","createDocumentFragment","appendChild","_i9","className","outerHTML","CSSDoodle","defineProperty","factory"],"mappings":"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","file":"3bad7c62-236bb6bd55c6b44f3237.js","sourcesContent":["var _assertThisInitialized = require(\"/Users/wiley/wileybaba.github.io/node_modules/@babel/runtime/helpers/assertThisInitialized\");\n\nvar _inherits = require(\"/Users/wiley/wileybaba.github.io/node_modules/@babel/runtime/helpers/inherits\");\n\nvar _possibleConstructorReturn = require(\"/Users/wiley/wileybaba.github.io/node_modules/@babel/runtime/helpers/possibleConstructorReturn\");\n\nvar _getPrototypeOf = require(\"/Users/wiley/wileybaba.github.io/node_modules/@babel/runtime/helpers/getPrototypeOf\");\n\nvar _wrapNativeSuper = require(\"/Users/wiley/wileybaba.github.io/node_modules/@babel/runtime/helpers/wrapNativeSuper\");\n\nvar _objectWithoutProperties = require(\"/Users/wiley/wileybaba.github.io/node_modules/@babel/runtime/helpers/objectWithoutProperties\");\n\nvar _toArray = require(\"/Users/wiley/wileybaba.github.io/node_modules/@babel/runtime/helpers/toArray\");\n\nvar _taggedTemplateLiteral = require(\"/Users/wiley/wileybaba.github.io/node_modules/@babel/runtime/helpers/taggedTemplateLiteral\");\n\nvar _toConsumableArray = require(\"/Users/wiley/wileybaba.github.io/node_modules/@babel/runtime/helpers/toConsumableArray\");\n\nvar _slicedToArray = require(\"/Users/wiley/wileybaba.github.io/node_modules/@babel/runtime/helpers/slicedToArray\");\n\nvar _classCallCheck = require(\"/Users/wiley/wileybaba.github.io/node_modules/@babel/runtime/helpers/classCallCheck\");\n\nvar _createClass = require(\"/Users/wiley/wileybaba.github.io/node_modules/@babel/runtime/helpers/createClass\");\n\nvar _excluded = [\"context\", \"grid\", \"position\", \"shuffle\"];\n\nvar _templateObject, _templateObject2, _templateObject3, _templateObject4, _templateObject5, _templateObject6, _templateObject7, _templateObject8, _templateObject9, _templateObject10, _templateObject11, _templateObject12, _templateObject13, _templateObject14, _templateObject15, _templateObject16, _templateObject17, _templateObject18;\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nrequire(\"core-js/modules/es.array.reduce.js\");\n\nrequire(\"core-js/modules/es.array.flat-map.js\");\n\nrequire(\"core-js/modules/es.array.unscopables.flat-map.js\");\n\nrequire(\"core-js/modules/es.string.trim-start.js\");\n\nrequire(\"core-js/modules/es.typed-array.sort.js\");\n\n/*! css-doodle@0.26.1 */\n(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) : typeof define === 'function' && define.amd ? define(['exports'], factory) : (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global.CSSDoodle = {}));\n})(this, function (exports) {\n  'use strict';\n  /**\n   * This is totally rewrite for the old parser module\n   * I'll improve and replace them little by little.\n   */\n\n  var symbols$1 = [':', ';', ',', '(', ')', '[', ']', '{', '}', 'Ï', 'Â±', '+', '-', '*', '/', '%', '\"', \"'\", '`', '@'];\n  var is$1 = {\n    escape: function escape(c) {\n      return c == '\\\\';\n    },\n    space: function space(c) {\n      return /[\\r\\n\\t\\s]/.test(c);\n    },\n    digit: function digit(c) {\n      return /^[0-9]$/.test(c);\n    },\n    sign: function sign(c) {\n      return /^[+-]$/.test(c);\n    },\n    dot: function dot(c) {\n      return c == '.';\n    },\n    quote: function quote(c) {\n      return /^[\"'`]$/.test(c);\n    },\n    symbol: function symbol(c) {\n      return symbols$1.includes(c);\n    },\n    hexNum: function hexNum(c) {\n      return /^[0-9a-f]$/i.test(c);\n    },\n    hex: function hex(a, b, c) {\n      return a == '0' && is$1.letter(b, 'x') && is$1.hexNum(c);\n    },\n    expWithSign: function expWithSign(a, b, c) {\n      return is$1.letter(a, 'e') && is$1.sign(b) && is$1.digit(c);\n    },\n    exp: function exp(a, b) {\n      return is$1.letter(a, 'e') && is$1.digit(b);\n    },\n    dots: function dots(a, b) {\n      return is$1.dot(a) && is$1.dot(b);\n    },\n    letter: function letter(a, b) {\n      return String(a).toLowerCase() == String(b).toLowerCase();\n    },\n    comment: function comment(a, b) {\n      return a == '/' && b == '*';\n    },\n    selfClosedTag: function selfClosedTag(a, b) {\n      return a == '/' && b == '>';\n    },\n    closedTag: function closedTag(a, b) {\n      return a == '<' && b == '/';\n    }\n  };\n\n  var Token = /*#__PURE__*/function () {\n    function Token(_ref) {\n      var type = _ref.type,\n          value = _ref.value,\n          pos = _ref.pos,\n          status = _ref.status;\n\n      _classCallCheck(this, Token);\n\n      this.type = type;\n      this.value = value;\n      this.pos = pos;\n\n      if (status) {\n        this.status = status;\n      }\n    }\n\n    _createClass(Token, [{\n      key: \"isSymbol\",\n      value: function isSymbol() {\n        var _this = this;\n\n        var isSymbol = this.type == 'Symbol';\n\n        for (var _len = arguments.length, values = new Array(_len), _key = 0; _key < _len; _key++) {\n          values[_key] = arguments[_key];\n        }\n\n        if (!values.length) return isSymbol;\n        return values.some(function (c) {\n          return c === _this.value;\n        });\n      }\n    }, {\n      key: \"isSpace\",\n      value: function isSpace() {\n        return this.type == 'Space';\n      }\n    }, {\n      key: \"isNumber\",\n      value: function isNumber() {\n        return this.type == 'Number';\n      }\n    }, {\n      key: \"isWord\",\n      value: function isWord() {\n        return this.type == 'Word';\n      }\n    }]);\n\n    return Token;\n  }();\n\n  function iterator$1(input) {\n    var pointer = -1;\n    var max = input.length;\n    var col = -1,\n        row = 0;\n    return {\n      curr: function curr() {\n        var n = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n        return input[pointer + n];\n      },\n      next: function next() {\n        var n = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 1;\n        var next = input[pointer += n];\n        if (next == '\\n') row++, col = 0;else col += n;\n        return next;\n      },\n      end: function end() {\n        return pointer >= max;\n      },\n      get: function get() {\n        return {\n          prev: input[pointer - 1],\n          curr: input[pointer + 0],\n          next: input[pointer + 1],\n          next2: input[pointer + 2],\n          next3: input[pointer + 3],\n          pos: [col, row]\n        };\n      }\n    };\n  }\n\n  function skipComments(iter) {\n    while (iter.next()) {\n      var _iter$get = iter.get(),\n          curr = _iter$get.curr,\n          prev = _iter$get.prev;\n\n      if (is$1.comment(curr, prev)) break;\n    }\n  }\n\n  function ignoreSpacingSymbol(value) {\n    return [':', ';', ',', '{', '}', '(', ')', '[', ']'].includes(value);\n  }\n\n  function readWord(iter) {\n    var temp = '';\n\n    while (!iter.end()) {\n      var _iter$get2 = iter.get(),\n          curr = _iter$get2.curr,\n          next = _iter$get2.next;\n\n      temp += curr;\n      var isBreak = is$1.symbol(next) || is$1.space(next) || is$1.digit(next);\n\n      if (temp.length && isBreak) {\n        if (!is$1.closedTag(curr, next)) break;\n      }\n\n      iter.next();\n    }\n\n    return temp.trim();\n  }\n\n  function readSpaces(iter) {\n    var temp = '';\n\n    while (!iter.end()) {\n      var _iter$get3 = iter.get(),\n          curr = _iter$get3.curr,\n          next = _iter$get3.next;\n\n      temp += curr;\n      if (!is$1.space(next)) break;\n      iter.next();\n    }\n\n    return temp;\n  }\n\n  function readNumber(iter) {\n    var temp = '';\n    var hasDot = false;\n\n    while (!iter.end()) {\n      var _iter$get4 = iter.get(),\n          curr = _iter$get4.curr,\n          next = _iter$get4.next,\n          next2 = _iter$get4.next2,\n          next3 = _iter$get4.next3;\n\n      temp += curr;\n      if (hasDot && is$1.dot(next)) break;\n      if (is$1.dot(curr)) hasDot = true;\n      if (is$1.dots(next, next2)) break;\n\n      if (is$1.expWithSign(next, next2, next3)) {\n        temp += iter.next() + iter.next();\n      } else if (is$1.exp(next, next2)) {\n        temp += iter.next();\n      } else if (!is$1.digit(next) && !is$1.dot(next)) {\n        break;\n      }\n\n      iter.next();\n    }\n\n    return temp;\n  }\n\n  function readHexNumber(iter) {\n    var temp = '0x';\n    iter.next(2);\n\n    while (!iter.end()) {\n      var _iter$get5 = iter.get(),\n          curr = _iter$get5.curr,\n          next = _iter$get5.next;\n\n      temp += curr;\n      if (!is$1.hexNum(next)) break;\n      iter.next();\n    }\n\n    return temp;\n  }\n\n  function last$1(array) {\n    return array[array.length - 1];\n  }\n\n  function scan(source) {\n    var iter = iterator$1(String(source).trim());\n    var tokens = [];\n    var quoteStack = [];\n\n    while (iter.next()) {\n      var _iter$get6 = iter.get(),\n          prev = _iter$get6.prev,\n          curr = _iter$get6.curr,\n          next = _iter$get6.next,\n          next2 = _iter$get6.next2,\n          pos = _iter$get6.pos;\n\n      if (is$1.comment(curr, next)) {\n        skipComments(iter);\n      } else if (is$1.hex(curr, next, next2)) {\n        var num = readHexNumber(iter);\n        tokens.push(new Token({\n          type: 'Number',\n          value: num,\n          pos: pos\n        }));\n      } else if (is$1.digit(curr) || is$1.digit(next) && is$1.dot(curr) && !is$1.dots(prev, curr)) {\n        var _num = readNumber(iter);\n\n        tokens.push(new Token({\n          type: 'Number',\n          value: _num,\n          pos: pos\n        }));\n      } else if (is$1.symbol(curr) && !is$1.selfClosedTag(curr, next)) {\n        var _lastToken = last$1(tokens); // negative\n\n\n        var isNextDigit = is$1.digit(next) || is$1.dot(next) && is$1.digit(next2);\n\n        if (curr === '-' && isNextDigit && (!_lastToken || !_lastToken.isNumber())) {\n          var _num2 = readNumber(iter);\n\n          tokens.push(new Token({\n            type: 'Number',\n            value: _num2,\n            pos: pos\n          }));\n          continue;\n        }\n\n        var token = {\n          type: 'Symbol',\n          value: curr,\n          pos: pos\n        }; // Escaped symbols\n\n        if (quoteStack.length && is$1.escape(_lastToken.value)) {\n          tokens.pop();\n          var word = readWord(iter);\n\n          if (word.length) {\n            tokens.push(new Token({\n              type: 'Word',\n              value: word,\n              pos: pos\n            }));\n          }\n        } else {\n          if (is$1.quote(curr)) {\n            var lastQuote = last$1(quoteStack);\n\n            if (lastQuote == curr) {\n              quoteStack.pop();\n              token.status = 'close';\n            } else {\n              quoteStack.push(curr);\n              token.status = 'open';\n            }\n          }\n\n          tokens.push(new Token(token));\n        }\n      } else if (is$1.space(curr)) {\n        var spaces = readSpaces(iter);\n\n        var _lastToken2 = last$1(tokens);\n\n        var _iter$get7 = iter.get(),\n            _next = _iter$get7.next; // Reduce unnecessary spaces\n\n\n        if (!quoteStack.length && _lastToken2) {\n          var _prev = _lastToken2.value;\n\n          var ignoreLeft = ignoreSpacingSymbol(_prev) && _prev !== ')';\n\n          var ignoreRight = ignoreSpacingSymbol(_next) && _next !== '(';\n\n          if (ignoreLeft || ignoreRight) {\n            continue;\n          } else {\n            spaces = ' ';\n          }\n        }\n\n        if (tokens.length && _next && _next.trim()) {\n          tokens.push(new Token({\n            type: 'Space',\n            value: spaces,\n            pos: pos\n          }));\n        }\n      } else {\n        var _word = readWord(iter);\n\n        if (_word.length) {\n          tokens.push(new Token({\n            type: 'Word',\n            value: _word,\n            pos: pos\n          }));\n        }\n      }\n    } // Remove last space token\n\n\n    var lastToken = last$1(tokens);\n\n    if (lastToken && lastToken.isSpace()) {\n      tokens.length = tokens.length - 1;\n    }\n\n    return tokens;\n  }\n\n  function parse$9(input) {\n    var iter = iterator$1(scan(input));\n    return walk$2(iter);\n  }\n\n  function walk$2(iter) {\n    var rules = [];\n\n    while (iter.next()) {\n      var _iter$get8 = iter.get(),\n          curr = _iter$get8.curr,\n          next = _iter$get8.next;\n\n      if (curr.value === 'var') {\n        if (next && next.isSymbol('(')) {\n          iter.next();\n          var rule = parseVar(iter);\n\n          if (isValid(rule.name)) {\n            rules.push(rule);\n          }\n        }\n      } else if (rules.length && !curr.isSymbol(',')) {\n        break;\n      }\n    }\n\n    return rules;\n  }\n\n  function parseVar(iter) {\n    var ret = {};\n    var tokens = [];\n\n    while (iter.next()) {\n      var _iter$get9 = iter.get(),\n          curr = _iter$get9.curr,\n          next = _iter$get9.next;\n\n      if (curr.isSymbol(')', ';') && !ret.name) {\n        ret.name = joinTokens$2(tokens);\n        break;\n      } else if (curr.isSymbol(',')) {\n        if (ret.name === undefined) {\n          ret.name = joinTokens$2(tokens);\n          tokens = [];\n        }\n\n        if (ret.name) {\n          ret.fallback = walk$2(iter);\n        }\n      } else {\n        tokens.push(curr);\n      }\n    }\n\n    return ret;\n  }\n\n  function joinTokens$2(tokens) {\n    return tokens.map(function (n) {\n      return n.value;\n    }).join('');\n  }\n\n  function isValid(name) {\n    if (name === undefined) return false;\n    if (name.length <= 2) return false;\n    if (name.substr(2).startsWith('-')) return false;\n    if (!name.startsWith('--')) return false;\n    return true;\n  }\n\n  function clamp(num, min, max) {\n    num = Number(num) || 0;\n    return Math.max(min, Math.min(max, num));\n  }\n\n  function maybe(cond, value) {\n    if (!cond) return '';\n    return typeof value === 'function' ? value() : value;\n  }\n\n  function range(start, stop, step) {\n    var count = 0,\n        old = start;\n\n    var initial = function initial(n) {\n      return n > 0 && n < 1 ? .1 : 1;\n    };\n\n    var length = arguments.length;\n\n    if (length == 1) {\n      var _ref2 = [initial(start), start];\n      start = _ref2[0];\n      stop = _ref2[1];\n    }\n\n    if (length < 3) step = initial(start);\n    var range = [];\n\n    while (step >= 0 && start <= stop || step < 0 && start > stop) {\n      range.push(start);\n      start += step;\n      if (count++ >= 1000) break;\n    }\n\n    if (!range.length) range.push(old);\n    return range;\n  }\n\n  function add_alias(obj, names) {\n    for (var _i = 0, _Object$entries = Object.entries(names); _i < _Object$entries.length; _i++) {\n      var _Object$entries$_i = _slicedToArray(_Object$entries[_i], 2),\n          alias = _Object$entries$_i[0],\n          name = _Object$entries$_i[1];\n\n      obj[alias] = obj[name];\n    }\n\n    return obj;\n  }\n\n  function is_letter(c) {\n    return /^[a-zA-Z]$/.test(c);\n  }\n\n  function is_nil(s) {\n    return s === undefined || s === null;\n  }\n\n  function is_invalid_number(v) {\n    return is_nil(v) || Number.isNaN(v);\n  }\n\n  function is_empty(value) {\n    return is_nil(value) || value === '';\n  }\n\n  function lazy(fn) {\n    var wrap = function wrap() {\n      return fn;\n    };\n\n    wrap.lazy = true;\n    return wrap;\n  }\n\n  function sequence(count, fn) {\n    var _String$split = String(count).split('x'),\n        _String$split2 = _slicedToArray(_String$split, 2),\n        x = _String$split2[0],\n        _String$split2$ = _String$split2[1],\n        y = _String$split2$ === void 0 ? 1 : _String$split2$;\n\n    x = clamp(Math.ceil(x) || 1, 1, 65536);\n    y = clamp(Math.ceil(y) || 1, 1, 65536);\n    var max = x * y;\n    var ret = [];\n    var index = 1;\n\n    for (var i = 1; i <= y; ++i) {\n      for (var j = 1; j <= x; ++j) {\n        ret.push(fn(index++, j, i, max, x, y));\n      }\n    }\n\n    return ret;\n  }\n\n  function cell_id(x, y, z) {\n    return 'c-' + x + '-' + y + '-' + z;\n  }\n\n  function get_value(input) {\n    var v = input;\n\n    while (v && !is_nil(v.value)) {\n      v = v.value;\n    }\n\n    return is_nil(v) ? '' : v;\n  }\n\n  function normalize_png_name(name) {\n    var prefix = is_nil(name) ? Date.now() : String(name).replace(/\\/.png$/g, '');\n    return prefix + '.png';\n  }\n\n  function cache_image(src, fn) {\n    var delay = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n    var img = new Image();\n    img.crossOrigin = 'anonymous';\n    img.src = src;\n\n    img.onload = function () {\n      setTimeout(fn, delay);\n    };\n  }\n\n  function is_safari() {\n    return /^((?!chrome|android).)*safari/i.test(navigator.userAgent);\n  }\n\n  function un_entity(code) {\n    var textarea = document.createElement('textarea');\n    textarea.innerHTML = code;\n    return textarea.value;\n  }\n\n  function entity(code) {\n    return code.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(/\"/g, '&quot;');\n  }\n  /* cyrb53 */\n\n\n  function hash(str) {\n    var seed = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n    var h1 = 0xdeadbeef ^ seed,\n        h2 = 0x41c6ce57 ^ seed;\n\n    for (var i = 0, ch; i < str.length; i++) {\n      ch = str.charCodeAt(i);\n      h1 = Math.imul(h1 ^ ch, 2654435761);\n      h2 = Math.imul(h2 ^ ch, 1597334677);\n    }\n\n    h1 = Math.imul(h1 ^ h1 >>> 16, 2246822507) ^ Math.imul(h2 ^ h2 >>> 13, 3266489909);\n    h2 = Math.imul(h2 ^ h2 >>> 16, 2246822507) ^ Math.imul(h1 ^ h1 >>> 13, 3266489909);\n    return 4294967296 * (2097151 & h2) + (h1 >>> 0);\n  }\n\n  function make_tag_function(fn) {\n    var get_value = function get_value(v) {\n      return is_nil(v) ? '' : v;\n    };\n\n    return function (input) {\n      for (var _len2 = arguments.length, vars = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n        vars[_key2 - 1] = arguments[_key2];\n      }\n\n      var string = input.reduce(function (s, c, i) {\n        return s + c + get_value(vars[i]);\n      }, '');\n      return fn(string);\n    };\n  }\n\n  function next_id() {\n    var id = 0;\n    return function () {\n      var prefix = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n      return \"\".concat(prefix, \"-\").concat(++id);\n    };\n  }\n\n  function lerp(t, a, b) {\n    return a + t * (b - a);\n  }\n\n  function unique_id() {\n    var prefix = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n    return prefix + Math.random().toString(32).substr(2);\n  }\n\n  function make_array(arr) {\n    return Array.isArray(arr) ? arr : [arr];\n  }\n\n  function join(arr) {\n    var spliter = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '\\n';\n    return (arr || []).join(spliter);\n  }\n\n  function last(arr) {\n    var n = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n    if (is_nil(arr)) return '';\n    return arr[arr.length - n];\n  }\n\n  function first(arr) {\n    return arr[0];\n  }\n\n  function clone(arr) {\n    return JSON.parse(JSON.stringify(arr));\n  }\n\n  function duplicate(arr) {\n    return [].concat(arr, arr);\n  }\n\n  function flat_map(arr, fn) {\n    if (Array.prototype.flatMap) return arr.flatMap(fn);\n    return arr.reduce(function (acc, x) {\n      return acc.concat(fn(x));\n    }, []);\n  }\n\n  function remove_empty_values(arr) {\n    return arr.filter(function (v) {\n      return !is_nil(v) && String(v).trim().length;\n    });\n  }\n\n  var Tokens = {\n    func: function func() {\n      var name = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n      return {\n        type: 'func',\n        name: name,\n        arguments: []\n      };\n    },\n    argument: function argument() {\n      return {\n        type: 'argument',\n        value: []\n      };\n    },\n    text: function text() {\n      var value = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n      return {\n        type: 'text',\n        value: value\n      };\n    },\n    pseudo: function pseudo() {\n      var selector = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n      return {\n        type: 'pseudo',\n        selector: selector,\n        styles: []\n      };\n    },\n    cond: function cond() {\n      var name = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n      return {\n        type: 'cond',\n        name: name,\n        styles: [],\n        arguments: []\n      };\n    },\n    rule: function rule() {\n      var property = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n      return {\n        type: 'rule',\n        property: property,\n        value: []\n      };\n    },\n    keyframes: function keyframes() {\n      var name = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n      return {\n        type: 'keyframes',\n        name: name,\n        steps: []\n      };\n    },\n    step: function step() {\n      var name = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n      return {\n        type: 'step',\n        name: name,\n        styles: []\n      };\n    }\n  };\n  var is = {\n    white_space: function white_space(c) {\n      return /[\\s\\n\\t]/.test(c);\n    },\n    line_break: function line_break(c) {\n      return /\\n/.test(c);\n    },\n    number: function number(n) {\n      return !isNaN(n);\n    },\n    pair: function pair(n) {\n      return ['\"', '(', ')', \"'\"].includes(n);\n    },\n    pair_of: function pair_of(c, n) {\n      return {\n        '\"': '\"',\n        \"'\": \"'\",\n        '(': ')'\n      }[c] == n;\n    }\n  }; // This should not be in the parser\n  // but I'll leave it here until the rewriting\n\n  var symbols = {\n    'Ï': Math.PI,\n    'â': Math.PI\n  };\n\n  function composible(name) {\n    return ['@canvas', '@shaders', '@doodle'].includes(name);\n  }\n\n  function iterator() {\n    var input = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n    var _index = 0,\n        col = 1,\n        line = 1;\n    return {\n      curr: function curr() {\n        var n = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n        return input[_index + n];\n      },\n      end: function end() {\n        return input.length <= _index;\n      },\n      info: function info() {\n        return {\n          index: _index,\n          col: col,\n          line: line\n        };\n      },\n      index: function index(n) {\n        return n === undefined ? _index : _index = n;\n      },\n      next: function next() {\n        var next = input[_index++];\n        if (next == '\\n') line++, col = 0;else col++;\n        return next;\n      }\n    };\n  }\n\n  function throw_error(msg, _ref3) {\n    var col = _ref3.col,\n        line = _ref3.line;\n    console.warn(\"(at line \".concat(line, \", column \").concat(col, \") \").concat(msg));\n  }\n\n  function get_text_value(input) {\n    if (input.trim().length) {\n      return is.number(+input) ? +input : input.trim();\n    } else {\n      return input;\n    }\n  }\n\n  function read_until(fn) {\n    return function (it, reset) {\n      var index = it.index();\n      var word = '';\n\n      while (!it.end()) {\n        var c = it.next();\n        if (fn(c)) break;else word += c;\n      }\n\n      if (reset) {\n        it.index(index);\n      }\n\n      return word;\n    };\n  }\n\n  function read_word(it, reset) {\n    var check = function check(c) {\n      return /[^\\w@]/.test(c);\n    };\n\n    return read_until(check)(it, reset);\n  }\n\n  function read_keyframe_name(it) {\n    return read_until(function (c) {\n      return /[\\s\\{]/.test(c);\n    })(it);\n  }\n\n  function read_line(it, reset) {\n    var check = function check(c) {\n      return is.line_break(c) || c == '{';\n    };\n\n    return read_until(check)(it, reset);\n  }\n\n  function read_step(it, extra) {\n    var c,\n        step = Tokens.step();\n\n    while (!it.end()) {\n      if ((c = it.curr()) == '}') break;\n\n      if (is.white_space(c)) {\n        it.next();\n        continue;\n      } else if (!step.name.length) {\n        step.name = read_selector(it);\n      } else {\n        step.styles.push(read_rule(it, extra));\n        if (it.curr() == '}') break;\n      }\n\n      it.next();\n    }\n\n    return step;\n  }\n\n  function read_steps(it, extra) {\n    var steps = [];\n    var c;\n\n    while (!it.end()) {\n      if ((c = it.curr()) == '}') break;else if (is.white_space(c)) {\n        it.next();\n        continue;\n      } else {\n        steps.push(read_step(it, extra));\n      }\n      it.next();\n    }\n\n    return steps;\n  }\n\n  function read_keyframes(it, extra) {\n    var keyframes = Tokens.keyframes(),\n        c;\n\n    while (!it.end()) {\n      if ((c = it.curr()) == '}') break;else if (!keyframes.name.length) {\n        read_word(it);\n        keyframes.name = read_keyframe_name(it);\n\n        if (!keyframes.name.length) {\n          throw_error('missing keyframes name', it.info());\n          break;\n        }\n\n        continue;\n      } else if (c == '{' || it.curr(-1) == '{') {\n        it.next();\n        keyframes.steps = read_steps(it, extra);\n        break;\n      }\n      it.next();\n    }\n\n    return keyframes;\n  }\n\n  function read_comments(it) {\n    var flag = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    it.next();\n\n    while (!it.end()) {\n      var c = it.curr();\n\n      if (flag.inline) {\n        if (c == '\\n') break;\n      } else {\n        if ((c = it.curr()) == '*' && it.curr(1) == '/') break;\n      }\n\n      it.next();\n    }\n\n    if (!flag.inline) {\n      it.next();\n      it.next();\n    }\n  }\n\n  function skip_tag(it) {\n    it.next();\n\n    while (!it.end()) {\n      var c = it.curr();\n      if (c == '>') break;\n      it.next();\n    }\n  }\n\n  function read_property(it) {\n    var prop = '',\n        c;\n\n    while (!it.end()) {\n      if ((c = it.curr()) == ':') break;else if (!is.white_space(c)) prop += c;\n      it.next();\n    }\n\n    return prop;\n  }\n\n  function read_arguments(it, composition, doodle) {\n    var args = [],\n        group = [],\n        stack = [],\n        arg = '',\n        c;\n\n    while (!it.end()) {\n      c = it.curr();\n\n      if (/[\\('\"`]/.test(c) && it.curr(-1) !== '\\\\') {\n        if (stack.length) {\n          if (c != '(' && c === last(stack)) {\n            stack.pop();\n          } else {\n            stack.push(c);\n          }\n        } else {\n          stack.push(c);\n        }\n\n        arg += c;\n      } else if (c == '@' && !doodle) {\n        if (!group.length) {\n          arg = arg.trimLeft();\n        }\n\n        if (arg.length) {\n          group.push(Tokens.text(arg));\n          arg = '';\n        }\n\n        group.push(read_func(it));\n      } else if (doodle && /[)]/.test(c) || !doodle && /[,)]/.test(c)) {\n        if (stack.length) {\n          if (c == ')') {\n            stack.pop();\n          }\n\n          arg += c;\n        } else {\n          if (arg.length) {\n            if (!group.length) {\n              group.push(Tokens.text(get_text_value(arg)));\n            } else {\n              group.push(Tokens.text(arg));\n            }\n\n            if (arg.startsWith('Â±') && !doodle) {\n              var raw = arg.substr(1);\n              var cloned = clone(group);\n              last(cloned).value = '-' + raw;\n              args.push(normalize_argument(cloned));\n              last(group).value = raw;\n            }\n          }\n\n          args.push(normalize_argument(group));\n          group = [];\n          arg = '';\n          if (c == ')') break;\n        }\n      } else {\n        if (symbols[c] && !/[0-9]/.test(it.curr(-1))) {\n          c = symbols[c];\n        }\n\n        arg += c;\n      }\n\n      if (composition && (it.curr(1) == ')' || !/[0-9a-zA-Z_\\-.]/.test(it.curr())) && !stack.length) {\n        if (group.length) {\n          args.push(normalize_argument(group));\n        }\n\n        break;\n      } else {\n        it.next();\n      }\n    }\n\n    return skip_last_empty_args(args);\n  }\n\n  function skip_last_empty_args(args) {\n    var arg = last(args[0]);\n\n    if (arg && arg.type === 'text' && !String(arg.value).trim().length) {\n      args[0] = args[0].slice(0, -1);\n    }\n\n    return args;\n  }\n\n  function normalize_argument(group) {\n    var result = group.map(function (arg) {\n      if (arg.type == 'text' && typeof arg.value == 'string') {\n        var value = String(arg.value);\n\n        if (value.includes('`')) {\n          arg.value = value = value.replace(/`/g, '\"');\n        }\n\n        arg.value = value;\n      }\n\n      return arg;\n    });\n    var ft = first(result) || {};\n    var ed = last(result) || {};\n\n    if (ft.type == 'text' && ed.type == 'text') {\n      var cf = first(ft.value);\n      var ce = last(ed.value);\n\n      if (typeof ft.value == 'string' && typeof ed.value == 'string') {\n        if (is.pair_of(cf, ce)) {\n          ft.value = ft.value.slice(1);\n          ed.value = ed.value.slice(0, ed.value.length - 1);\n          result.cluster = true;\n        }\n      }\n    }\n\n    return result;\n  }\n\n  function seperate_func_name(name) {\n    var fname = '',\n        extra = '';\n\n    if (/\\D$/.test(name) && !/\\d+x\\d+/.test(name) || Math[name.substr(1)]) {\n      return {\n        fname: name,\n        extra: extra\n      };\n    }\n\n    for (var i = name.length - 1; i >= 0; i--) {\n      var c = name[i];\n      var prev = name[i - 1];\n      var next = name[i + 1];\n\n      if (/[\\d.]/.test(c) || c == 'x' && /\\d/.test(prev) && /\\d/.test(next)) {\n        extra = c + extra;\n      } else {\n        fname = name.substring(0, i + 1);\n        break;\n      }\n    }\n\n    return {\n      fname: fname,\n      extra: extra\n    };\n  }\n\n  function read_func(it) {\n    var func = Tokens.func();\n    var name = '@',\n        c;\n    var has_argument = false;\n    it.next();\n\n    while (!it.end()) {\n      c = it.curr();\n      var composition = c == '.' && it.curr(1) == '@';\n      var next = it.curr(1);\n\n      if (c == '(' || composition) {\n        has_argument = true;\n        it.next();\n        func.arguments = read_arguments(it, composition, composible(name));\n        break;\n      } else if (!has_argument && next !== '(' && !/[0-9a-zA-Z_\\-.]/.test(next)) {\n        name += c;\n        break;\n      } else {\n        name += c;\n      }\n\n      it.next();\n    }\n\n    var _seperate_func_name = seperate_func_name(name),\n        fname = _seperate_func_name.fname,\n        extra = _seperate_func_name.extra;\n\n    func.name = fname;\n\n    if (extra.length) {\n      func.arguments.unshift([{\n        type: 'text',\n        value: extra\n      }]);\n    }\n\n    func.position = it.info().index;\n    return func;\n  }\n\n  function read_value(it) {\n    var text = Tokens.text(),\n        idx = 0,\n        skip = true,\n        c;\n    var value = [],\n        stack = [];\n    value[idx] = [];\n\n    while (!it.end()) {\n      c = it.curr();\n\n      if (skip && is.white_space(c)) {\n        it.next();\n        continue;\n      } else {\n        skip = false;\n      }\n\n      if (c == '\\n' && !is.white_space(it.curr(-1))) {\n        text.value += ' ';\n      } else if (c == ',' && !stack.length) {\n        if (text.value.length) {\n          value[idx].push(text);\n          text = Tokens.text();\n        }\n\n        value[++idx] = [];\n        skip = true;\n      } else if (/[;}<]/.test(c)) {\n        if (text.value.length) {\n          value[idx].push(text);\n          text = Tokens.text();\n        }\n\n        break;\n      } else if (c == '@') {\n        if (text.value.length) {\n          value[idx].push(text);\n          text = Tokens.text();\n        }\n\n        value[idx].push(read_func(it));\n      } else if (!is.white_space(c) || !is.white_space(it.curr(-1))) {\n        if (c == '(') stack.push(c);\n        if (c == ')') stack.pop();\n\n        if (symbols[c] && !/[0-9]/.test(it.curr(-1))) {\n          c = symbols[c];\n        }\n\n        text.value += c;\n      }\n\n      it.next();\n    }\n\n    if (text.value.length) {\n      value[idx].push(text);\n    }\n\n    return value;\n  }\n\n  function read_selector(it) {\n    var selector = '',\n        c;\n\n    while (!it.end()) {\n      if ((c = it.curr()) == '{') break;else if (!is.white_space(c)) {\n        selector += c;\n      }\n      it.next();\n    }\n\n    return selector;\n  }\n\n  function read_cond_selector(it) {\n    var selector = {\n      name: '',\n      arguments: []\n    },\n        c;\n\n    while (!it.end()) {\n      if ((c = it.curr()) == '(') {\n        it.next();\n        selector.arguments = read_arguments(it);\n      } else if (/[){]/.test(c)) break;else if (!is.white_space(c)) selector.name += c;\n\n      it.next();\n    }\n\n    return selector;\n  }\n\n  function read_pseudo(it, extra) {\n    var pseudo = Tokens.pseudo(),\n        c;\n\n    while (!it.end()) {\n      c = it.curr();\n\n      if (c == '/' && it.curr(1) == '*') {\n        read_comments(it);\n      } else if (c == '}') {\n        break;\n      } else if (is.white_space(c)) {\n        it.next();\n        continue;\n      } else if (!pseudo.selector) {\n        pseudo.selector = read_selector(it);\n      } else {\n        var rule = read_rule(it, extra);\n\n        if (rule.property == '@use') {\n          pseudo.styles = pseudo.styles.concat(rule.value);\n        } else {\n          pseudo.styles.push(rule);\n        }\n\n        if (it.curr() == '}') break;\n      }\n\n      it.next();\n    }\n\n    return pseudo;\n  }\n\n  function read_rule(it, extra) {\n    var rule = Tokens.rule(),\n        c;\n\n    while (!it.end()) {\n      c = it.curr();\n\n      if (c == '/' && it.curr(1) == '*') {\n        read_comments(it);\n      } else if (c == ';') {\n        break;\n      } else if (!rule.property.length) {\n        rule.property = read_property(it);\n\n        if (rule.property == '@use') {\n          rule.value = read_var(it, extra);\n          break;\n        }\n      } else {\n        rule.value = read_value(it);\n        break;\n      }\n\n      it.next();\n    }\n\n    return rule;\n  }\n\n  function read_cond(it, extra) {\n    var cond = Tokens.cond(),\n        c;\n\n    while (!it.end()) {\n      c = it.curr();\n\n      if (c == '/' && it.curr(1) == '*') {\n        read_comments(it);\n      } else if (c == '}') {\n        break;\n      } else if (!cond.name.length) {\n        Object.assign(cond, read_cond_selector(it));\n      } else if (c == ':') {\n        var pseudo = read_pseudo(it);\n        if (pseudo.selector) cond.styles.push(pseudo);\n      } else if (c == '@' && !read_line(it, true).includes(':')) {\n        cond.styles.push(read_cond(it));\n      } else if (!is.white_space(c)) {\n        var rule = read_rule(it, extra);\n        if (rule.property) cond.styles.push(rule);\n        if (it.curr() == '}') break;\n      }\n\n      it.next();\n    }\n\n    return cond;\n  }\n\n  function read_variable(extra, name) {\n    var rule = '';\n\n    if (extra && extra.get_variable) {\n      rule = extra.get_variable(name);\n    }\n\n    return rule;\n  }\n\n  function evaluate_value(values, extra) {\n    values.forEach && values.forEach(function (v) {\n      if (v.type == 'text' && v.value) {\n        var vars = parse$9(v.value);\n        v.value = vars.reduce(function (ret, p) {\n          var rule = '',\n              other = '',\n              parsed;\n          rule = read_variable(extra, p.name);\n\n          if (!rule && p.fallback) {\n            p.fallback.every(function (n) {\n              other = read_variable(extra, n.name);\n\n              if (other) {\n                rule = other;\n                return false;\n              }\n            });\n          }\n\n          try {\n            parsed = parse$8(rule, extra);\n          } catch (e) {}\n\n          if (parsed) {\n            ret.push.apply(ret, parsed);\n          }\n\n          return ret;\n        }, []);\n      }\n\n      if (v.type == 'func' && v.arguments) {\n        v.arguments.forEach(function (arg) {\n          evaluate_value(arg, extra);\n        });\n      }\n    });\n  }\n\n  function read_var(it, extra) {\n    it.next();\n    var groups = read_value(it) || [];\n    return groups.reduce(function (ret, group) {\n      evaluate_value(group, extra);\n\n      var _group = _slicedToArray(group, 1),\n          token = _group[0];\n\n      if (token.value && token.value.length) {\n        ret.push.apply(ret, _toConsumableArray(token.value));\n      }\n\n      return ret;\n    }, []);\n  }\n\n  function parse$8(input, extra) {\n    var it = iterator(input);\n    var Tokens = [];\n\n    while (!it.end()) {\n      var c = it.curr();\n\n      if (is.white_space(c)) {\n        it.next();\n        continue;\n      } else if (c == '/' && it.curr(1) == '*') {\n        read_comments(it);\n      } else if (c == ':') {\n        var pseudo = read_pseudo(it, extra);\n        if (pseudo.selector) Tokens.push(pseudo);\n      } else if (c == '@' && read_word(it, true) === '@keyframes') {\n        var keyframes = read_keyframes(it, extra);\n        Tokens.push(keyframes);\n      } else if (c == '@' && !read_line(it, true).includes(':')) {\n        var cond = read_cond(it, extra);\n        if (cond.name.length) Tokens.push(cond);\n      } else if (c == '<') {\n        skip_tag(it);\n      } else if (!is.white_space(c)) {\n        var rule = read_rule(it, extra);\n        if (rule.property) Tokens.push(rule);\n      }\n\n      it.next();\n    }\n\n    return Tokens;\n  }\n\n  var min = 1,\n      max = 32,\n      total = 32 * 32;\n\n  function parse_grid(size) {\n    var _replace$replace$spli = (size + '').replace(/\\s+/g, '').replace(/[,ï¼xX]+/g, 'x').split('x').map(function (n) {\n      return parseInt(n);\n    }),\n        _replace$replace$spli2 = _slicedToArray(_replace$replace$spli, 3),\n        x = _replace$replace$spli2[0],\n        y = _replace$replace$spli2[1],\n        z = _replace$replace$spli2[2];\n\n    var max_xy = x == 1 || y == 1 ? total : max;\n    var max_z = x == 1 && y == 1 ? total : min;\n    var ret = {\n      x: clamp(x || min, 1, max_xy),\n      y: clamp(y || x || min, 1, max_xy),\n      z: clamp(z || min, 1, max_z)\n    };\n    return Object.assign({}, ret, {\n      count: ret.x * ret.y * ret.z,\n      ratio: ret.x / ret.y\n    });\n  }\n\n  function parse$7(input) {\n    var iter = iterator$1(removeParens(scan(input)));\n    var stack = [];\n    var tokens = [];\n    var identifier;\n    var line;\n    var result = {\n      textures: []\n    };\n\n    while (iter.next()) {\n      var _iter$get10 = iter.get(),\n          curr = _iter$get10.curr,\n          next = _iter$get10.next;\n\n      if (curr.isSymbol('{')) {\n        if (!stack.length) {\n          var name = joinToken$2(tokens);\n\n          if (isIdentifier(name)) {\n            identifier = name;\n            tokens = [];\n          } else {\n            tokens.push(curr);\n          }\n        } else {\n          tokens.push(curr);\n        }\n\n        stack.push('{');\n      } else if (curr.isSymbol('}')) {\n        stack.pop();\n\n        if (!stack.length && identifier) {\n          var value = joinToken$2(tokens);\n\n          if (identifier && value.length) {\n            if (identifier.startsWith('texture')) {\n              result.textures.push({\n                name: identifier,\n                value: value\n              });\n            } else {\n              result[identifier] = value;\n            }\n\n            tokens = [];\n          }\n\n          identifier = null;\n        } else {\n          tokens.push(curr);\n        }\n      } else {\n        if (!is_empty(line) && line != curr.pos[1]) {\n          tokens.push(lineBreak());\n          line = null;\n        }\n\n        if (curr.isWord() && curr.value.startsWith('#')) {\n          tokens.push(lineBreak());\n          line = next.pos[1];\n        }\n\n        tokens.push(curr);\n      }\n    }\n\n    if (is_empty(result.fragment)) {\n      return {\n        fragment: joinToken$2(tokens),\n        textures: []\n      };\n    }\n\n    return result;\n  }\n\n  function isIdentifier(name) {\n    return /^texture\\w*$|^(fragment|vertex)$/.test(name);\n  }\n\n  function lineBreak() {\n    return new Token({\n      type: 'LineBreak',\n      value: '\\n'\n    });\n  }\n\n  function removeParens(tokens) {\n    var head = tokens[0];\n    var last = tokens[tokens.length - 1];\n\n    while (head && head.isSymbol('(') && last && last.isSymbol(')')) {\n      tokens = tokens.slice(1, tokens.length - 1);\n      head = tokens[0];\n      last = tokens[tokens.length - 1];\n    }\n\n    return tokens;\n  }\n\n  function joinToken$2(tokens) {\n    return removeParens(tokens).map(function (n) {\n      return n.value;\n    }).join('');\n  }\n\n  var NS$1 = 'http://www.w3.org/2000/svg';\n  var NSXLink$1 = 'http://www.w3.org/1999/xlink';\n\n  function create_svg_url(svg, id) {\n    var encoded = encodeURIComponent(svg) + (id ? \"#\".concat(id) : '');\n    return \"url(\\\"data:image/svg+xml;utf8,\".concat(encoded, \"\\\")\");\n  }\n\n  function normalize_svg(input) {\n    var xmlns = \"xmlns=\\\"\".concat(NS$1, \"\\\"\");\n    var xmlnsXLink = \"xmlns:xlink=\\\"\".concat(NSXLink$1, \"\\\"\");\n\n    if (!input.includes('<svg')) {\n      input = \"<svg \".concat(xmlns, \" \").concat(xmlnsXLink, \">\").concat(input, \"</svg>\");\n    }\n\n    if (!input.includes('xmlns')) {\n      input = input.replace(/<svg([\\s>])/, \"<svg \".concat(xmlns, \" \").concat(xmlnsXLink, \"$1\"));\n    }\n\n    return input;\n  }\n\n  var NS = 'http://www.w3.org/2000/svg';\n  var NSXLink = 'http://www.w3.org/1999/xlink';\n  var nextId$1 = next_id();\n\n  var Tag = /*#__PURE__*/function () {\n    function Tag(name) {\n      var value = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n\n      _classCallCheck(this, Tag);\n\n      if (!name) {\n        throw new Error(\"Tag name is required\");\n      }\n\n      this.name = name;\n      this.body = [];\n      this.attrs = {};\n\n      if (this.isTextNode()) {\n        this.body = value;\n      }\n    }\n\n    _createClass(Tag, [{\n      key: \"isTextNode\",\n      value: function isTextNode() {\n        return this.name === 'text-node';\n      }\n    }, {\n      key: \"append\",\n      value: function append(tag) {\n        if (!this.isTextNode()) {\n          this.body.push(tag);\n        }\n      }\n    }, {\n      key: \"attr\",\n      value: function attr(name, value) {\n        if (!this.isTextNode()) {\n          if (value === undefined) {\n            return this.attrs[name];\n          }\n\n          return this.attrs[name] = value;\n        }\n      }\n    }, {\n      key: \"toString\",\n      value: function toString() {\n        if (this.isTextNode()) {\n          return this.body;\n        }\n\n        var attrs = [''];\n        var body = [];\n\n        for (var _i2 = 0, _Object$entries2 = Object.entries(this.attrs); _i2 < _Object$entries2.length; _i2++) {\n          var _Object$entries2$_i = _slicedToArray(_Object$entries2[_i2], 2),\n              name = _Object$entries2$_i[0],\n              value = _Object$entries2$_i[1];\n\n          attrs.push(\"\".concat(name, \"=\\\"\").concat(value, \"\\\"\"));\n        }\n\n        var _iterator = _createForOfIteratorHelper(this.body),\n            _step;\n\n        try {\n          for (_iterator.s(); !(_step = _iterator.n()).done;) {\n            var tag = _step.value;\n            body.push(tag.toString());\n          }\n        } catch (err) {\n          _iterator.e(err);\n        } finally {\n          _iterator.f();\n        }\n\n        return \"<\".concat(this.name).concat(attrs.join(' '), \">\").concat(body.join(''), \"</\").concat(this.name, \">\");\n      }\n    }]);\n\n    return Tag;\n  }();\n\n  function composeStyleRule(name, value) {\n    return \"\".concat(name, \":\").concat(value, \";\");\n  }\n\n  function composeStyle(block) {\n    var style = block.value.map(function (n) {\n      return n.type === 'block' ? composeStyle(n) : composeStyleRule(n.name, n.value);\n    }).join('');\n    return \"\".concat(block.name, \"{\").concat(style, \"}\");\n  }\n\n  function generate$1(token, element, parent, root) {\n    var inlineId;\n\n    if (!element) {\n      element = new Tag('root');\n    }\n\n    if (token.type === 'block') {\n      // style tag\n      if (token.name === 'style') {\n        if (Array.isArray(token.value)) {\n          var el = new Tag('style');\n          var styles = [];\n\n          var _iterator2 = _createForOfIteratorHelper(token.value),\n              _step2;\n\n          try {\n            for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n              var block = _step2.value;\n\n              if (block.type === 'block') {\n                styles.push(composeStyle(block));\n              }\n            }\n          } catch (err) {\n            _iterator2.e(err);\n          } finally {\n            _iterator2.f();\n          }\n\n          el.append(styles.join(''));\n          element.append(el);\n        }\n      } // normal svg elements\n      else {\n          var _el = new Tag(token.name);\n\n          if (!root) {\n            root = _el;\n            root.attr('xmlns', NS);\n          }\n\n          var _iterator3 = _createForOfIteratorHelper(token.value),\n              _step3;\n\n          try {\n            for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {\n              var _block = _step3.value;\n              var id = generate$1(_block, _el, token, root);\n\n              if (id) {\n                inlineId = id;\n              }\n            } // generate id for inline block if no id is found\n\n          } catch (err) {\n            _iterator3.e(err);\n          } finally {\n            _iterator3.f();\n          }\n\n          if (token.inline) {\n            var found = token.value.find(function (n) {\n              return n.type === 'statement' && n.name === 'id';\n            });\n\n            if (found) {\n              inlineId = found.value;\n            } else {\n              inlineId = nextId$1(token.name);\n\n              _el.attr('id', inlineId);\n            }\n          }\n\n          element.append(_el);\n        }\n    }\n\n    if (token.type === 'statement') {\n      var isTextNode = parent && (parent.name === 'text' || parent.name === 'tspan');\n\n      if (isTextNode && token.name === 'content') {\n        var text = new Tag('text-node', token.value);\n        element.append(text);\n      } // inline style\n      else if (token.name.startsWith('style ')) {\n          var name = (token.name.split('style ')[1] || '').trim();\n\n          if (name.length) {\n            var style = element.attr('style') || '';\n            element.attr('style', style + composeStyleRule(name, token.value));\n          }\n        } else {\n          var value = token.value; // handle inline block value\n\n          if (value && value.type === 'block') {\n            var _id = generate$1(token.value, root, token, root);\n\n            value = \"url(#\".concat(_id, \")\");\n          }\n\n          element.attr(token.name, value);\n\n          if (token.name.includes('xlink:')) {\n            root.attr('xmlns:xlink', NSXLink);\n          }\n        }\n    }\n\n    if (!parent) {\n      return root.toString();\n    }\n\n    return inlineId;\n  }\n\n  function generate_svg(token) {\n    return generate$1(token);\n  }\n\n  function parse$6(input) {\n    var iter = iterator$1(scan(input));\n    var ret = {};\n    var matched = false;\n\n    while (iter.next()) {\n      var _iter$get11 = iter.get(),\n          prev = _iter$get11.prev,\n          curr = _iter$get11.curr;\n\n      if (curr.isNumber()) {\n        ret.value = Number(curr.value);\n        matched = true;\n      } else if (matched && (curr.isWord() || curr.isSymbol()) && prev && prev.isNumber()) {\n        ret.unit = curr.value;\n      } else {\n        break;\n      }\n    }\n\n    return ret;\n  }\n\n  function by_unit(fn) {\n    return function () {\n      var units = [],\n          values = [];\n\n      for (var _len3 = arguments.length, args = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n        args[_key3] = arguments[_key3];\n      }\n\n      for (var _i3 = 0, _args = args; _i3 < _args.length; _i3++) {\n        var arg = _args[_i3];\n\n        var _parse$ = parse$6(arg),\n            _unit = _parse$.unit,\n            value = _parse$.value;\n\n        if (_unit !== undefined) {\n          units.push(_unit);\n        }\n\n        if (value !== undefined) {\n          values.push(value);\n        }\n      }\n\n      var result = fn.apply(void 0, values);\n      var unit = units.find(function (n) {\n        return n !== undefined;\n      });\n\n      if (unit === undefined) {\n        return result;\n      }\n\n      if (Array.isArray(result)) {\n        return result.map(function (n) {\n          return n + unit;\n        });\n      }\n\n      return result + unit;\n    };\n  }\n\n  function by_charcode(fn) {\n    return function () {\n      for (var _len4 = arguments.length, args = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n        args[_key4] = arguments[_key4];\n      }\n\n      var codes = args.map(function (n) {\n        return String(n).charCodeAt(0);\n      });\n      var result = fn.apply(void 0, _toConsumableArray(codes));\n      return Array.isArray(result) ? result.map(function (n) {\n        return String.fromCharCode(n);\n      }) : String.fromCharCode(result);\n    };\n  }\n  /**\n   * Based on the Shunting-yard algorithm.\n   */\n\n\n  var default_context = {\n    'Ï': Math.PI,\n    gcd: function gcd(a, b) {\n      while (b) {\n        var _ref4 = [b, a % b];\n        a = _ref4[0];\n        b = _ref4[1];\n      }\n\n      return a;\n    }\n  };\n  var operator = {\n    '^': 7,\n    '*': 6,\n    '/': 6,\n    'Ã·': 6,\n    '%': 6,\n    '&': 5,\n    '|': 5,\n    '+': 4,\n    '-': 4,\n    '<': 3,\n    '<<': 3,\n    '>': 3,\n    '>>': 3,\n    '=': 3,\n    '==': 3,\n    'â¤': 3,\n    '<=': 3,\n    'â¥': 3,\n    '>=': 3,\n    'â ': 3,\n    '!=': 3,\n    'â§': 2,\n    '&&': 2,\n    'â¨': 2,\n    '||': 2,\n    '(': 1,\n    ')': 1\n  };\n\n  function calc(expr, context) {\n    var repeat = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [];\n    var stack = [];\n\n    while (expr.length) {\n      var _expr$shift = expr.shift(),\n          name = _expr$shift.name,\n          value = _expr$shift.value,\n          type = _expr$shift.type;\n\n      if (type === 'variable') {\n        var result = context[value];\n\n        if (is_invalid_number(result)) {\n          result = Math[value];\n        }\n\n        if (is_invalid_number(result)) {\n          result = expand$1(value, context);\n        }\n\n        if (is_invalid_number(result)) {\n          if (/^\\-\\D/.test(value)) {\n            result = expand$1('-1' + value.substr(1), context);\n          }\n        }\n\n        if (result === undefined) {\n          result = 0;\n        }\n\n        if (typeof result !== 'number') {\n          repeat.push(result);\n\n          if (is_cycle(repeat)) {\n            result = 0;\n            repeat = [];\n          } else {\n            result = calc(infix_to_postfix(result), context, repeat);\n          }\n        }\n\n        stack.push(result);\n      } else if (type === 'function') {\n        var negative = false;\n\n        if (/^\\-/.test(name)) {\n          negative = true;\n          name = name.substr(1);\n        }\n\n        var output = value.map(function (v) {\n          return calc(v, context);\n        });\n        var fns = name.split('.');\n        var fname = void 0;\n\n        while (fname = fns.pop()) {\n          if (!fname) continue;\n          var fn = context[fname] || Math[fname];\n          output = typeof fn === 'function' ? Array.isArray(output) ? fn.apply(void 0, _toConsumableArray(output)) : fn(output) : 0;\n        }\n\n        if (negative) {\n          output = -1 * output;\n        }\n\n        stack.push(output);\n      } else {\n        if (/\\d+/.test(value)) stack.push(value);else {\n          var right = stack.pop();\n          var left = stack.pop();\n          stack.push(compute(value, Number(left), Number(right)));\n        }\n      }\n    }\n\n    return Number(stack[0]) || 0;\n  }\n\n  function get_tokens$1(input) {\n    var expr = String(input);\n    var tokens = [],\n        num = '';\n\n    for (var i = 0; i < expr.length; ++i) {\n      var c = expr[i];\n\n      if (operator[c]) {\n        var last_token = last(tokens);\n\n        if (c == '=' && last_token && /^[!<>=]$/.test(last_token.value)) {\n          last_token.value += c;\n        } else if (/^[|&<>]$/.test(c) && last_token && last_token.value == c) {\n          last_token.value += c;\n        } else if (c == '-' && expr[i - 1] == 'e') {\n          num += c;\n        } else if (!tokens.length && !num.length && /[+-]/.test(c)) {\n          num += c;\n        } else {\n          var _ref5 = last_token || {},\n              type = _ref5.type,\n              value = _ref5.value;\n\n          if (type == 'operator' && !num.length && /[^()]/.test(c) && /[^()]/.test(value)) {\n            num += c;\n          } else {\n            if (num.length) {\n              tokens.push({\n                type: 'number',\n                value: num\n              });\n              num = '';\n            }\n\n            tokens.push({\n              type: 'operator',\n              value: c\n            });\n          }\n        }\n      } else if (/\\S/.test(c)) {\n        if (c == ',') {\n          tokens.push({\n            type: 'number',\n            value: num\n          });\n          num = '';\n          tokens.push({\n            type: 'comma',\n            value: c\n          });\n        } else if (c == '!') {\n          tokens.push({\n            type: 'number',\n            value: num\n          });\n          tokens.push({\n            type: 'operator',\n            value: c\n          });\n          num = '';\n        } else {\n          num += c;\n        }\n      }\n    }\n\n    if (num.length) {\n      tokens.push({\n        type: 'number',\n        value: num\n      });\n    }\n\n    return tokens;\n  }\n\n  function infix_to_postfix(input) {\n    var tokens = get_tokens$1(input);\n    var op_stack = [],\n        expr = [];\n\n    for (var i = 0; i < tokens.length; ++i) {\n      var _tokens$i = tokens[i],\n          type = _tokens$i.type,\n          value = _tokens$i.value;\n      var next = tokens[i + 1] || {};\n\n      if (type == 'number') {\n        if (next.value == '(' && /[^\\d.\\-]/.test(value)) {\n          var func_body = '';\n          var stack = [];\n          var values = [];\n          i += 1;\n\n          while (tokens[i++] !== undefined) {\n            var token = tokens[i];\n            if (token === undefined) break;\n            var c = token.value;\n\n            if (c == ')') {\n              if (!stack.length) break;\n              stack.pop();\n              func_body += c;\n            } else {\n              if (c == '(') stack.push(c);\n\n              if (c == ',' && !stack.length) {\n                var arg = infix_to_postfix(func_body);\n                if (arg.length) values.push(arg);\n                func_body = '';\n              } else {\n                func_body += c;\n              }\n            }\n          }\n\n          if (func_body.length) {\n            values.push(infix_to_postfix(func_body));\n          }\n\n          expr.push({\n            type: 'function',\n            name: value,\n            value: values\n          });\n        } else if (/[^\\d.\\-]/.test(value)) {\n          expr.push({\n            type: 'variable',\n            value: value\n          });\n        } else {\n          expr.push({\n            type: 'number',\n            value: value\n          });\n        }\n      } else if (type == 'operator') {\n        if (value == '(') {\n          op_stack.push(value);\n        } else if (value == ')') {\n          while (op_stack.length && last(op_stack) != '(') {\n            expr.push({\n              type: 'operator',\n              value: op_stack.pop()\n            });\n          }\n\n          op_stack.pop();\n        } else {\n          while (op_stack.length && operator[last(op_stack)] >= operator[value]) {\n            var op = op_stack.pop();\n            if (!/[()]/.test(op)) expr.push({\n              type: 'operator',\n              value: op\n            });\n          }\n\n          op_stack.push(value);\n        }\n      }\n    }\n\n    while (op_stack.length) {\n      expr.push({\n        type: 'operator',\n        value: op_stack.pop()\n      });\n    }\n\n    return expr;\n  }\n\n  function compute(op, a, b) {\n    switch (op) {\n      case '+':\n        return a + b;\n\n      case '-':\n        return a - b;\n\n      case '*':\n        return a * b;\n\n      case '%':\n        return a % b;\n\n      case '|':\n        return a | b;\n\n      case '&':\n        return a & b;\n\n      case '<':\n        return a < b;\n\n      case '>':\n        return a > b;\n\n      case '^':\n        return Math.pow(a, b);\n\n      case 'Ã·':\n      case '/':\n        return a / b;\n\n      case '=':\n      case '==':\n        return a == b;\n\n      case 'â¤':\n      case '<=':\n        return a <= b;\n\n      case 'â¥':\n      case '>=':\n        return a >= b;\n\n      case 'â ':\n      case '!=':\n        return a != b;\n\n      case 'â§':\n      case '&&':\n        return a && b;\n\n      case 'â¨':\n      case '||':\n        return a || b;\n\n      case '<<':\n        return a << b;\n\n      case '>>':\n        return a >> b;\n    }\n  }\n\n  function expand$1(value, context) {\n    var _ref6 = value.match(/([\\d.\\-]+)(.*)/) || [],\n        _ref7 = _slicedToArray(_ref6, 3),\n        _ = _ref7[0],\n        num = _ref7[1],\n        variable = _ref7[2];\n\n    var v = context[variable];\n\n    if (v === undefined) {\n      return v;\n    }\n\n    if (typeof v === 'number') {\n      return Number(num) * v;\n    } else {\n      return num * calc(infix_to_postfix(v), context);\n    }\n  }\n\n  function is_cycle(array) {\n    return array[0] == array[2] && array[1] == array[3];\n  }\n\n  function calc$1(input, context) {\n    var expr = infix_to_postfix(input);\n    return calc(expr, Object.assign({}, default_context, context));\n  }\n\n  var CacheValue = /*#__PURE__*/function () {\n    function CacheValue() {\n      _classCallCheck(this, CacheValue);\n\n      this.cache = {};\n    }\n\n    _createClass(CacheValue, [{\n      key: \"clear\",\n      value: function clear() {\n        this.cache = {};\n      }\n    }, {\n      key: \"set\",\n      value: function set(input, value) {\n        if (is_nil(input)) {\n          return '';\n        }\n\n        var key = this.getKey(input);\n        return this.cache[key] = value;\n      }\n    }, {\n      key: \"get\",\n      value: function get(input) {\n        var key = this.getKey(input);\n        return this.cache[key];\n      }\n    }, {\n      key: \"getKey\",\n      value: function getKey(input) {\n        return typeof input === 'string' ? hash(input) : hash(JSON.stringify(input));\n      }\n    }]);\n\n    return CacheValue;\n  }();\n\n  var Cache = new CacheValue();\n\n  function memo(prefix, fn) {\n    return function () {\n      for (var _len5 = arguments.length, args = new Array(_len5), _key5 = 0; _key5 < _len5; _key5++) {\n        args[_key5] = arguments[_key5];\n      }\n\n      var key = prefix + args.join('-');\n      return Cache.get(key) || Cache.set(key, fn.apply(void 0, args));\n    };\n  }\n\n  function Type(type, value) {\n    return {\n      type: type,\n      value: value\n    };\n  }\n\n  function get_tokens(input) {\n    var expr = String(input);\n    var tokens = [],\n        stack = [];\n\n    if (!expr.startsWith('[') || !expr.endsWith(']')) {\n      return tokens;\n    }\n\n    for (var i = 1; i < expr.length - 1; ++i) {\n      var c = expr[i];\n\n      if (c == '-' && expr[i - 1] == '-') {\n        continue;\n      }\n\n      if (c == '-') {\n        stack.push(c);\n        continue;\n      }\n\n      if (last(stack) == '-') {\n        stack.pop();\n        var from = stack.pop();\n        tokens.push(from ? Type('range', [from, c]) : Type('char', c));\n        continue;\n      }\n\n      if (stack.length) {\n        tokens.push(Type('char', stack.pop()));\n      }\n\n      stack.push(c);\n    }\n\n    if (stack.length) {\n      tokens.push(Type('char', stack.pop()));\n    }\n\n    return tokens;\n  }\n\n  var build_range = memo('build_range', function (input) {\n    var tokens = get_tokens(input);\n    return flat_map(tokens, function (_ref8) {\n      var type = _ref8.type,\n          value = _ref8.value;\n      if (type == 'char') return value;\n\n      var _value = _slicedToArray(value, 2),\n          from = _value[0],\n          to = _value[1];\n\n      var reverse = false;\n\n      if (from > to) {\n        var _ref9 = [to, from];\n        from = _ref9[0];\n        to = _ref9[1];\n        reverse = true;\n      }\n\n      var result = by_charcode(range)(from, to);\n      if (reverse) result.reverse();\n      return result;\n    });\n  });\n\n  function expand(fn) {\n    return function () {\n      for (var _len6 = arguments.length, args = new Array(_len6), _key6 = 0; _key6 < _len6; _key6++) {\n        args[_key6] = arguments[_key6];\n      }\n\n      return fn.apply(void 0, _toConsumableArray(flat_map(args, function (n) {\n        return String(n).startsWith('[') ? build_range(n) : n;\n      })));\n    };\n  }\n\n  var Node = function Node(data) {\n    _classCallCheck(this, Node);\n\n    this.prev = this.next = null;\n    this.data = data;\n  };\n\n  var Stack = /*#__PURE__*/function () {\n    function Stack() {\n      var limit = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 20;\n\n      _classCallCheck(this, Stack);\n\n      this._limit = limit;\n      this._size = 0;\n    }\n\n    _createClass(Stack, [{\n      key: \"push\",\n      value: function push(data) {\n        if (this._size >= this._limit) {\n          this.root = this.root.next;\n          this.root.prev = null;\n        }\n\n        var node = new Node(data);\n\n        if (!this.root) {\n          this.root = this.tail = node;\n        } else {\n          node.prev = this.tail;\n          this.tail.next = node;\n          this.tail = node;\n        }\n\n        this._size++;\n      }\n    }, {\n      key: \"last\",\n      value: function last() {\n        var n = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 1;\n        var node = this.tail;\n\n        while (--n) {\n          if (!node.prev) break;\n          node = node.prev;\n        }\n\n        return node.data;\n      }\n    }]);\n\n    return Stack;\n  }();\n  /**\n   * Improved noise by Ken Perlin\n   * Translated from: https://mrl.nyu.edu/~perlin/noise/\n   */\n\n\n  var Perlin = /*#__PURE__*/function () {\n    function Perlin(shuffle) {\n      _classCallCheck(this, Perlin);\n\n      this.p = duplicate(shuffle([151, 160, 137, 91, 90, 15, 131, 13, 201, 95, 96, 53, 194, 233, 7, 225, 140, 36, 103, 30, 69, 142, 8, 99, 37, 240, 21, 10, 23, 190, 6, 148, 247, 120, 234, 75, 0, 26, 197, 62, 94, 252, 219, 203, 117, 35, 11, 32, 57, 177, 33, 88, 237, 149, 56, 87, 174, 20, 125, 136, 171, 168, 68, 175, 74, 165, 71, 134, 139, 48, 27, 166, 77, 146, 158, 231, 83, 111, 229, 122, 60, 211, 133, 230, 220, 105, 92, 41, 55, 46, 245, 40, 244, 102, 143, 54, 65, 25, 63, 161, 1, 216, 80, 73, 209, 76, 132, 187, 208, 89, 18, 169, 200, 196, 135, 130, 116, 188, 159, 86, 164, 100, 109, 198, 173, 186, 3, 64, 52, 217, 226, 250, 124, 123, 5, 202, 38, 147, 118, 126, 255, 82, 85, 212, 207, 206, 59, 227, 47, 16, 58, 17, 182, 189, 28, 42, 223, 183, 170, 213, 119, 248, 152, 2, 44, 154, 163, 70, 221, 153, 101, 155, 167, 43, 172, 9, 129, 22, 39, 253, 19, 98, 108, 110, 79, 113, 224, 232, 178, 185, 112, 104, 218, 246, 97, 228, 251, 34, 242, 193, 238, 210, 144, 12, 191, 179, 162, 241, 81, 51, 145, 235, 249, 14, 239, 107, 49, 192, 214, 31, 181, 199, 106, 157, 184, 84, 204, 176, 115, 121, 50, 45, 127, 4, 150, 254, 138, 236, 205, 93, 222, 114, 67, 29, 24, 72, 243, 141, 128, 195, 78, 66, 215, 61, 156, 180]));\n    } // Convert LO 4 bits of hash code into 12 gradient directions.\n\n\n    _createClass(Perlin, [{\n      key: \"grad\",\n      value: function grad(hash, x, y, z) {\n        var h = hash & 15,\n            u = h < 8 ? x : y,\n            v = h < 4 ? y : h == 12 || h == 14 ? x : z;\n        return ((h & 1) == 0 ? u : -u) + ((h & 2) == 0 ? v : -v);\n      }\n    }, {\n      key: \"noise\",\n      value: function noise(x, y, z) {\n        var p = this.p,\n            grad = this.grad; // Find unit cube that contains point.\n\n        var _map = [x, y, z].map(function (n) {\n          return Math.floor(n) & 255;\n        }),\n            _map2 = _slicedToArray(_map, 3),\n            X = _map2[0],\n            Y = _map2[1],\n            Z = _map2[2]; // Find relative x, y, z of point in cube.\n\n\n        var _map3 = [x, y, z].map(function (n) {\n          return n - Math.floor(n);\n        });\n\n        var _map4 = _slicedToArray(_map3, 3);\n\n        x = _map4[0];\n        y = _map4[1];\n        z = _map4[2];\n\n        // Compute fade curves for each of x, y, z.\n        var _map5 = [x, y, z].map(function (n) {\n          return n * n * n * (n * (n * 6 - 15) + 10);\n        }),\n            _map6 = _slicedToArray(_map5, 3),\n            u = _map6[0],\n            v = _map6[1],\n            w = _map6[2]; // hash coordinates of the 8 cube corners.\n\n\n        var A = p[X] + Y,\n            AA = p[A] + Z,\n            AB = p[A + 1] + Z,\n            B = p[X + 1] + Y,\n            BA = p[B] + Z,\n            BB = p[B + 1] + Z; // And add blended results from 8 corners of cube.\n\n        return lerp(w, lerp(v, lerp(u, grad(p[AA], x, y, z), grad(p[BA], x - 1, y, z)), lerp(u, grad(p[AB], x, y - 1, z), grad(p[BB], x - 1, y - 1, z))), lerp(v, lerp(u, grad(p[AA + 1], x, y, z - 1), grad(p[BA + 1], x - 1, y, z - 1)), lerp(u, grad(p[AB + 1], x, y - 1, z - 1), grad(p[BB + 1], x - 1, y - 1, z - 1))));\n      }\n    }]);\n\n    return Perlin;\n  }();\n\n  function parse$5(input) {\n    var iter = iterator$1(scan(input));\n    var commands = {};\n    var tokens = [];\n    var name;\n    var negative = false;\n\n    while (iter.next()) {\n      var _iter$get12 = iter.get(),\n          prev = _iter$get12.prev,\n          curr = _iter$get12.curr,\n          next = _iter$get12.next;\n\n      if (curr.isSymbol(':') && !name) {\n        name = joinTokens$1(tokens);\n        tokens = [];\n      } else if (curr.isSymbol(';') && name) {\n        commands[name] = transformNegative(name, joinTokens$1(tokens), negative);\n        tokens = [];\n        name = null;\n        negative = false;\n      } else if (!curr.isSymbol(';')) {\n        var prevMinus = prev && prev.isSymbol('-');\n        var nextMinus = next && next.isSymbol('-');\n        var currMinus = curr.isSymbol('-');\n\n        if (!name && !tokens.length && currMinus && !prevMinus && !nextMinus) {\n          if (next && next.isSymbol(':')) {\n            tokens.push(curr);\n          } else {\n            negative = true;\n          }\n        } else {\n          tokens.push(curr);\n        }\n      }\n    }\n\n    if (tokens.length && name) {\n      commands[name] = transformNegative(name, joinTokens$1(tokens), negative);\n    }\n\n    return commands;\n  }\n\n  function transformNegative(name, value, negative) {\n    var excludes = ['fill-rule', 'fill'];\n\n    if (excludes.includes(name)) {\n      return value;\n    }\n\n    return negative ? \"-1 * (\".concat(value, \")\") : value;\n  }\n\n  function joinTokens$1(tokens) {\n    return tokens.map(function (n) {\n      return n.value;\n    }).join('');\n  }\n\n  function parse$4(input, noSpace) {\n    var group = [];\n    var tokens = [];\n    var parenStack = [];\n    var quoteStack = [];\n\n    if (is_empty(input)) {\n      return group;\n    }\n\n    var iter = iterator$1(scan(input));\n\n    function isSeperator(token) {\n      if (noSpace) {\n        return token.isSymbol(',');\n      }\n\n      return token.isSymbol(',') || token.isSpace();\n    }\n\n    while (iter.next()) {\n      var _iter$get13 = iter.get(),\n          prev = _iter$get13.prev,\n          curr = _iter$get13.curr,\n          next = _iter$get13.next;\n\n      if (curr.isSymbol('(')) {\n        parenStack.push(curr.value);\n      }\n\n      if (curr.isSymbol(')')) {\n        parenStack.pop();\n      }\n\n      if (curr.status === 'open') {\n        quoteStack.push(curr.value);\n      }\n\n      if (curr.status === 'close') {\n        quoteStack.pop();\n      }\n\n      if (isSeperator(curr) && !parenStack.length && !quoteStack.length) {\n        group.push(joinTokens(tokens));\n        tokens = [];\n      } else {\n        tokens.push(curr);\n      }\n    }\n\n    if (tokens.length) {\n      group.push(joinTokens(tokens));\n    }\n\n    return group;\n  }\n\n  function joinTokens(tokens) {\n    return tokens.map(function (n) {\n      return n.value;\n    }).join('');\n  }\n\n  var keywords = ['auto', 'reverse'];\n  var units = ['deg', 'rad', 'grad', 'turn'];\n\n  function parse$3(input) {\n    var iter = iterator$1(scan(input));\n    var matched = false;\n    var unit = '';\n    var ret = {\n      direction: '',\n      angle: ''\n    };\n\n    while (iter.next()) {\n      var _iter$get14 = iter.get(),\n          prev = _iter$get14.prev,\n          curr = _iter$get14.curr,\n          next = _iter$get14.next;\n\n      if (curr.isWord() && keywords.includes(curr.value)) {\n        ret.direction = curr.value;\n        matched = true;\n      } else if (curr.isNumber()) {\n        ret.angle = Number(curr.value);\n        matched = true;\n      } else if (curr.isWord() && prev && prev.isNumber() && units.includes(curr.value)) {\n        unit = curr.value;\n      } else if (curr.isSpace() && ret.direction !== '' && ret.angle !== '') {\n        break;\n      }\n    }\n\n    if (!matched) {\n      ret.direction = 'auto';\n    }\n\n    return normalizeAngle(ret, unit);\n  }\n\n  function normalizeAngle(input, unit) {\n    var angle = input.angle;\n\n    if (angle === '') {\n      angle = 0;\n    }\n\n    if (unit === 'rad') {\n      angle /= Math.PI / 180;\n    }\n\n    if (unit === 'grad') {\n      angle *= .9;\n    }\n\n    if (unit === 'turn') {\n      angle *= 360;\n    }\n\n    return Object.assign({}, input, {\n      angle: angle\n    });\n  }\n\n  var cos = Math.cos,\n      sin = Math.sin,\n      abs = Math.abs,\n      atan2 = Math.atan2,\n      PI = Math.PI;\n\n  var _ = make_tag_function(function (c) {\n    return create_shape_points(parse$5(c), {\n      min: 3,\n      max: 3600\n    });\n  });\n\n  var shapes = {\n    circle: function circle() {\n      return _(_templateObject || (_templateObject = _taggedTemplateLiteral([\"\\n    split: 180;\\n    scale: .99\\n  \"])));\n    },\n    triangle: function triangle() {\n      return _(_templateObject2 || (_templateObject2 = _taggedTemplateLiteral([\"\\n    rotate: 30;\\n    scale: 1.1;\\n    move: 0 .2\\n  \"])));\n    },\n    pentagon: function pentagon() {\n      return _(_templateObject3 || (_templateObject3 = _taggedTemplateLiteral([\"\\n    split: 5;\\n    rotate: 54\\n  \"])));\n    },\n    hexagon: function hexagon() {\n      return _(_templateObject4 || (_templateObject4 = _taggedTemplateLiteral([\"\\n    split: 6;\\n    rotate: 30;\\n    scale: .98\\n  \"])));\n    },\n    octagon: function octagon() {\n      return _(_templateObject5 || (_templateObject5 = _taggedTemplateLiteral([\"\\n    split: 8;\\n    rotat: 22.5;\\n    scale: .99\\n  \"])));\n    },\n    star: function star() {\n      return _(_templateObject6 || (_templateObject6 = _taggedTemplateLiteral([\"\\n    split: 10;\\n    r: cos(5t);\\n    rotate: -18;\\n    scale: .99\\n  \"])));\n    },\n    infinity: function infinity() {\n      return _(_templateObject7 || (_templateObject7 = _taggedTemplateLiteral([\"\\n    split: 180;\\n    scale: .99;\\n    x: cos(t)*.99 / (sin(t)^2 + 1);\\n    y: x * sin(t)\\n  \"])));\n    },\n    heart: function heart() {\n      return _(_templateObject8 || (_templateObject8 = _taggedTemplateLiteral([\"\\n    split: 180;\\n    rotate: 180;\\n    a: cos(t)*13/18 - cos(2t)*5/18;\\n    b: cos(3t)/18 + cos(4t)/18;\\n    x: (.75 * sin(t)^3) * 1.2;\\n    y: (a - b + .2) * -1.1\\n  \"])));\n    },\n    bean: function bean() {\n      return _(_templateObject9 || (_templateObject9 = _taggedTemplateLiteral([\"\\n    split: 180;\\n    r: sin(t)^3 + cos(t)^3;\\n    move: -.35 .35;\\n  \"])));\n    },\n    bicorn: function bicorn() {\n      return _(_templateObject10 || (_templateObject10 = _taggedTemplateLiteral([\"\\n    split: 180;\\n    x: cos(t);\\n    y: sin(t)^2 / (2 + sin(t)) - .5\\n  \"])));\n    },\n    drop: function drop() {\n      return _(_templateObject11 || (_templateObject11 = _taggedTemplateLiteral([\"\\n    split: 180;\\n    rotate: 90;\\n    scale: .95;\\n    x: sin(t);\\n    y: (1 + sin(t)) * cos(t) / 1.6\\n  \"])));\n    },\n    fish: function fish() {\n      return _(_templateObject12 || (_templateObject12 = _taggedTemplateLiteral([\"\\n    split: 240;\\n    x: cos(t) - sin(t)^2 / sqrt(2) - .04;\\n    y: sin(2t)/2\\n  \"])));\n    },\n    whale: function whale() {\n      return _(_templateObject13 || (_templateObject13 = _taggedTemplateLiteral([\"\\n    split: 240;\\n    rotate: 180;\\n    R: 3.4 * (sin(t)^2 - .5) * cos(t);\\n    x: cos(t) * R + .75;\\n    y: sin(t) * R * 1.2\\n  \"])));\n    },\n    windmill: function windmill() {\n      return _(_templateObject14 || (_templateObject14 = _taggedTemplateLiteral([\"\\n    split: 18;\\n    R: seq(.618, 1, 0);\\n    T: seq(t-.55, t, t);\\n    x: R * cos(T);\\n    y: R * sin(T)\\n  \"])));\n    },\n    vase: function vase() {\n      return _(_templateObject15 || (_templateObject15 = _taggedTemplateLiteral([\"\\n    split: 240;\\n    scale: .3;\\n    x: sin(4t) + sin(t) * 1.4;\\n    y: cos(t) + cos(t) * 4.8 + .3\\n  \"])));\n    },\n    clover: function clover() {\n      var k = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 3;\n      k = clamp(k, 3, 5);\n      if (k == 4) k = 2;\n      return _(_templateObject16 || (_templateObject16 = _taggedTemplateLiteral([\"\\n      split: 240;\\n      r: cos(\", \"t);\\n      scale: .98\\n    \"])), k);\n    },\n    hypocycloid: function hypocycloid() {\n      var k = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 3;\n      k = clamp(k, 3, 5);\n      var scale = [0, 0, 0, .34, .25, .19][k];\n      return _(_templateObject17 || (_templateObject17 = _taggedTemplateLiteral([\"\\n      split: 240;\\n      scale: \", \";\\n      k: \", \";\\n      x: (k-1)*cos(t) + cos((k-1)*t);\\n      y: (k-1)*sin(t) - sin((k-1)*t)\\n    \"])), scale, k);\n    },\n    bud: function bud() {\n      var k = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 3;\n      k = clamp(k, 3, 10);\n      return _(_templateObject18 || (_templateObject18 = _taggedTemplateLiteral([\"\\n      split: 240;\\n      scale: .8;\\n      r: 1 + .2 * cos(\", \"t)\\n    \"])), k);\n    }\n  };\n\n  var Point = /*#__PURE__*/function () {\n    function Point(x, y, angle) {\n      _classCallCheck(this, Point);\n\n      this.x = x;\n      this.y = y;\n      this.extra = angle;\n    }\n\n    _createClass(Point, [{\n      key: \"valueOf\",\n      value: function valueOf() {\n        return this.x + ' ' + this.y;\n      }\n    }, {\n      key: \"toString\",\n      value: function toString() {\n        return this.valueOf();\n      }\n    }]);\n\n    return Point;\n  }();\n\n  function create_polygon_points(option, fn) {\n    if (typeof arguments[0] == 'function') {\n      fn = option;\n      option = {};\n    }\n\n    if (!fn) {\n      fn = function fn(t) {\n        return [cos(t), sin(t)];\n      };\n    }\n\n    var split = option.split || 180;\n    var turn = option.turn || 1;\n    var frame = option.frame;\n    var fill = option['fill'] || option['fill-rule'];\n    var direction = parse$3(option['direction'] || option['dir'] || '');\n    var unit = option.unit;\n    var rad = PI * 2 * turn / split;\n    var points = [];\n    var first_point, first_point2;\n    var factor = option.scale === undefined ? 1 : option.scale;\n\n    var add = function add(_ref10) {\n      var _ref11 = _slicedToArray(_ref10, 4),\n          x1 = _ref11[0],\n          y1 = _ref11[1],\n          _ref11$ = _ref11[2],\n          dx = _ref11$ === void 0 ? 0 : _ref11$,\n          _ref11$2 = _ref11[3],\n          dy = _ref11$2 === void 0 ? 0 : _ref11$2;\n\n      if (x1 == 'evenodd' || x1 == 'nonzero') {\n        return points.push(new Point(x1, '', ''));\n      }\n\n      var _scale = scale(x1, -y1, factor),\n          _scale2 = _slicedToArray(_scale, 2),\n          x = _scale2[0],\n          y = _scale2[1];\n\n      var _scale3 = scale(dx, -dy, factor),\n          _scale4 = _slicedToArray(_scale3, 2),\n          dx1 = _scale4[0],\n          dy2 = _scale4[1];\n\n      var angle = calc_angle(x, y, dx1, dy2, direction);\n\n      if (unit !== undefined && unit !== '%') {\n        if (unit !== 'none') {\n          x += unit;\n          y += unit;\n        }\n      } else {\n        x = (x + 1) * 50 + '%';\n        y = (y + 1) * 50 + '%';\n      }\n\n      points.push(new Point(x, y, angle));\n    };\n\n    if (fill == 'nonzero' || fill == 'evenodd') {\n      add([fill, '', '']);\n    }\n\n    for (var i = 0; i < split; ++i) {\n      var t = rad * i;\n      var point = fn(t, i);\n      if (!i) first_point = point;\n      add(point);\n    }\n\n    if (frame !== undefined) {\n      add(first_point);\n      var w = frame / 100;\n      if (turn > 1) w *= 2;\n      if (w == 0) w = .002;\n\n      for (var _i4 = 0; _i4 < split; ++_i4) {\n        var _t = -rad * _i4;\n\n        var _fn2 = fn(_t, _i4),\n            _fn3 = _slicedToArray(_fn2, 4),\n            x = _fn3[0],\n            y = _fn3[1],\n            _fn3$ = _fn3[2],\n            dx = _fn3$ === void 0 ? 0 : _fn3$,\n            _fn3$2 = _fn3[3],\n            dy = _fn3$2 === void 0 ? 0 : _fn3$2;\n\n        var theta = atan2(y + dy, x - dx);\n        var _point = [x - w * cos(theta), y - w * sin(theta)];\n        if (!_i4) first_point2 = _point;\n        add(_point);\n      }\n\n      add(first_point2);\n      add(first_point);\n    }\n\n    return points;\n  }\n\n  function calc_angle(x, y, dx, dy, option) {\n    var base = atan2(y + dy, x - dx) * 180 / PI;\n\n    if (option.direction === 'reverse') {\n      base -= 180;\n    }\n\n    if (!option.direction) {\n      base = 90;\n    }\n\n    if (option.angle) {\n      base += option.angle;\n    }\n\n    return base;\n  }\n\n  function rotate(x, y, deg) {\n    var rad = -PI / 180 * deg;\n    return [x * cos(rad) - y * sin(rad), y * cos(rad) + x * sin(rad)];\n  }\n\n  function translate(x, y, offset) {\n    var _parse$4$map = parse$4(offset).map(Number),\n        _parse$4$map2 = _slicedToArray(_parse$4$map, 2),\n        dx = _parse$4$map2[0],\n        _parse$4$map2$ = _parse$4$map2[1],\n        dy = _parse$4$map2$ === void 0 ? dx : _parse$4$map2$;\n\n    return [x + (dx || 0), y - (dy || 0), dx, dy];\n  }\n\n  function scale(x, y, factor) {\n    var _parse$4$map3 = parse$4(factor).map(Number),\n        _parse$4$map4 = _slicedToArray(_parse$4$map3, 2),\n        fx = _parse$4$map4[0],\n        _parse$4$map4$ = _parse$4$map4[1],\n        fy = _parse$4$map4$ === void 0 ? fx : _parse$4$map4$;\n\n    return [x * fx, y * fy];\n  }\n\n  function create_shape_points(props, _ref12) {\n    var min = _ref12.min,\n        max = _ref12.max;\n    var split = clamp(parseInt(props.vertices || props.points || props.split) || 0, min, max);\n    var px = is_empty(props.x) ? 'cos(t)' : props.x;\n    var py = is_empty(props.y) ? 'sin(t)' : props.y;\n    var pr = is_empty(props.r) ? '' : props.r;\n\n    var _parse$2 = parse$6(pr),\n        unit = _parse$2.unit,\n        value = _parse$2.value;\n\n    if (unit && !props[unit] && unit !== 't') {\n      if (is_empty(props.unit)) {\n        props.unit = unit;\n      }\n\n      pr = props.r = value;\n    }\n\n    if (props.degree) {\n      props.rotate = props.degree;\n    }\n\n    if (props.origin) {\n      props.move = props.origin;\n    }\n\n    var option = Object.assign({}, props, {\n      split: split\n    });\n    return create_polygon_points(option, function (t, i) {\n      var context = Object.assign({}, props, {\n        't': t,\n        'Î¸': t,\n        'i': i + 1,\n        seq: function seq() {\n          var _ref13;\n\n          if (!arguments.length) return '';\n          return _ref13 = i % arguments.length, _ref13 < 0 || arguments.length <= _ref13 ? undefined : arguments[_ref13];\n        },\n        range: function range(a) {\n          var b = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n          a = Number(a) || 0;\n          b = Number(b) || 0;\n\n          if (a > b) {\n            var _ref14 = [b, a];\n            a = _ref14[0];\n            b = _ref14[1];\n          }\n\n          var step = abs(b - a) / (split - 1);\n          return a + step * i;\n        }\n      });\n      var x = calc$1(px, context);\n      var y = calc$1(py, context);\n      var dx = 0;\n      var dy = 0;\n\n      if (pr) {\n        var r = calc$1(pr, context);\n\n        if (r == 0) {\n          r = .00001;\n        }\n\n        x = r * cos(t);\n        y = r * sin(t);\n      }\n\n      if (props.rotate) {\n        var _rotate = rotate(x, y, Number(props.rotate) || 0);\n\n        var _rotate2 = _slicedToArray(_rotate, 2);\n\n        x = _rotate2[0];\n        y = _rotate2[1];\n      }\n\n      if (props.move) {\n        var _translate = translate(x, y, props.move);\n\n        var _translate2 = _slicedToArray(_translate, 4);\n\n        x = _translate2[0];\n        y = _translate2[1];\n        dx = _translate2[2];\n        dy = _translate2[3];\n      }\n\n      return [x, y, dx, dy];\n    });\n  }\n\n  function readStatement$1(iter, token) {\n    var fragment = [];\n    var inlineBlock;\n    var stack = [];\n\n    while (iter.next()) {\n      var _iter$get15 = iter.get(),\n          curr = _iter$get15.curr,\n          next = _iter$get15.next;\n\n      var isStatementBreak = !stack.length && (!next || curr.isSymbol(';') || next.isSymbol('}'));\n\n      if (curr.isSymbol(\"'\", '\"')) {\n        if (curr.status === 'open') {\n          stack.push(curr);\n        } else {\n          stack.pop();\n        }\n      }\n\n      if (!stack.length && curr.isSymbol('{')) {\n        var selectors = getGroups(fragment, function (token) {\n          return token.isSpace();\n        });\n\n        if (!selectors.length) {\n          continue;\n        }\n\n        var tokenName = selectors.pop();\n\n        var _skip = isSkip.apply(void 0, _toConsumableArray(selectors).concat([tokenName]));\n\n        inlineBlock = resolveId(walk$1(iter, {\n          type: 'block',\n          name: tokenName,\n          inline: true,\n          value: []\n        }), _skip);\n\n        while (tokenName = selectors.pop()) {\n          inlineBlock = resolveId({\n            type: 'block',\n            name: tokenName,\n            value: [inlineBlock]\n          }, _skip);\n        }\n\n        break;\n      } // skip quotes\n\n\n      var skip = curr.status == 'open' && stack.length == 1 || curr.status == 'close' && !stack.length;\n\n      if (!skip) {\n        fragment.push(curr);\n      }\n\n      if (isStatementBreak) {\n        break;\n      }\n    }\n\n    if (fragment.length && !inlineBlock) {\n      token.value = joinToken$1(fragment);\n    } else if (inlineBlock) {\n      token.value = inlineBlock;\n    }\n\n    return token;\n  }\n\n  function walk$1(iter, parentToken) {\n    var rules = [];\n    var fragment = [];\n    var tokenType = parentToken && parentToken.type || '';\n    var stack = [];\n\n    while (iter.next()) {\n      var _iter$get16 = iter.get(),\n          prev = _iter$get16.prev,\n          curr = _iter$get16.curr,\n          next = _iter$get16.next;\n\n      var isBlockBreak = !next || curr.isSymbol('}');\n\n      if (curr.isSymbol('(')) {\n        stack.push(curr.value);\n      }\n\n      if (curr.isSymbol(')')) {\n        stack.pop();\n      }\n\n      if (isBlock(tokenType) && isBlockBreak) {\n        if (!next && rules.length && !curr.isSymbol('}')) {\n          var _last = rules[rules.length - 1].value;\n\n          if (typeof _last === 'string') {\n            rules[rules.length - 1].value += ';' + curr.value;\n          }\n        }\n\n        parentToken.value = rules;\n        break;\n      } else if (curr.isSymbol('{')) {\n        var selectors = getGroups(fragment, function (token) {\n          return token.isSpace();\n        });\n\n        if (!selectors.length) {\n          continue;\n        }\n\n        if (isSkip(parentToken.name)) {\n          selectors = [joinToken$1(fragment)];\n        }\n\n        var tokenName = selectors.pop();\n        var skip = isSkip.apply(void 0, _toConsumableArray(selectors).concat([parentToken.name, tokenName]));\n        var block = resolveId(walk$1(iter, {\n          type: 'block',\n          name: tokenName,\n          value: []\n        }), skip);\n\n        while (tokenName = selectors.pop()) {\n          block = resolveId({\n            type: 'block',\n            name: tokenName,\n            value: [block]\n          }, skip);\n        }\n\n        rules.push(block);\n        fragment = [];\n      } else if (curr.isSymbol(':') && !stack.length && !isSpecialProperty(prev, next) && fragment.length) {\n        (function () {\n          var props = getGroups(fragment, function (token) {\n            return token.isSymbol(',');\n          });\n          var statement = readStatement$1(iter, {\n            type: 'statement',\n            name: 'unkown',\n            value: ''\n          });\n          var groupdValue = parse$4(statement.value);\n          var expand = props.length > 1 && groupdValue.length === props.length;\n          props.forEach(function (prop, i) {\n            var item = Object.assign({}, statement, {\n              name: prop\n            });\n\n            if (expand) {\n              item.value = groupdValue[i];\n            }\n\n            rules.push(item);\n          });\n\n          if (isBlock(tokenType)) {\n            parentToken.value = rules;\n          }\n\n          fragment = [];\n        })();\n      } else if (curr.isSymbol(';')) {\n        if (rules.length && fragment.length) {\n          rules[rules.length - 1].value += ';' + joinToken$1(fragment);\n          fragment = [];\n        }\n      } else {\n        fragment.push(curr);\n      }\n    }\n\n    if (rules.length && isBlock(tokenType)) {\n      parentToken.value = rules;\n    }\n\n    return tokenType ? parentToken : rules;\n  }\n\n  function isSpecialProperty(prev, next) {\n    var names = ['xlink:actuate', 'xlink:arcrole', 'xlink:href', 'xlink:role', 'xlink:show', 'xlink:title', 'xlink:type', 'xml:base', 'xml:lang', 'xml:space'];\n    var prevValue = prev && prev.value;\n    var nextValue = next && next.value;\n    return names.includes(prevValue + ':' + nextValue);\n  }\n\n  function joinToken$1(tokens) {\n    return tokens.filter(function (token, i) {\n      if (token.isSymbol(';', '}') && i === tokens.length - 1) return false;\n      return true;\n    }).map(function (n) {\n      return n.value;\n    }).join('');\n  }\n\n  function resolveId(block, skip) {\n    var name = block.name || '';\n\n    var _name$split = name.split(/#/),\n        _name$split2 = _toArray(_name$split),\n        tokenName = _name$split2[0],\n        ids = _name$split2.slice(1);\n\n    var id = ids[ids.length - 1];\n\n    if (tokenName && id && !skip) {\n      block.name = tokenName;\n      block.value.push({\n        type: 'statement',\n        name: 'id',\n        value: id\n      });\n    }\n\n    return block;\n  }\n\n  function getGroups(tokens, fn) {\n    var group = [];\n    var temp = [];\n    tokens.forEach(function (token) {\n      if (fn(token)) {\n        group.push(joinToken$1(temp));\n        temp = [];\n      } else {\n        temp.push(token);\n      }\n    });\n\n    if (temp.length) {\n      group.push(joinToken$1(temp));\n    }\n\n    return group;\n  }\n\n  function isSkip() {\n    for (var _len7 = arguments.length, names = new Array(_len7), _key7 = 0; _key7 < _len7; _key7++) {\n      names[_key7] = arguments[_key7];\n    }\n\n    return names.some(function (n) {\n      return n === 'style';\n    });\n  }\n\n  function isBlock(type) {\n    return type === 'block';\n  }\n\n  function skipHeadSVG(block) {\n    var head = block && block.value && block.value[0];\n\n    if (head && head.name === 'svg' && isBlock(head.type)) {\n      return skipHeadSVG(head);\n    } else {\n      return block;\n    }\n  }\n\n  function parse$2(source, root) {\n    var iter = iterator$1(scan(source));\n    var tokens = walk$1(iter, root || {\n      type: 'block',\n      name: 'svg',\n      value: []\n    });\n    return skipHeadSVG(tokens);\n  }\n\n  var commands = 'MmLlHhVvCcSsQqTtAaZz';\n  var relatives = 'mlhvcsqtaz';\n\n  function parse$1(input) {\n    var iter = iterator$1(scan(input));\n    var temp = {};\n    var result = {\n      commands: [],\n      valid: true\n    };\n\n    while (iter.next()) {\n      var _iter$get17 = iter.get(),\n          curr = _iter$get17.curr;\n\n      if (curr.isSpace() || curr.isSymbol(',')) {\n        continue;\n      }\n\n      if (curr.isWord()) {\n        if (temp.name) {\n          result.commands.push(temp);\n          temp = {};\n        }\n\n        temp.name = curr.value;\n        temp.value = [];\n\n        if (!commands.includes(curr.value)) {\n          temp.type = 'unknown';\n          result.valid = false;\n        } else if (relatives.includes(curr.value)) {\n          temp.type = 'relative';\n        } else {\n          temp.type = 'absolute';\n        }\n      } else if (temp.value) {\n        var value = curr.value;\n\n        if (curr.isNumber()) {\n          value = Number(curr.value);\n        }\n\n        temp.value.push(value);\n      } else if (!temp.name) {\n        result.valid = false;\n      }\n    }\n\n    if (temp.name) {\n      result.commands.push(temp);\n    }\n\n    return result;\n  }\n\n  var uniform_time = {\n    'name': 'cssd-uniform-time',\n    'animation-name': 'cssd-uniform-time-animation',\n    'animation-duration': 31536000000,\n\n    /* one year in ms */\n    'animation-iteration-count': 'infinite',\n    'animation-delay': '0s',\n    'animation-direction': 'normal',\n    'animation-fill-mode': 'none',\n    'animation-play-state': 'running',\n    'animation-timing-function': 'linear'\n  };\n  uniform_time['animation'] = \"\\n  \".concat(uniform_time['animation-duration'], \"ms\\n  \").concat(uniform_time['animation-timing-function'], \"\\n  \").concat(uniform_time['animation-delay'], \"\\n  \").concat(uniform_time['animation-iteration-count'], \"\\n  \").concat(uniform_time['animation-name'], \"\\n\");\n  var uniform_mousex = {\n    name: 'cssd-uniform-mousex'\n  };\n  var uniform_mousey = {\n    name: 'cssd-uniform-mousey'\n  };\n  var uniform_width = {\n    name: 'cssd-uniform-width'\n  };\n  var uniform_height = {\n    name: 'cssd-uniform-height'\n  };\n  var Uniforms = /*#__PURE__*/Object.freeze({\n    __proto__: null,\n    uniform_time: uniform_time,\n    uniform_mousex: uniform_mousex,\n    uniform_mousey: uniform_mousey,\n    uniform_width: uniform_width,\n    uniform_height: uniform_height\n  });\n\n  function make_sequence(c) {\n    return lazy(function (n) {\n      for (var _len8 = arguments.length, actions = new Array(_len8 > 1 ? _len8 - 1 : 0), _key8 = 1; _key8 < _len8; _key8++) {\n        actions[_key8 - 1] = arguments[_key8];\n      }\n\n      if (!actions || !n) return '';\n      var count = get_value(n());\n      var evaluated = calc$1(count);\n\n      if (evaluated === 0) {\n        evaluated = count;\n      }\n\n      return sequence(evaluated, function () {\n        for (var _len9 = arguments.length, args = new Array(_len9), _key9 = 0; _key9 < _len9; _key9++) {\n          args[_key9] = arguments[_key9];\n        }\n\n        return actions.map(function (action) {\n          return get_value(action.apply(void 0, args));\n        }).join(',');\n      }).join(c);\n    });\n  }\n\n  function push_stack(context, name, value) {\n    if (!context[name]) context[name] = new Stack();\n    context[name].push(value);\n    return value;\n  }\n\n  function flip_value(num) {\n    return -1 * num;\n  }\n\n  function map2d(value, min, max) {\n    var amp = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 1;\n    var dimention = 2;\n    var v = Math.sqrt(dimention / 4) * amp;\n    var ma = -v,\n        mb = v;\n    return lerp((value - ma) / (mb - ma), min * amp, max * amp);\n  }\n\n  var Expose = add_alias({\n    i: function i(_ref15) {\n      var count = _ref15.count;\n      return function (_) {\n        return count;\n      };\n    },\n    y: function y(_ref16) {\n      var y = _ref16.y;\n      return function (_) {\n        return y;\n      };\n    },\n    x: function x(_ref17) {\n      var x = _ref17.x;\n      return function (_) {\n        return x;\n      };\n    },\n    z: function z(_ref18) {\n      var z = _ref18.z;\n      return function (_) {\n        return z;\n      };\n    },\n    I: function I(_ref19) {\n      var grid = _ref19.grid;\n      return function (_) {\n        return grid.count;\n      };\n    },\n    Y: function Y(_ref20) {\n      var grid = _ref20.grid;\n      return function (_) {\n        return grid.y;\n      };\n    },\n    X: function X(_ref21) {\n      var grid = _ref21.grid;\n      return function (_) {\n        return grid.x;\n      };\n    },\n    Z: function Z(_ref22) {\n      var grid = _ref22.grid;\n      return function (_) {\n        return grid.z;\n      };\n    },\n    id: function id(_ref23) {\n      var x = _ref23.x,\n          y = _ref23.y,\n          z = _ref23.z;\n      return function (_) {\n        return cell_id(x, y, z);\n      };\n    },\n    n: function n(_ref24) {\n      var extra = _ref24.extra;\n      var lastExtra = last(extra);\n      return function (n) {\n        return lastExtra ? lastExtra[0] + (Number(n) || 0) : '@n';\n      };\n    },\n    nx: function nx(_ref25) {\n      var extra = _ref25.extra;\n      var lastExtra = last(extra);\n      return function (n) {\n        return lastExtra ? lastExtra[1] + (Number(n) || 0) : '@nx';\n      };\n    },\n    ny: function ny(_ref26) {\n      var extra = _ref26.extra;\n      var lastExtra = last(extra);\n      return function (n) {\n        return lastExtra ? lastExtra[2] + (Number(n) || 0) : '@ny';\n      };\n    },\n    N: function N(_ref27) {\n      var extra = _ref27.extra;\n      var lastExtra = last(extra);\n      return function (n) {\n        return lastExtra ? lastExtra[3] + (Number(n) || 0) : '@N';\n      };\n    },\n    m: make_sequence(','),\n    M: make_sequence(' '),\n    Âµ: make_sequence(''),\n    p: function p(_ref28) {\n      var context = _ref28.context,\n          pick = _ref28.pick;\n      return expand(function () {\n        for (var _len10 = arguments.length, args = new Array(_len10), _key10 = 0; _key10 < _len10; _key10++) {\n          args[_key10] = arguments[_key10];\n        }\n\n        if (!args.length) {\n          args = context.last_pick_args || [];\n        }\n\n        var picked = pick(args);\n        context.last_pick_args = args;\n        return push_stack(context, 'last_pick', picked);\n      });\n    },\n    P: function P(_ref29) {\n      var context = _ref29.context,\n          pick = _ref29.pick,\n          position = _ref29.position;\n      var counter = 'P-counter' + position;\n      return expand(function () {\n        for (var _len11 = arguments.length, args = new Array(_len11), _key11 = 0; _key11 < _len11; _key11++) {\n          args[_key11] = arguments[_key11];\n        }\n\n        var normal = true;\n\n        if (!args.length) {\n          args = context.last_pick_args || [];\n          normal = false;\n        }\n\n        var stack = context.last_pick;\n        var last = stack ? stack.last(1) : '';\n\n        if (normal) {\n          if (!context[counter]) {\n            context[counter] = {};\n          }\n\n          last = context[counter].last_pick;\n        }\n\n        if (args.length > 1) {\n          var i = args.findIndex(function (n) {\n            return n === last;\n          });\n\n          if (i !== -1) {\n            args.splice(i, 1);\n          }\n        }\n\n        var picked = pick(args);\n        context.last_pick_args = args;\n\n        if (normal) {\n          context[counter].last_pick = picked;\n        }\n\n        return push_stack(context, 'last_pick', picked);\n      });\n    },\n    pn: function pn(_ref30) {\n      var context = _ref30.context,\n          extra = _ref30.extra,\n          position = _ref30.position;\n      var counter = 'pn-counter' + position;\n      var lastExtra = last(extra);\n      return expand(function () {\n        if (!context[counter]) context[counter] = 0;\n        context[counter] += 1;\n        var max = arguments.length;\n\n        var _ref31 = lastExtra || [],\n            _ref32 = _slicedToArray(_ref31, 1),\n            _ref32$ = _ref32[0],\n            idx = _ref32$ === void 0 ? context[counter] : _ref32$;\n\n        var pos = (idx - 1) % max;\n        var value = pos < 0 || arguments.length <= pos ? undefined : arguments[pos];\n        return push_stack(context, 'last_pick', value);\n      });\n    },\n    pd: function pd(_ref33) {\n      var context = _ref33.context,\n          extra = _ref33.extra,\n          position = _ref33.position,\n          shuffle = _ref33.shuffle;\n      var counter = 'pd-counter' + position;\n      var values = 'pd-values' + position;\n      var lastExtra = last(extra);\n      return expand(function () {\n        if (!context[counter]) context[counter] = 0;\n        context[counter] += 1;\n\n        for (var _len12 = arguments.length, args = new Array(_len12), _key12 = 0; _key12 < _len12; _key12++) {\n          args[_key12] = arguments[_key12];\n        }\n\n        if (!context[values]) {\n          context[values] = shuffle(args || []);\n        }\n\n        var max = args.length;\n\n        var _ref34 = lastExtra || [],\n            _ref35 = _slicedToArray(_ref34, 1),\n            _ref35$ = _ref35[0],\n            idx = _ref35$ === void 0 ? context[counter] : _ref35$;\n\n        var pos = (idx - 1) % max;\n        var value = context[values][pos];\n        return push_stack(context, 'last_pick', value);\n      });\n    },\n    lp: function lp(_ref36) {\n      var context = _ref36.context;\n      return function () {\n        var n = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 1;\n        var stack = context.last_pick;\n        return stack ? stack.last(n) : '';\n      };\n    },\n    r: function r(_ref37) {\n      var context = _ref37.context,\n          rand = _ref37.rand;\n      return function () {\n        for (var _len13 = arguments.length, args = new Array(_len13), _key13 = 0; _key13 < _len13; _key13++) {\n          args[_key13] = arguments[_key13];\n        }\n\n        var transform = args.every(is_letter) ? by_charcode : by_unit;\n        var value = transform(rand).apply(void 0, args);\n        return push_stack(context, 'last_rand', value);\n      };\n    },\n    rn: function rn(_ref38) {\n      var x = _ref38.x,\n          y = _ref38.y,\n          context = _ref38.context,\n          position = _ref38.position,\n          grid = _ref38.grid,\n          extra = _ref38.extra,\n          shuffle = _ref38.shuffle;\n      var counter = 'noise-2d' + position;\n\n      var _ref39 = last(extra) || [],\n          _ref40 = _slicedToArray(_ref39, 6),\n          ni = _ref40[0],\n          nx = _ref40[1],\n          ny = _ref40[2],\n          nm = _ref40[3],\n          NX = _ref40[4],\n          NY = _ref40[5];\n\n      var isSeqContext = ni && nm;\n      return function () {\n        for (var _len14 = arguments.length, args = new Array(_len14), _key14 = 0; _key14 < _len14; _key14++) {\n          args[_key14] = arguments[_key14];\n        }\n\n        var start = args[0],\n            _args$ = args[1],\n            end = _args$ === void 0 ? start : _args$,\n            _args$2 = args[2],\n            freq = _args$2 === void 0 ? 1 : _args$2,\n            _args$3 = args[3],\n            amp = _args$3 === void 0 ? 1 : _args$3;\n\n        if (args.length == 1) {\n          var _ref41 = [0, start];\n          start = _ref41[0];\n          end = _ref41[1];\n        }\n\n        if (!context[counter]) {\n          context[counter] = new Perlin(shuffle);\n        }\n\n        freq = clamp(freq, 0, Infinity);\n        amp = clamp(amp, 0, Infinity);\n        var transform = [start, end].every(is_letter) ? by_charcode : by_unit;\n        var t = isSeqContext ? context[counter].noise((nx - 1) / NX * freq, (ny - 1) / NY * freq, 0) : context[counter].noise((x - 1) / grid.x * freq, (y - 1) / grid.y * freq, 0);\n        var fn = transform(function (start, end) {\n          return map2d(t * amp, start, end, amp);\n        });\n        var value = fn(start, end);\n        return push_stack(context, 'last_rand', value);\n      };\n    },\n    lr: function lr(_ref42) {\n      var context = _ref42.context;\n      return function () {\n        var n = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 1;\n        var stack = context.last_rand;\n        return stack ? stack.last(n) : '';\n      };\n    },\n    noise: function noise(_ref43) {\n      var context = _ref43.context,\n          grid = _ref43.grid,\n          position = _ref43.position,\n          shuffle = _ref43.shuffle,\n          rest = _objectWithoutProperties(_ref43, _excluded);\n\n      var vars = {\n        i: rest.count,\n        I: grid.count,\n        x: rest.x,\n        X: grid.x,\n        y: rest.y,\n        Y: grid.y,\n        z: rest.z,\n        Z: grid.z\n      };\n      return function (x, y) {\n        var z = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n        var counter = 'raw-noise-2d' + position;\n\n        if (!context[counter]) {\n          context[counter] = new Perlin(shuffle);\n        }\n\n        return context[counter].noise(calc$1(x, vars), calc$1(y, vars), calc$1(z, vars));\n      };\n    },\n    stripe: function stripe() {\n      return function () {\n        for (var _len15 = arguments.length, input = new Array(_len15), _key15 = 0; _key15 < _len15; _key15++) {\n          input[_key15] = arguments[_key15];\n        }\n\n        var colors = input.map(get_value);\n        var max = colors.length;\n        var default_count = 0;\n        var custom_sizes = [];\n        var prev;\n\n        if (!max) {\n          return '';\n        }\n\n        colors.forEach(function (step) {\n          var _parse$3 = parse$4(step),\n              _parse$4 = _slicedToArray(_parse$3, 2),\n              _ = _parse$4[0],\n              size = _parse$4[1];\n\n          if (size !== undefined) custom_sizes.push(size);else default_count += 1;\n        });\n        var default_size = custom_sizes.length ? \"(100% - \".concat(custom_sizes.join(' - '), \") / \").concat(default_count) : \"100% / \".concat(max);\n        return colors.map(function (step, i) {\n          if (custom_sizes.length) {\n            var _parse$5 = parse$4(step),\n                _parse$6 = _slicedToArray(_parse$5, 2),\n                color = _parse$6[0],\n                size = _parse$6[1];\n\n            var prefix = prev ? prev + ' + ' : '';\n            prev = prefix + (size !== undefined ? size : default_size);\n            return \"\".concat(color, \" 0 calc(\").concat(prev, \")\");\n          }\n\n          return \"\".concat(step, \" 0 \").concat(100 / max * (i + 1), \"%\");\n        }).join(',');\n      };\n    },\n    calc: function calc() {\n      return function (value) {\n        return calc$1(get_value(value));\n      };\n    },\n    hex: function hex() {\n      return function (value) {\n        return parseInt(get_value(value)).toString(16);\n      };\n    },\n    svg: lazy(function () {\n      for (var _len16 = arguments.length, args = new Array(_len16), _key16 = 0; _key16 < _len16; _key16++) {\n        args[_key16] = arguments[_key16];\n      }\n\n      var value = args.map(function (input) {\n        return get_value(input());\n      }).join(',');\n\n      if (!value.startsWith('<')) {\n        var parsed = parse$2(value);\n        value = generate_svg(parsed);\n      }\n\n      var svg = normalize_svg(value);\n      return create_svg_url(svg);\n    }),\n    filter: lazy(function () {\n      for (var _len17 = arguments.length, args = new Array(_len17), _key17 = 0; _key17 < _len17; _key17++) {\n        args[_key17] = arguments[_key17];\n      }\n\n      var value = args.map(function (input) {\n        return get_value(input());\n      }).join(',');\n      var id = unique_id('filter-');\n\n      if (!value.startsWith('<')) {\n        var parsed = parse$2(value, {\n          type: 'block',\n          name: 'filter'\n        });\n        value = generate_svg(parsed);\n      }\n\n      var svg = normalize_svg(value).replace(/<filter([\\s>])/, \"<filter id=\\\"\".concat(id, \"\\\"$1\"));\n      return create_svg_url(svg, id);\n    }),\n    var: function _var() {\n      return function (value) {\n        return \"var(\".concat(get_value(value), \")\");\n      };\n    },\n    ut: function ut() {\n      return function (value) {\n        return \"var(--\".concat(uniform_time.name, \")\");\n      };\n    },\n    uw: function uw() {\n      return function (value) {\n        return \"var(--\".concat(uniform_width.name, \")\");\n      };\n    },\n    uh: function uh() {\n      return function (value) {\n        return \"var(--\".concat(uniform_height.name, \")\");\n      };\n    },\n    ux: function ux() {\n      return function (value) {\n        return \"var(--\".concat(uniform_mousex.name, \")\");\n      };\n    },\n    uy: function uy() {\n      return function (value) {\n        return \"var(--\".concat(uniform_mousey.name, \")\");\n      };\n    },\n    plot: function plot(_ref44) {\n      var count = _ref44.count,\n          context = _ref44.context,\n          extra = _ref44.extra,\n          position = _ref44.position,\n          grid = _ref44.grid;\n      var key = 'offset-points' + position;\n      var lastExtra = last(extra);\n      return function (commands) {\n        var _ref45 = lastExtra || [],\n            _ref46 = _slicedToArray(_ref45, 4),\n            _ref46$ = _ref46[0],\n            idx = _ref46$ === void 0 ? count : _ref46$,\n            _ = _ref46[1],\n            __ = _ref46[2],\n            _ref46$2 = _ref46[3],\n            max = _ref46$2 === void 0 ? grid.count : _ref46$2;\n\n        if (!context[key]) {\n          var config = parse$5(commands);\n          delete config['fill'];\n          delete config['fill-rule'];\n          delete config['frame'];\n          config.points = max;\n          context[key] = create_shape_points(config, {\n            min: 1,\n            max: 65536\n          });\n        }\n\n        return context[key][idx - 1];\n      };\n    },\n    shape: function shape() {\n      return memo('shape-function', function () {\n        var type = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n        type = String(type).trim();\n        var points = [];\n\n        if (type.length) {\n          for (var _len18 = arguments.length, args = new Array(_len18 > 1 ? _len18 - 1 : 0), _key18 = 1; _key18 < _len18; _key18++) {\n            args[_key18 - 1] = arguments[_key18];\n          }\n\n          if (typeof shapes[type] === 'function') {\n            points = shapes[type](args);\n          } else {\n            var _commands = type;\n            var rest = args.join(',');\n\n            if (rest.length) {\n              _commands = type + ',' + rest;\n            }\n\n            var config = parse$5(_commands);\n            points = create_shape_points(config, {\n              min: 3,\n              max: 3600\n            });\n          }\n        }\n\n        return \"polygon(\".concat(points.join(','), \")\");\n      });\n    },\n    doodle: function doodle() {\n      return function (value) {\n        return value;\n      };\n    },\n    shaders: function shaders() {\n      return function (value) {\n        return value;\n      };\n    },\n    canvas: function canvas() {\n      return function (value) {\n        return value;\n      };\n    },\n    pattern: function pattern() {\n      return function (value) {\n        return value;\n      };\n    },\n    invert: function invert() {\n      return function (commands) {\n        var parsed = parse$1(commands);\n        if (!parsed.valid) return commands;\n        return parsed.commands.map(function (_ref47) {\n          var name = _ref47.name,\n              value = _ref47.value;\n\n          switch (name) {\n            case 'v':\n              return 'h' + value.join(' ');\n\n            case 'V':\n              return 'H' + value.join(' ');\n\n            case 'h':\n              return 'v' + value.join(' ');\n\n            case 'H':\n              return 'V' + value.join(' ');\n\n            default:\n              return name + value.join(' ');\n          }\n        }).join(' ');\n      };\n    },\n    flipH: function flipH() {\n      return function (commands) {\n        var parsed = parse$1(commands);\n        if (!parsed.valid) return commands;\n        return parsed.commands.map(function (_ref48) {\n          var name = _ref48.name,\n              value = _ref48.value;\n\n          switch (name) {\n            case 'h':\n            case 'H':\n              return name + value.map(flip_value).join(' ');\n\n            default:\n              return name + value.join(' ');\n          }\n        }).join(' ');\n      };\n    },\n    flipV: function flipV() {\n      return function (commands) {\n        var parsed = parse$1(commands);\n        if (!parsed.valid) return commands;\n        return parsed.commands.map(function (_ref49) {\n          var name = _ref49.name,\n              value = _ref49.value;\n\n          switch (name) {\n            case 'v':\n            case 'V':\n              return name + value.map(flip_value).join(' ');\n\n            default:\n              return name + value.join(' ');\n          }\n        }).join(' ');\n      };\n    },\n    flip: function flip() {\n      var flipH = Expose.flipH.apply(Expose, arguments);\n      var flipV = Expose.flipV.apply(Expose, arguments);\n      return function (commands) {\n        return flipV(flipH(commands));\n      };\n    },\n    reverse: function reverse() {\n      return function (commands) {\n        var parsed = parse$1(commands);\n        if (!parsed.valid) return commands;\n        return parsed.commands.reverse().map(function (_ref50) {\n          var name = _ref50.name,\n              value = _ref50.value;\n          return name + value.join(' ');\n        }).join(' ');\n      };\n    }\n  }, {\n    'index': 'i',\n    'col': 'x',\n    'row': 'y',\n    'depth': 'z',\n    'rand': 'r',\n    'pick': 'p',\n    // error prone\n    'stripes': 'stripe',\n    'strip': 'stripe',\n    'patern': 'pattern',\n    'flipv': 'flipV',\n    'fliph': 'flipH',\n    // legacy names, keep them before 1.0\n    't': 'ut',\n    'svg-filter': 'filter',\n    'last-rand': 'lr',\n    'last-pick': 'lp',\n    'multiple': 'm',\n    'multi': 'm',\n    'rep': 'Âµ',\n    'repeat': 'Âµ',\n    'ms': 'M',\n    's': 'I',\n    'size': 'I',\n    'sx': 'X',\n    'size-x': 'X',\n    'size-col': 'X',\n    'max-col': 'X',\n    'sy': 'Y',\n    'size-y': 'Y',\n    'size-row': 'Y',\n    'max-row': 'Y',\n    'sz': 'Z',\n    'size-z': 'Z',\n    'size-depth': 'Z',\n    'pick-by-turn': 'pn',\n    'pick-n': 'pn',\n    'pick-d': 'pd',\n    'offset': 'plot',\n    'Offset': 'Plot',\n    'point': 'plot',\n    'Point': 'Plot',\n    'paint': 'canvas'\n  });\n  var presets = {\n    '4a0': [1682, 2378],\n    '2a0': [1189, 1682],\n    a0: [841, 1189],\n    a1: [594, 841],\n    a2: [420, 594],\n    a3: [297, 420],\n    a4: [210, 297],\n    a5: [148, 210],\n    a6: [105, 148],\n    a7: [74, 105],\n    a8: [52, 74],\n    a9: [37, 52],\n    a10: [26, 37],\n    b0: [1000, 1414],\n    b1: [707, 1000],\n    b2: [500, 707],\n    b3: [353, 500],\n    b4: [250, 353],\n    b5: [176, 250],\n    b6: [125, 176],\n    b7: [88, 125],\n    b8: [62, 88],\n    b9: [44, 62],\n    b10: [31, 44],\n    b11: [22, 32],\n    b12: [16, 22],\n    c0: [917, 1297],\n    c1: [648, 917],\n    c2: [458, 648],\n    c3: [324, 458],\n    c4: [229, 324],\n    c5: [162, 229],\n    c6: [114, 162],\n    c7: [81, 114],\n    c8: [57, 81],\n    c9: [40, 57],\n    c10: [28, 40],\n    c11: [22, 32],\n    c12: [16, 22],\n    d0: [764, 1064],\n    d1: [532, 760],\n    d2: [380, 528],\n    d3: [264, 376],\n    d4: [188, 260],\n    d5: [130, 184],\n    d6: [92, 126],\n    letter: [216, 279],\n    postcard: [100, 148],\n    poster: [390, 540]\n  };\n  var modes = {\n    portrait: 'p',\n    pt: 'p',\n    p: 'p',\n    landscape: 'l',\n    ls: 'l',\n    l: 'l'\n  };\n  var unit = 'mm';\n\n  function get_preset(name, mode) {\n    name = String(name).toLowerCase(); // Default to landscape mode\n\n    var _ref51 = presets[name] || [],\n        _ref52 = _slicedToArray(_ref51, 2),\n        h = _ref52[0],\n        w = _ref52[1];\n\n    if (modes[mode] == 'p') {\n      var _ref53 = [h, w];\n      w = _ref53[0];\n      h = _ref53[1];\n    }\n\n    return [w, h].map(function (n) {\n      return n + unit;\n    });\n  }\n\n  function is_preset(name) {\n    return !!presets[name];\n  }\n\n  var all_props = [];\n\n  function get_props(arg) {\n    if (!all_props.length) {\n      var props = new Set();\n\n      if (typeof document !== 'undefined') {\n        for (var n in document.head.style) {\n          if (!n.startsWith('-')) {\n            props.add(n.replace(/[A-Z]/g, '-$&').toLowerCase());\n          }\n        }\n      }\n\n      if (!props.has('grid-gap')) {\n        props.add('grid-gap');\n      }\n\n      all_props = Array.from(props);\n    }\n\n    return arg instanceof RegExp ? all_props.filter(function (n) {\n      return arg.test(n);\n    }) : all_props;\n  }\n\n  function build_mapping(prefix) {\n    var reg = new RegExp(\"\\\\-?\".concat(prefix, \"\\\\-?\"));\n    return get_props(reg).map(function (n) {\n      return n.replace(reg, '');\n    }).reduce(function (obj, n) {\n      return obj[n] = n, obj;\n    }, {});\n  }\n\n  var props_webkit_mapping = build_mapping('webkit');\n  var props_moz_mapping = build_mapping('moz');\n\n  function prefixer(prop, rule) {\n    if (props_webkit_mapping[prop]) {\n      return \"-webkit-\".concat(rule, \" \").concat(rule);\n    } else if (props_moz_mapping[prop]) {\n      return \"-moz-\".concat(rule, \" \").concat(rule);\n    }\n\n    return rule;\n  }\n\n  var map_left_right = {\n    center: '50%',\n    left: '0%',\n    right: '100%',\n    top: '50%',\n    bottom: '50%'\n  };\n  var map_top_bottom = {\n    center: '50%',\n    top: '0%',\n    bottom: '100%',\n    left: '50%',\n    right: '50%'\n  };\n  var Property = add_alias({\n    size: function size(value, _ref54) {\n      var is_special_selector = _ref54.is_special_selector,\n          grid = _ref54.grid;\n\n      var _parse$7 = parse$4(value),\n          _parse$8 = _slicedToArray(_parse$7, 2),\n          w = _parse$8[0],\n          _parse$8$ = _parse$8[1],\n          h = _parse$8$ === void 0 ? w : _parse$8$;\n\n      if (is_preset(w)) {\n        var _get_preset = get_preset(w, h);\n\n        var _get_preset2 = _slicedToArray(_get_preset, 2);\n\n        w = _get_preset2[0];\n        h = _get_preset2[1];\n      }\n\n      var styles = \"\\n      width: \".concat(w, \";\\n      height: \").concat(h, \";\\n    \");\n\n      if (is_special_selector) {\n        if (w === 'auto' || h === 'auto') {\n          styles += \"aspect-ratio: \".concat(grid.ratio, \";\");\n        }\n      } else {\n        styles += \"\\n        --internal-cell-width: \".concat(w, \";\\n        --internal-cell-height: \").concat(h, \";\\n      \");\n      }\n\n      return styles;\n    },\n    offset: function offset(value, _ref55) {\n      var extra = _ref55.extra;\n\n      var _parse$9 = parse$4(value),\n          _parse$10 = _slicedToArray(_parse$9, 2),\n          left = _parse$10[0],\n          _parse$10$ = _parse$10[1],\n          top = _parse$10$ === void 0 ? '50%' : _parse$10$;\n\n      left = map_left_right[left] || left;\n      top = map_top_bottom[top] || top;\n      var cw = 'var(--internal-cell-width, 25%)';\n      var ch = 'var(--internal-cell-height, 25%)';\n      return \"\\n      position: absolute;\\n      left: \".concat(left, \";\\n      top: \").concat(top, \";\\n      width: \").concat(cw, \";\\n      height: \").concat(ch, \";\\n      margin-left: calc(\").concat(cw, \" / -2);\\n      margin-top: calc(\").concat(ch, \" / -2);\\n      grid-area: unset;\\n      --plot-angle: \").concat(extra || 0, \";\\n      transform: rotate(\").concat(extra || 0, \"deg);\\n    \");\n    },\n    grid: function grid(value, options) {\n      var _value$split$map = value.split('/').map(function (s) {\n        return s.trim();\n      }),\n          _value$split$map2 = _toArray(_value$split$map),\n          grid = _value$split$map2[0],\n          size = _value$split$map2.slice(1);\n\n      size = size.join(' / ');\n      return {\n        grid: parse_grid(grid),\n        size: size ? this.size(size, options) : ''\n      };\n    },\n    shape: memo('shape-property', function (value) {\n      var _parse$11 = parse$4(value),\n          _parse$12 = _toArray(_parse$11),\n          type = _parse$12[0],\n          args = _parse$12.slice(1);\n\n      if (typeof shapes[type] !== 'function') return '';\n      var prop = 'clip-path';\n      var points = shapes[type].apply(shapes, _toConsumableArray(args));\n      var rules = \"\".concat(prop, \": polygon(\").concat(points.join(','), \");\");\n      return prefixer(prop, rules) + 'overflow: hidden;';\n    }),\n    use: function use(rules) {\n      if (rules.length > 2) {\n        return rules;\n      }\n    }\n  }, {\n    // legacy names.\n    'place-cell': 'offset'\n  });\n  var literal = {\n    even: function even(n) {\n      return !(n % 2);\n    },\n    odd: function odd(n) {\n      return !!(n % 2);\n    }\n  };\n  /**\n   * TODO: optimization\n   */\n\n  function _nth(input, curr, max) {\n    for (var i = 0; i <= max; ++i) {\n      if (calc$1(input, {\n        n: i\n      }) == curr) {\n        return true;\n      }\n    }\n  }\n\n  var Selector = {\n    at: function at(_ref56) {\n      var x = _ref56.x,\n          y = _ref56.y;\n      return function (x1, y1) {\n        return x == x1 && y == y1;\n      };\n    },\n    nth: function nth(_ref57) {\n      var count = _ref57.count,\n          grid = _ref57.grid;\n      return function () {\n        for (var _len19 = arguments.length, exprs = new Array(_len19), _key19 = 0; _key19 < _len19; _key19++) {\n          exprs[_key19] = arguments[_key19];\n        }\n\n        return exprs.some(function (expr) {\n          return literal[expr] ? literal[expr](count) : _nth(expr, count, grid.count);\n        });\n      };\n    },\n    row: function row(_ref58) {\n      var y = _ref58.y,\n          grid = _ref58.grid;\n      return function () {\n        for (var _len20 = arguments.length, exprs = new Array(_len20), _key20 = 0; _key20 < _len20; _key20++) {\n          exprs[_key20] = arguments[_key20];\n        }\n\n        return exprs.some(function (expr) {\n          return literal[expr] ? literal[expr](y) : _nth(expr, y, grid.y);\n        });\n      };\n    },\n    col: function col(_ref59) {\n      var x = _ref59.x,\n          grid = _ref59.grid;\n      return function () {\n        for (var _len21 = arguments.length, exprs = new Array(_len21), _key21 = 0; _key21 < _len21; _key21++) {\n          exprs[_key21] = arguments[_key21];\n        }\n\n        return exprs.some(function (expr) {\n          return literal[expr] ? literal[expr](x) : _nth(expr, x, grid.x);\n        });\n      };\n    },\n    even: function even(_ref60) {\n      var count = _ref60.count,\n          grid = _ref60.grid,\n          x = _ref60.x,\n          y = _ref60.y;\n      return function (arg) {\n        return literal.odd(x + y);\n      };\n    },\n    odd: function odd(_ref61) {\n      var count = _ref61.count,\n          grid = _ref61.grid,\n          x = _ref61.x,\n          y = _ref61.y;\n      return function (arg) {\n        return literal.even(x + y);\n      };\n    },\n    random: function random(_ref62) {\n      var random = _ref62.random;\n      return function () {\n        var ratio = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : .5;\n        if (ratio >= 1 && ratio <= 0) ratio = .5;\n        return random() < ratio;\n      };\n    },\n    match: function match(_ref63) {\n      var count = _ref63.count,\n          grid = _ref63.grid,\n          x = _ref63.x,\n          y = _ref63.y,\n          random = _ref63.random;\n      return function (expr) {\n        return !!calc$1('(' + expr + ')', {\n          x: x,\n          X: grid.x,\n          y: y,\n          Y: grid.y,\n          i: count,\n          I: grid.count,\n          random: random\n        });\n      };\n    }\n  };\n\n  function is_host_selector(s) {\n    return /^\\:(host|doodle)/.test(s);\n  }\n\n  function is_parent_selector(s) {\n    return /^\\:(container|parent)/.test(s);\n  }\n\n  function is_special_selector(s) {\n    return is_host_selector(s) || is_parent_selector(s);\n  }\n\n  var MathFunc = {};\n\n  var _iterator4 = _createForOfIteratorHelper(Object.getOwnPropertyNames(Math)),\n      _step4;\n\n  try {\n    var _loop = function _loop() {\n      var name = _step4.value;\n\n      MathFunc[name] = function () {\n        return function () {\n          for (var _len26 = arguments.length, args = new Array(_len26), _key26 = 0; _key26 < _len26; _key26++) {\n            args[_key26] = arguments[_key26];\n          }\n\n          if (typeof Math[name] === 'number') {\n            return Math[name];\n          }\n\n          args = args.map(function (n) {\n            return calc$1(get_value(n));\n          });\n          return Math[name].apply(Math, _toConsumableArray(args));\n        };\n      };\n    };\n\n    for (_iterator4.s(); !(_step4 = _iterator4.n()).done;) {\n      _loop();\n    }\n  } catch (err) {\n    _iterator4.e(err);\n  } finally {\n    _iterator4.f();\n  }\n\n  var Rules = /*#__PURE__*/function () {\n    function Rules(tokens) {\n      _classCallCheck(this, Rules);\n\n      this.tokens = tokens;\n      this.rules = {};\n      this.props = {};\n      this.keyframes = {};\n      this.grid = null;\n      this.is_grid_defined = false;\n      this.coords = [];\n      this.doodles = {};\n      this.canvas = {};\n      this.pattern = {};\n      this.shaders = {};\n      this.reset();\n      this.custom_properties = {};\n      this.uniforms = {};\n    }\n\n    _createClass(Rules, [{\n      key: \"reset\",\n      value: function reset() {\n        this.styles = {\n          host: '',\n          container: '',\n          cells: '',\n          keyframes: ''\n        };\n        this.coords = [];\n        this.doodles = {};\n        this.canvas = {};\n        this.pattern = {};\n        this.shaders = {};\n\n        for (var key in this.rules) {\n          if (key.startsWith('#c')) {\n            delete this.rules[key];\n          }\n        }\n      }\n    }, {\n      key: \"add_rule\",\n      value: function add_rule(selector, rule) {\n        var rules = this.rules[selector];\n\n        if (!rules) {\n          rules = this.rules[selector] = [];\n        }\n\n        rules.push.apply(rules, make_array(rule));\n      }\n    }, {\n      key: \"pick_func\",\n      value: function pick_func(name) {\n        return Expose[name] || MathFunc[name];\n      }\n    }, {\n      key: \"apply_func\",\n      value: function apply_func(fn, coords, args) {\n        var _fn = fn.apply(void 0, _toConsumableArray(make_array(coords)));\n\n        var input = [];\n        args.forEach(function (arg) {\n          var type = typeof arg.value;\n          var is_string_or_number = type === 'number' || type === 'string';\n\n          if (!arg.cluster && is_string_or_number) {\n            var _input;\n\n            (_input = input).push.apply(_input, _toConsumableArray(parse$4(arg.value, true)));\n          } else {\n            if (typeof arg === 'function') {\n              input.push(arg);\n            } else if (!is_nil(arg.value)) {\n              var value = get_value(arg.value);\n              input.push(value);\n            }\n          }\n        });\n        input = remove_empty_values(input);\n\n        var result = _fn.apply(void 0, _toConsumableArray(make_array(input)));\n\n        return result;\n      }\n    }, {\n      key: \"compose_aname\",\n      value: function compose_aname() {\n        for (var _len22 = arguments.length, args = new Array(_len22), _key22 = 0; _key22 < _len22; _key22++) {\n          args[_key22] = arguments[_key22];\n        }\n\n        return args.join('-');\n      }\n    }, {\n      key: \"compose_selector\",\n      value: function compose_selector(_ref64) {\n        var x = _ref64.x,\n            y = _ref64.y,\n            z = _ref64.z;\n        var pseudo = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n        return \"#\".concat(cell_id(x, y, z)).concat(pseudo);\n      }\n    }, {\n      key: \"is_composable\",\n      value: function is_composable(name) {\n        return ['doodle', 'shaders', 'canvas', 'pattern'].includes(name);\n      }\n    }, {\n      key: \"read_var\",\n      value: function read_var(value, coords) {\n        var count = coords.count;\n        var group = this.custom_properties[count] || {};\n\n        if (group[value] !== undefined) {\n          var result = String(group[value]).trim();\n\n          if (result[0] == '(') {\n            var _last2 = result[result.length - 1];\n\n            if (_last2 === ')') {\n              result = result.substring(1, result.length - 1);\n            }\n          }\n\n          return result.replace(/;+$/g, '');\n        }\n\n        return value;\n      }\n    }, {\n      key: \"compose_argument\",\n      value: function compose_argument(argument, coords) {\n        var _this2 = this;\n\n        var extra = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [];\n        var parent = arguments.length > 3 ? arguments[3] : undefined;\n        if (!coords.extra) coords.extra = [];\n        coords.extra.push(extra);\n        var result = argument.map(function (arg) {\n          if (arg.type === 'text') {\n            if (/^\\-\\-\\w/.test(arg.value)) {\n              if (parent && parent.name === '@var') {\n                return arg.value;\n              }\n\n              return _this2.read_var(arg.value, coords);\n            }\n\n            return arg.value;\n          } else if (arg.type === 'func') {\n            var fname = arg.name.substr(1);\n\n            var fn = _this2.pick_func(fname);\n\n            if (typeof fn === 'function') {\n              _this2.check_uniforms(fname);\n\n              if (_this2.is_composable(fname)) {\n                var _value2 = get_value((arg.arguments[0] || [])[0]);\n\n                if (!is_nil(_value2)) {\n                  switch (fname) {\n                    case 'doodle':\n                      return _this2.compose_doodle(_this2.inject_variables(_value2, coords.count));\n\n                    case 'shaders':\n                      return _this2.compose_shaders(_value2, coords);\n\n                    case 'canvas':\n                      return _this2.compose_canvas(_value2, arg.arguments.slice(1));\n\n                    case 'pattern':\n                      return _this2.compose_pattern(_value2, coords);\n                  }\n                }\n              }\n\n              coords.position = arg.position;\n              var cloned = Object.assign({}, coords, {\n                extra: _toConsumableArray(coords.extra)\n              });\n              var args = arg.arguments.map(function (n) {\n                return fn.lazy ? function () {\n                  for (var _len23 = arguments.length, extra = new Array(_len23), _key23 = 0; _key23 < _len23; _key23++) {\n                    extra[_key23] = arguments[_key23];\n                  }\n\n                  return _this2.compose_argument(n, cloned, extra, arg);\n                } : _this2.compose_argument(n, coords, extra, arg);\n              });\n\n              var value = _this2.apply_func(fn, coords, args);\n\n              return value;\n            } else {\n              return arg.name;\n            }\n          }\n        });\n        coords.extra.pop();\n        return {\n          cluster: argument.cluster,\n          value: result.length >= 2 ? {\n            value: result.join('')\n          } : result[0]\n        };\n      }\n    }, {\n      key: \"compose_doodle\",\n      value: function compose_doodle(doodle) {\n        var id = unique_id('doodle');\n        this.doodles[id] = doodle;\n        return '${' + id + '}';\n      }\n    }, {\n      key: \"compose_shaders\",\n      value: function compose_shaders(shader, _ref65) {\n        var x = _ref65.x,\n            y = _ref65.y,\n            z = _ref65.z;\n        var id = unique_id('shader');\n        this.shaders[id] = {\n          shader: shader,\n          cell: cell_id(x, y, z)\n        };\n        return '${' + id + '}';\n      }\n    }, {\n      key: \"compose_pattern\",\n      value: function compose_pattern(code, _ref66) {\n        var x = _ref66.x,\n            y = _ref66.y,\n            z = _ref66.z;\n        var id = unique_id('pattern');\n        this.pattern[id] = {\n          code: code,\n          cell: cell_id(x, y, z)\n        };\n        return '${' + id + '}';\n      }\n    }, {\n      key: \"compose_canvas\",\n      value: function compose_canvas(code) {\n        var rest = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n        var commands = code;\n        var result = rest.map(function (group) {\n          return get_value(group[0]);\n        }).join(',');\n\n        if (result.length) {\n          commands = code + ',' + result;\n        }\n\n        var id = unique_id('canvas');\n        this.canvas[id] = {\n          code: commands\n        };\n        return '${' + id + '}';\n      }\n    }, {\n      key: \"check_uniforms\",\n      value: function check_uniforms(name) {\n        switch (name) {\n          case 'ut':\n          case 't':\n            this.uniforms.time = true;\n            break;\n\n          case 'ux':\n            this.uniforms.mousex = true;\n            break;\n\n          case 'uy':\n            this.uniforms.mousey = true;\n            break;\n\n          case 'uw':\n            this.uniforms.width = true;\n            break;\n\n          case 'uh':\n            this.uniforms.height = true;\n            break;\n        }\n      }\n    }, {\n      key: \"inject_variables\",\n      value: function inject_variables(value, count) {\n        var group = this.custom_properties[count];\n\n        if (is_nil(group)) {\n          return value;\n        }\n\n        var result = [];\n\n        for (var _i5 = 0, _Object$entries3 = Object.entries(group); _i5 < _Object$entries3.length; _i5++) {\n          var _Object$entries3$_i = _slicedToArray(_Object$entries3[_i5], 2),\n              name = _Object$entries3$_i[0],\n              key = _Object$entries3$_i[1];\n\n          result.push(\"\".concat(name, \": \").concat(key, \";\"));\n        }\n\n        return result.join('') + value;\n      }\n    }, {\n      key: \"compose_value\",\n      value: function compose_value(value, coords) {\n        var _this3 = this;\n\n        if (!Array.isArray(value)) {\n          return {\n            value: '',\n            extra: ''\n          };\n        }\n\n        var extra = '';\n        var output = value.reduce(function (result, val) {\n          switch (val.type) {\n            case 'text':\n              {\n                result += val.value;\n                break;\n              }\n\n            case 'func':\n              {\n                var fname = val.name.substr(1);\n\n                var fn = _this3.pick_func(fname);\n\n                if (typeof fn === 'function') {\n                  _this3.check_uniforms(fname);\n\n                  if (_this3.is_composable(fname)) {\n                    var _value3 = get_value((val.arguments[0] || [])[0]);\n\n                    if (!is_nil(_value3)) {\n                      switch (fname) {\n                        case 'doodle':\n                          result += _this3.compose_doodle(_this3.inject_variables(_value3, coords.count));\n                          break;\n\n                        case 'shaders':\n                          result += _this3.compose_shaders(_value3, coords);\n                          break;\n\n                        case 'pattern':\n                          result += _this3.compose_pattern(_value3, coords);\n                          break;\n\n                        case 'canvas':\n                          result += _this3.compose_canvas(_value3, val.arguments.slice(1));\n                          break;\n                      }\n                    }\n                  } else {\n                    coords.position = val.position;\n                    var args = val.arguments.map(function (arg) {\n                      return fn.lazy ? function () {\n                        for (var _len24 = arguments.length, extra = new Array(_len24), _key24 = 0; _key24 < _len24; _key24++) {\n                          extra[_key24] = arguments[_key24];\n                        }\n\n                        return _this3.compose_argument(arg, coords, extra, val);\n                      } : _this3.compose_argument(arg, coords, [], val);\n                    });\n\n                    var _output = _this3.apply_func(fn, coords, args);\n\n                    if (!is_nil(_output)) {\n                      result += _output;\n                    }\n\n                    if (_output.extra) {\n                      extra = _output.extra;\n                    }\n                  }\n                }\n              }\n          }\n\n          return result;\n        }, '');\n        return {\n          value: output,\n          extra: extra\n        };\n      }\n    }, {\n      key: \"compose_rule\",\n      value: function compose_rule(token, _coords, selector) {\n        var _this4 = this;\n\n        var coords = Object.assign({}, _coords);\n        var prop = token.property;\n        var extra;\n        var value_group = token.value.reduce(function (ret, v) {\n          var composed = _this4.compose_value(v, coords);\n\n          if (composed) {\n            if (composed.value) {\n              ret.push(composed.value);\n            }\n\n            if (composed.extra) {\n              extra = composed.extra;\n            }\n          }\n\n          return ret;\n        }, []);\n        var value = value_group.join(', ');\n\n        if (/^animation(\\-name)?$/.test(prop)) {\n          this.props.has_animation = true;\n\n          if (is_host_selector(selector)) {\n            var prefix = uniform_time[prop];\n\n            if (prefix && value) {\n              value = prefix + ',' + value;\n            }\n          }\n\n          if (coords.count > 1) {\n            var count = coords.count;\n\n            switch (prop) {\n              case 'animation-name':\n                {\n                  value = value_group.map(function (n) {\n                    return _this4.compose_aname(n, count);\n                  }).join(', ');\n                  break;\n                }\n\n              case 'animation':\n                {\n                  value = value_group.map(function (n) {\n                    var group = (n || '').split(/\\s+/);\n                    group[0] = _this4.compose_aname(group[0], count);\n                    return group.join(' ');\n                  }).join(', ');\n                }\n            }\n          }\n        }\n\n        if (prop === 'content') {\n          if (!/[\"']|^none$|^(var|counter|counters|attr|url)\\(/.test(value)) {\n            value = \"'\".concat(value, \"'\");\n          }\n        }\n\n        if (prop === 'transition') {\n          this.props.has_transition = true;\n        }\n\n        var rule = \"\".concat(prop, \": \").concat(value, \";\");\n        rule = prefixer(prop, rule);\n\n        if (prop === 'clip-path') {\n          // fix clip bug\n          rule += ';overflow: hidden;';\n        }\n\n        if (prop === 'width' || prop === 'height') {\n          if (!is_special_selector(selector)) {\n            rule += \"--internal-cell-\".concat(prop, \": \").concat(value, \";\");\n          }\n        }\n\n        if (prop === 'background' && (value.includes('shader') || value.includes('canvas') || value.includes('pattern'))) {\n          rule += 'background-size: 100% 100%;';\n        }\n\n        if (/^\\-\\-/.test(prop)) {\n          if (!this.custom_properties[_coords.count]) {\n            this.custom_properties[_coords.count] = {};\n          }\n\n          this.custom_properties[_coords.count][prop] = value;\n        }\n\n        if (/^@/.test(prop) && Property[prop.substr(1)]) {\n          var name = prop.substr(1);\n          var transformed = Property[name](value, {\n            is_special_selector: is_special_selector(selector),\n            grid: coords.grid,\n            extra: extra\n          });\n\n          switch (name) {\n            case 'grid':\n              {\n                if (is_host_selector(selector)) {\n                  rule = transformed.size || '';\n                } else {\n                  rule = '';\n\n                  if (!this.is_grid_defined) {\n                    transformed = Property[name](value, {\n                      is_special_selector: true,\n                      grid: coords.grid\n                    });\n                    this.add_rule(':host', transformed.size || '');\n                  }\n                }\n\n                this.grid = coords.grid;\n                this.is_grid_defined = true;\n                break;\n              }\n\n            case 'place-cell':\n            case 'offset':\n              {\n                if (!is_host_selector(selector)) {\n                  rule = transformed;\n                }\n\n                break;\n              }\n\n            case 'use':\n              {\n                if (token.value.length) {\n                  this.compose(coords, token.value);\n                }\n\n                rule = '';\n                break;\n              }\n\n            default:\n              {\n                rule = transformed;\n              }\n          }\n        }\n\n        return rule;\n      }\n    }, {\n      key: \"pre_compose_rule\",\n      value: function pre_compose_rule(token, _coords) {\n        var _this5 = this;\n\n        var coords = Object.assign({}, _coords);\n        var prop = token.property;\n\n        switch (prop) {\n          case '@grid':\n            {\n              var value_group = token.value.reduce(function (ret, v) {\n                var composed = _this5.compose_value(v, coords);\n\n                if (composed && composed.value) ret.push(composed.value);\n                return ret;\n              }, []);\n              var value = value_group.join(', ');\n              var name = prop.substr(1);\n              var transformed = Property[name](value, {});\n              this.grid = transformed.grid;\n              break;\n            }\n\n          case '@use':\n            {\n              if (token.value.length) {\n                this.pre_compose(coords, token.value);\n              }\n\n              break;\n            }\n        }\n      }\n    }, {\n      key: \"pre_compose\",\n      value: function pre_compose(coords, tokens) {\n        var _this6 = this;\n\n        (tokens || this.tokens).forEach(function (token) {\n          switch (token.type) {\n            case 'rule':\n              {\n                _this6.pre_compose_rule(token, coords);\n\n                break;\n              }\n\n            case 'pseudo':\n              {\n                if (is_host_selector(token.selector)) {\n                  (token.styles || []).forEach(function (token) {\n                    _this6.pre_compose_rule(token, coords);\n                  });\n                }\n\n                break;\n              }\n          }\n        });\n      }\n    }, {\n      key: \"compose\",\n      value: function compose(coords, tokens, initial) {\n        var _this7 = this;\n\n        this.coords.push(coords);\n        (tokens || this.tokens).forEach(function (token, i) {\n          if (token.skip) return false;\n          if (initial && _this7.grid) return false;\n\n          switch (token.type) {\n            case 'rule':\n              {\n                _this7.add_rule(_this7.compose_selector(coords), _this7.compose_rule(token, coords));\n\n                break;\n              }\n\n            case 'pseudo':\n              {\n                if (token.selector.startsWith(':doodle')) {\n                  token.selector = token.selector.replace(/^\\:+doodle/, ':host');\n                }\n\n                var special = is_special_selector(token.selector);\n\n                if (special) {\n                  token.skip = true;\n                }\n\n                token.selector.split(',').forEach(function (selector) {\n                  var pseudo = token.styles.map(function (s) {\n                    return _this7.compose_rule(s, coords, selector);\n                  });\n                  var composed = special ? selector : _this7.compose_selector(coords, selector);\n\n                  _this7.add_rule(composed, pseudo);\n                });\n                break;\n              }\n\n            case 'cond':\n              {\n                var fn = Selector[token.name.substr(1)];\n\n                if (fn) {\n                  var args = token.arguments.map(function (arg) {\n                    return _this7.compose_argument(arg, coords);\n                  });\n\n                  var result = _this7.apply_func(fn, coords, args);\n\n                  if (result) {\n                    _this7.compose(coords, token.styles);\n                  }\n                }\n\n                break;\n              }\n\n            case 'keyframes':\n              {\n                if (!_this7.keyframes[token.name]) {\n                  _this7.keyframes[token.name] = function (coords) {\n                    return \"\\n              \".concat(join(token.steps.map(function (step) {\n                      return \"\\n                \".concat(step.name, \" {\\n                  \").concat(join(step.styles.map(function (s) {\n                        return _this7.compose_rule(s, coords);\n                      })), \"\\n                }\\n              \");\n                    })), \"\\n            \");\n                  };\n                }\n              }\n          }\n        });\n      }\n    }, {\n      key: \"output\",\n      value: function output() {\n        var _this8 = this;\n\n        for (var _i6 = 0, _Object$entries4 = Object.entries(this.rules); _i6 < _Object$entries4.length; _i6++) {\n          var _Object$entries4$_i = _slicedToArray(_Object$entries4[_i6], 2),\n              selector = _Object$entries4$_i[0],\n              rule = _Object$entries4$_i[1];\n\n          if (is_parent_selector(selector)) {\n            this.styles.container += \"\\n          .container {\\n            \".concat(join(rule), \"\\n          }\\n        \");\n          } else {\n            var target = is_host_selector(selector) ? 'host' : 'cells';\n            var value = join(rule).trim();\n            var name = target === 'host' ? \"\".concat(selector, \", .host\") : selector;\n            this.styles[target] += \"\".concat(name, \" { \").concat(value, \" }\");\n          }\n        }\n\n        if (this.uniforms.time) {\n          this.styles.container += \"\\n        :host, .host {\\n          animation: \".concat(uniform_time.animation, \";\\n        }\\n      \");\n          this.styles.keyframes += \"\\n       @keyframes \".concat(uniform_time['animation-name'], \" {\\n         from { --\").concat(uniform_time.name, \": 0 }\\n         to { --\").concat(uniform_time.name, \": \").concat(uniform_time['animation-duration'] / 10, \" }\\n       }\\n      \");\n        }\n\n        this.coords.forEach(function (coords, i) {\n          for (var _i7 = 0, _Object$entries5 = Object.entries(_this8.keyframes); _i7 < _Object$entries5.length; _i7++) {\n            var _Object$entries5$_i = _slicedToArray(_Object$entries5[_i7], 2),\n                _name = _Object$entries5$_i[0],\n                keyframe = _Object$entries5$_i[1];\n\n            var aname = _this8.compose_aname(_name, coords.count);\n\n            _this8.styles.keyframes += \"\\n          \".concat(maybe(i === 0, \"@keyframes \".concat(_name, \" { \").concat(keyframe(coords), \" }\")), \"\\n          @keyframes \").concat(aname, \" {\\n            \").concat(keyframe(coords), \"\\n          }\\n        \");\n          }\n        });\n        return {\n          props: this.props,\n          styles: this.styles,\n          grid: this.grid,\n          doodles: this.doodles,\n          shaders: this.shaders,\n          canvas: this.canvas,\n          pattern: this.pattern,\n          uniforms: this.uniforms\n        };\n      }\n    }]);\n\n    return Rules;\n  }();\n\n  function generate_css(tokens, grid_size, random) {\n    var rules = new Rules(tokens);\n    var context = {};\n\n    function rand() {\n      var start = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n      var end = arguments.length > 1 ? arguments[1] : undefined;\n\n      if (arguments.length == 1) {\n        var _ref67 = [0, start];\n        start = _ref67[0];\n        end = _ref67[1];\n      }\n\n      return lerp(random(), start, end);\n    }\n\n    function pick() {\n      for (var _len25 = arguments.length, items = new Array(_len25), _key25 = 0; _key25 < _len25; _key25++) {\n        items[_key25] = arguments[_key25];\n      }\n\n      var args = items.reduce(function (acc, n) {\n        return acc.concat(n);\n      }, []);\n      return args[~~(random() * args.length)];\n    }\n\n    function shuffle(arr) {\n      var ret = _toConsumableArray(arr);\n\n      var m = arr.length;\n\n      while (m) {\n        var i = ~~(random() * m--);\n        var t = ret[m];\n        ret[m] = ret[i];\n        ret[i] = t;\n      }\n\n      return ret;\n    }\n\n    rules.pre_compose({\n      x: 1,\n      y: 1,\n      z: 1,\n      count: 1,\n      context: {},\n      grid: {\n        x: 1,\n        y: 1,\n        z: 1,\n        count: 1\n      },\n      random: random,\n      rand: rand,\n      pick: pick,\n      shuffle: shuffle\n    });\n\n    var _rules$output = rules.output(),\n        grid = _rules$output.grid;\n\n    if (grid) grid_size = grid;\n    rules.reset();\n\n    if (grid_size.z == 1) {\n      for (var y = 1, count = 0; y <= grid_size.y; ++y) {\n        for (var x = 1; x <= grid_size.x; ++x) {\n          rules.compose({\n            x: x,\n            y: y,\n            z: 1,\n            count: ++count,\n            grid: grid_size,\n            context: context,\n            random: random,\n            rand: rand,\n            pick: pick,\n            shuffle: shuffle\n          });\n        }\n      }\n    } else {\n      for (var z = 1, _count = 0; z <= grid_size.z; ++z) {\n        rules.compose({\n          x: 1,\n          y: 1,\n          z: z,\n          count: ++_count,\n          grid: grid_size,\n          context: context,\n          random: random,\n          rand: rand,\n          pick: pick,\n          shuffle: shuffle\n        });\n      }\n    }\n\n    return rules.output();\n  }\n\n  function create_shader(gl, type, source) {\n    var shader = gl.createShader(type);\n    gl.shaderSource(shader, source);\n    gl.compileShader(shader);\n    return shader;\n  }\n\n  function create_program(gl, vss, fss) {\n    var vs = create_shader(gl, gl.VERTEX_SHADER, vss);\n    var fs = create_shader(gl, gl.FRAGMENT_SHADER, fss);\n    var prog = gl.createProgram();\n    gl.attachShader(prog, vs);\n    gl.attachShader(prog, fs);\n    gl.linkProgram(prog);\n\n    if (!gl.getProgramParameter(prog, gl.LINK_STATUS)) {\n      console.warn('Link failed: ' + gl.getProgramInfoLog(prog));\n      console.warn('vs info-log: ' + gl.getShaderInfoLog(vs));\n      console.warn('fs info-log: ' + gl.getShaderInfoLog(fs));\n    }\n\n    return prog;\n  }\n\n  function add_uniform(fragment, uniform) {\n    if (!fragment.includes(uniform)) {\n      return uniform + '\\n' + fragment;\n    }\n\n    return fragment;\n  }\n\n  var fragment_head = \"#version 300 es\\n  precision highp float;\\n  out vec4 FragColor;\\n\";\n  var default_vertex_shader = \"#version 300 es\\n  in vec4 position;\\n  void main() {\\n    gl_Position = position;\\n  }\\n\"; // https://developer.mozilla.org/en-US/docs/Web/API/WebGL_API/Tutorial/Using_textures_in_WebGL\n\n  function load_texture(gl, image, i) {\n    var texture = gl.createTexture();\n    gl.activeTexture(gl['TEXTURE' + i]);\n    gl.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL, true);\n    gl.bindTexture(gl.TEXTURE_2D, texture);\n    gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, image);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\n  }\n\n  function draw_shader(shaders, width, height) {\n    var result = Cache.get(shaders);\n\n    if (result) {\n      return Promise.resolve(result);\n    }\n\n    var canvas = document.createElement('canvas');\n    var ratio = window.devicePixelRatio || 1;\n    width *= ratio;\n    height *= ratio;\n    canvas.width = width;\n    canvas.height = height;\n    var gl = canvas.getContext('webgl2');\n    if (!gl) return Promise.resolve(''); // resolution uniform\n\n    var fragment = add_uniform(shaders.fragment || '', 'uniform vec2 u_resolution;'); // texture uniform\n\n    shaders.textures.forEach(function (n) {\n      var uniform = \"uniform sampler2D \".concat(n.name, \";\");\n      fragment = add_uniform(fragment, uniform);\n    });\n    var program = create_program(gl, shaders.vertex || default_vertex_shader, fragment_head + fragment); // position in vertex shader\n\n    var positionAttributeLocation = gl.getAttribLocation(program, 'position');\n    var positionBuffer = gl.createBuffer();\n    gl.bindBuffer(gl.ARRAY_BUFFER, positionBuffer);\n    var vertices = [-1, -1, -1, 1, 1, -1, 1, 1, -1, 1, 1, -1];\n    gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(vertices), gl.STATIC_DRAW);\n    gl.enableVertexAttribArray(positionAttributeLocation);\n    gl.vertexAttribPointer(positionAttributeLocation, 2, gl.FLOAT, false, 0, 0);\n    gl.viewport(0, 0, gl.drawingBufferWidth, gl.drawingBufferHeight);\n    gl.clearColor(0, 0, 0, 0);\n    gl.clear(gl.COLOR_BUFFER_BIT);\n    gl.useProgram(program); // resolve uniforms\n\n    gl.uniform2fv(gl.getUniformLocation(program, \"u_resolution\"), [width, height]);\n    shaders.textures.forEach(function (n, i) {\n      load_texture(gl, n.value, i);\n      gl.uniform1i(gl.getUniformLocation(program, n.name), i);\n    }); // two triangles to form a rectangle\n\n    gl.drawArrays(gl.TRIANGLES, 0, 6); // resolve image data in 72dpi :(\n\n    return Promise.resolve(Cache.set(shaders, canvas.toDataURL()));\n  }\n\n  function readStatement(iter, token) {\n    var fragment = [];\n\n    while (iter.next()) {\n      var _iter$get18 = iter.get(),\n          curr = _iter$get18.curr,\n          next = _iter$get18.next;\n\n      var isStatementBreak = !next || curr.isSymbol(';') || next.isSymbol('}');\n      fragment.push(curr);\n\n      if (isStatementBreak) {\n        break;\n      }\n    }\n\n    if (fragment.length) {\n      token.value = joinToken(fragment);\n    }\n\n    return token;\n  }\n\n  function walk(iter, parentToken) {\n    var rules = [];\n    var fragment = [];\n    var tokenType = parentToken && parentToken.type || '';\n    var stack = [];\n\n    while (iter.next()) {\n      var _iter$get19 = iter.get(),\n          prev = _iter$get19.prev,\n          curr = _iter$get19.curr,\n          next = _iter$get19.next;\n\n      var isBlockBreak = !next || curr.isSymbol('}');\n\n      if (tokenType === 'block' && isBlockBreak) {\n        if (!next && rules.length && !curr.isSymbol('}')) {\n          rules[rules.length - 1].value += ';' + curr.value;\n        }\n\n        parentToken.value = rules;\n        break;\n      } else if (curr.isSymbol('{') && fragment.length && !stack.length) {\n        var _ret = function () {\n          var selectors = parseSelector(fragment);\n\n          if (!selectors.length) {\n            return \"continue\";\n          }\n\n          var block = walk(iter, {\n            type: 'block',\n            name: 'unkown',\n            value: []\n          });\n          selectors.forEach(function (selector) {\n            var newBlock = Object.assign({}, block, {\n              name: selector.name,\n              args: selector.args\n            });\n            rules.push(newBlock);\n          });\n          fragment = [];\n        }();\n\n        if (_ret === \"continue\") continue;\n      } else if (curr.isSymbol(':') && fragment.length && !stack.length) {\n        var prop = joinToken(fragment);\n        rules.push(readStatement(iter, {\n          type: 'statement',\n          name: prop,\n          value: ''\n        }));\n\n        if (tokenType == 'block') {\n          parentToken.value = rules;\n        }\n\n        fragment = [];\n      } else if (curr.isSymbol(';')) {\n        if (rules.length && fragment.length) {\n          rules[rules.length - 1].value += ';' + joinToken(fragment);\n          fragment = [];\n        }\n      } else {\n        if (curr.isSymbol('(')) {\n          stack.push(curr);\n        }\n\n        if (curr.isSymbol(')')) {\n          stack.pop();\n        }\n\n        fragment.push(curr);\n      }\n    }\n\n    if (rules.length && tokenType == 'block') {\n      parentToken.value = rules;\n    }\n\n    return tokenType ? parentToken : rules;\n  }\n\n  function joinToken(tokens) {\n    return tokens.filter(function (token, i) {\n      if (token.isSymbol(';') && i === tokens.length - 1) return false;\n      return true;\n    }).map(function (n) {\n      return n.value;\n    }).join('');\n  }\n\n  function parseSelector(tokens) {\n    var iter = iterator$1(tokens);\n    var groups = [];\n    var selectorName = '';\n    var args = [];\n    var fragments = [];\n    var stack = [];\n\n    while (iter.next()) {\n      var _iter$get20 = iter.get(),\n          curr = _iter$get20.curr,\n          next = _iter$get20.next;\n\n      if (!selectorName.length && curr.isWord()) {\n        selectorName = curr.value;\n      } else if (curr.isSymbol('(')) {\n        if (stack.length) {\n          fragments.push(curr.value);\n        }\n\n        stack.push(curr);\n      } else if (curr.isSymbol(')')) {\n        stack.pop();\n\n        if (stack.length) {\n          fragments.push(curr.value);\n        } else if (fragments.length) {\n          args.push(fragments.join(''));\n          fragments = [];\n        }\n      } else if (curr.isSymbol(',')) {\n        if (stack.length) {\n          args.push(fragments.join(''));\n          fragments = [];\n        } else {\n          if (fragments.length) {\n            args.push(fragments.join(''));\n            fragments = [];\n          }\n\n          if (selectorName) {\n            groups.push({\n              name: selectorName,\n              args: args\n            });\n            selectorName = '';\n            args = [];\n            fragments = [];\n          }\n        }\n      } else {\n        fragments.push(curr.value);\n      }\n    }\n\n    if (selectorName) {\n      groups.push({\n        name: selectorName,\n        args: args\n      });\n    }\n\n    return groups.filter(function (v, i, self) {\n      var idx = self.findIndex(function (n) {\n        return n.name === v.name && v.args.join('') == n.args.join('');\n      });\n      return idx === i;\n    });\n  }\n\n  function parse(source) {\n    var iter = iterator$1(scan(source));\n    var tokens = walk(iter);\n    return tokens;\n  }\n\n  function generate_shader(input, grid) {\n    return \"\\n    vec3 mapping(vec2 uv, vec2 grid) {\\n      vec2 _grid = 1.0/grid;\\n      float x = ceil(uv.x/_grid.x);\\n      float y = ceil(grid.y - uv.y/_grid.y);\\n      float i = x + (y - 1.0) * y;\\n      return vec3(x, y, i);\\n    }\\n    vec4 getColor(float x, float y, float i, float I, float X, float Y) {\\n      vec4 color = vec4(0, 0, 0, 0);\\n      \".concat(input, \"\\n      return color;\\n    }\\n    void main() {\\n      vec2 uv = gl_FragCoord.xy/u_resolution.xy;\\n      vec2 grid = vec2(\").concat(grid.x, \", \").concat(grid.y, \");\\n      vec3 p = mapping(uv, grid);\\n      FragColor = getColor(p.x, p.y, p.z, grid.x * grid.y, grid.x, grid.y);\\n    }\\n  \");\n  }\n\n  function generate_statement(token, extra) {\n    if (token.name === 'fill') {\n      var _extra$get_rgba_color = extra.get_rgba_color(token.value),\n          r = _extra$get_rgba_color.r,\n          g = _extra$get_rgba_color.g,\n          b = _extra$get_rgba_color.b,\n          a = _extra$get_rgba_color.a;\n\n      return {\n        type: 'statement',\n        value: \"\\ncolor = vec4(\".concat(float(r / 255), \", \").concat(float(g / 255), \", \").concat(float(b / 255), \", \").concat(float(a), \");\\n\")\n      };\n    }\n\n    if (token.name == 'grid') {\n      return {\n        type: 'grid',\n        value: token.value\n      };\n    }\n\n    return {\n      type: 'statement',\n      value: ''\n    };\n  }\n\n  function generate_block(token, extra) {\n    if (token.name === 'match') {\n      var cond = token.args[0];\n      var values = [];\n      token.value.forEach(function (t) {\n        var statement = generate_statement(t, extra);\n\n        if (statement.type == 'statement') {\n          values.push(statement.value);\n        }\n      });\n      return \"\\n      if (\".concat(cond, \") {\\n        \").concat(values.join(''), \"\\n      }\\n    \");\n    }\n\n    return '';\n  }\n\n  function float(n) {\n    return String(n).includes('.') ? n : n + '.0';\n  }\n\n  function get_grid(input) {\n    var _String$replace$repla = String(input + '').replace(/\\s+/g, '').replace(/[,ï¼xX]+/g, 'x').split('x').map(function (n) {\n      return parseInt(n);\n    }),\n        _String$replace$repla2 = _slicedToArray(_String$replace$repla, 2),\n        x = _String$replace$repla2[0],\n        _String$replace$repla3 = _String$replace$repla2[1],\n        y = _String$replace$repla3 === void 0 ? x : _String$replace$repla3;\n\n    if (!x || x < 1) x = 1;\n    if (!y || y < 1) y = 1;\n    return {\n      x: x,\n      y: y\n    };\n  }\n\n  function draw_pattern(code, extra) {\n    var tokens = parse(code);\n    var result = [];\n    var grid = {\n      x: 1,\n      y: 1\n    };\n    tokens.forEach(function (token) {\n      if (token.type === 'statement') {\n        var statement = generate_statement(token, extra);\n\n        if (statement.type == 'statement') {\n          result.push(statement.value);\n        }\n\n        if (statement.type === 'grid') {\n          grid = get_grid(statement.value);\n        }\n      } else if (token.type === 'block') {\n        result.push(generate_block(token, extra));\n      }\n    });\n    return generate_shader(result.join(''), grid);\n  }\n\n  var nextId = next_id();\n\n  function draw_canvas(code) {\n    var result = Cache.get(code);\n\n    if (result) {\n      return Promise.resolve(result);\n    }\n\n    var name = nextId('css-doodle-paint');\n    var wrapped = generate(name, code);\n    var blob = new Blob([wrapped], {\n      type: 'text/javascript'\n    });\n\n    try {\n      if (CSS.paintWorklet) {\n        CSS.paintWorklet.addModule(URL.createObjectURL(blob));\n      }\n    } catch (e) {}\n\n    return Promise.resolve(Cache.set(code, \"paint(\".concat(name, \")\")));\n  }\n\n  function generate(name, code) {\n    code = un_entity(code); // make it so\n\n    if (!code.includes('paint(')) {\n      code = \"\\n      paint(ctx, {width, height}, props) {\\n        \".concat(code, \"\\n      }\\n    \");\n    }\n\n    return \"\\n    registerPaint('\".concat(name, \"', class {\\n      \").concat(code, \"\\n    })\\n  \");\n  }\n\n  function svg_to_png(svg, width, height, scale) {\n    return new Promise(function (resolve, reject) {\n      var source = \"data:image/svg+xml;utf8,\".concat(encodeURIComponent(svg));\n\n      function action() {\n        var img = new Image();\n        img.crossOrigin = 'anonymous';\n        img.src = source;\n\n        img.onload = function () {\n          var canvas = document.createElement('canvas');\n          var ctx = canvas.getContext('2d');\n          var dpr = window.devicePixelRatio || 1;\n          /* scale with devicePixelRatio only when the scale equals 1 */\n\n          if (scale != 1) {\n            dpr = 1;\n          }\n\n          canvas.width = width * dpr;\n          canvas.height = height * dpr;\n          ctx.drawImage(img, 0, 0, canvas.width, canvas.height);\n\n          try {\n            canvas.toBlob(function (blob) {\n              resolve({\n                blob: blob,\n                source: source,\n                url: URL.createObjectURL(blob)\n              });\n            });\n          } catch (e) {\n            reject(e);\n          }\n        };\n      }\n\n      if (is_safari()) {\n        cache_image(source, action, 200);\n      } else {\n        action();\n      }\n    });\n  }\n  /*\n  Copyright 2019 David Bau.\n  Permission is hereby granted, free of charge, to any person obtaining\n  a copy of this software and associated documentation files (the\n  \"Software\"), to deal in the Software without restriction, including\n  without limitation the rights to use, copy, modify, merge, publish,\n  distribute, sublicense, and/or sell copies of the Software, and to\n  permit persons to whom the Software is furnished to do so, subject to\n  the following conditions:\n  The above copyright notice and this permission notice shall be\n  included in all copies or substantial portions of the Software.\n  THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n  EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n  MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.\n  IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY\n  CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT,\n  TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\n  SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n  */\n\n\n  var global = globalThis;\n  var math = Math;\n  var pool = []; //\n  // The following constants are related to IEEE 754 limits.\n  //\n\n  var width = 256,\n      // each RC4 output is 0 <= x < 256\n  chunks = 6,\n      // at least six RC4 outputs for each double\n  digits = 52,\n      // there are 52 significant digits in a double\n  rngname = 'random',\n      // rngname: name for Math.random and Math.seedrandom\n  startdenom = math.pow(width, chunks),\n      significance = math.pow(2, digits),\n      overflow = significance * 2,\n      mask = width - 1,\n      nodecrypto; // node.js crypto module, initialized at the bottom.\n  //\n  // seedrandom()\n  // This is the seedrandom function described above.\n  //\n\n  function seedrandom(seed, options, callback) {\n    var key = [];\n    options = options == true ? {\n      entropy: true\n    } : options || {}; // Flatten the seed string or build one from local entropy if needed.\n\n    var shortseed = mixkey(flatten(options.entropy ? [seed, tostring(pool)] : seed == null ? autoseed() : seed, 3), key); // Use the seed to initialize an ARC4 generator.\n\n    var arc4 = new ARC4(key); // This function returns a random double in [0, 1) that contains\n    // randomness in every bit of the mantissa of the IEEE 754 value.\n\n    var prng = function prng() {\n      var n = arc4.g(chunks),\n          // Start with a numerator n < 2 ^ 48\n      d = startdenom,\n          //   and denominator d = 2 ^ 48.\n      x = 0; //   and no 'extra last byte'.\n\n      while (n < significance) {\n        // Fill up all significant digits by\n        n = (n + x) * width; //   shifting numerator and\n\n        d *= width; //   denominator and generating a\n\n        x = arc4.g(1); //   new least-significant-byte.\n      }\n\n      while (n >= overflow) {\n        // To avoid rounding up, before adding\n        n /= 2; //   last byte, shift everything\n\n        d /= 2; //   right using integer math until\n\n        x >>>= 1; //   we have exactly the desired bits.\n      }\n\n      return (n + x) / d; // Form the number within [0, 1).\n    };\n\n    prng.int32 = function () {\n      return arc4.g(4) | 0;\n    };\n\n    prng.quick = function () {\n      return arc4.g(4) / 0x100000000;\n    };\n\n    prng.double = prng; // Mix the randomness into accumulated entropy.\n\n    mixkey(tostring(arc4.S), pool); // Calling convention: what to return as a function of prng, seed, is_math.\n\n    return (options.pass || callback || function (prng, seed, is_math_call, state) {\n      if (state) {\n        // Load the arc4 state from the given state if it has an S array.\n        if (state.S) {\n          copy(state, arc4);\n        } // Only provide the .state method if requested via options.state.\n\n\n        prng.state = function () {\n          return copy(arc4, {});\n        };\n      } // If called as a method of Math (Math.seedrandom()), mutate\n      // Math.random because that is how seedrandom.js has worked since v1.0.\n\n\n      if (is_math_call) {\n        math[rngname] = prng;\n        return seed;\n      } // Otherwise, it is a newer calling convention, so return the\n      // prng directly.\n      else return prng;\n    })(prng, shortseed, 'global' in options ? options.global : this == math, options.state);\n  } //\n  // ARC4\n  //\n  // An ARC4 implementation.  The constructor takes a key in the form of\n  // an array of at most (width) integers that should be 0 <= x < (width).\n  //\n  // The g(count) method returns a pseudorandom integer that concatenates\n  // the next (count) outputs from ARC4.  Its return value is a number x\n  // that is in the range 0 <= x < (width ^ count).\n  //\n\n\n  function ARC4(key) {\n    var t,\n        keylen = key.length,\n        me = this,\n        i = 0,\n        j = me.i = me.j = 0,\n        s = me.S = []; // The empty key [] is treated as [0].\n\n    if (!keylen) {\n      key = [keylen++];\n    } // Set up S using the standard key scheduling algorithm.\n\n\n    while (i < width) {\n      s[i] = i++;\n    }\n\n    for (i = 0; i < width; i++) {\n      s[i] = s[j = mask & j + key[i % keylen] + (t = s[i])];\n      s[j] = t;\n    } // The \"g\" method returns the next (count) outputs as one number.\n\n\n    (me.g = function (count) {\n      // Using instance members instead of closure state nearly doubles speed.\n      var t,\n          r = 0,\n          i = me.i,\n          j = me.j,\n          s = me.S;\n\n      while (count--) {\n        t = s[i = mask & i + 1];\n        r = r * width + s[mask & (s[i] = s[j = mask & j + t]) + (s[j] = t)];\n      }\n\n      me.i = i;\n      me.j = j;\n      return r; // For robust unpredictability, the function call below automatically\n      // discards an initial batch of values.  This is called RC4-drop[256].\n      // See http://google.com/search?q=rsa+fluhrer+response&btnI\n    })(width);\n  } //\n  // copy()\n  // Copies internal state of ARC4 to or from a plain object.\n  //\n\n\n  function copy(f, t) {\n    t.i = f.i;\n    t.j = f.j;\n    t.S = f.S.slice();\n    return t;\n  } //\n  // flatten()\n  // Converts an object tree to nested arrays of strings.\n  //\n\n\n  function flatten(obj, depth) {\n    var result = [],\n        typ = typeof obj,\n        prop;\n\n    if (depth && typ == 'object') {\n      for (prop in obj) {\n        try {\n          result.push(flatten(obj[prop], depth - 1));\n        } catch (e) {}\n      }\n    }\n\n    return result.length ? result : typ == 'string' ? obj : obj + '\\0';\n  } //\n  // mixkey()\n  // Mixes a string seed into a key that is an array of integers, and\n  // returns a shortened string seed that is equivalent to the result key.\n  //\n\n\n  function mixkey(seed, key) {\n    var stringseed = seed + '',\n        smear,\n        j = 0;\n\n    while (j < stringseed.length) {\n      key[mask & j] = mask & (smear ^= key[mask & j] * 19) + stringseed.charCodeAt(j++);\n    }\n\n    return tostring(key);\n  } //\n  // autoseed()\n  // Returns an object for autoseeding, using window.crypto and Node crypto\n  // module if available.\n  //\n\n\n  function autoseed() {\n    try {\n      var out;\n      if (nodecrypto && (out = nodecrypto.randomBytes)) ;else {\n        out = new Uint8Array(width);\n        (global.crypto || global.msCrypto).getRandomValues(out);\n      }\n      return tostring(out);\n    } catch (e) {\n      var browser = global.navigator,\n          plugins = browser && browser.plugins;\n      return [+new Date(), global, plugins, global.screen, tostring(pool)];\n    }\n  } //\n  // tostring()\n  // Converts an array of charcodes to a string\n  //\n\n\n  function tostring(a) {\n    return String.fromCharCode.apply(0, a);\n  } //\n  // When seedrandom.js is loaded, we immediately mix a few bits\n  // from the built-in RNG into the entropy pool.  Because we do\n  // not want to interfere with deterministic PRNG state later,\n  // seedrandom will not call math.random on its own again after\n  // initialization.\n  //\n\n\n  mixkey(math.random(), pool);\n\n  function get_all_variables(element) {\n    if (typeof getComputedStyle === 'undefined') {\n      return '';\n    }\n\n    var ret = {};\n\n    if (element.computedStyleMap) {\n      var _iterator5 = _createForOfIteratorHelper(element.computedStyleMap()),\n          _step5;\n\n      try {\n        for (_iterator5.s(); !(_step5 = _iterator5.n()).done;) {\n          var _step5$value = _slicedToArray(_step5.value, 2),\n              prop = _step5$value[0],\n              value = _step5$value[1];\n\n          if (prop.startsWith('--')) {\n            ret[prop] = value[0][0];\n          }\n        }\n      } catch (err) {\n        _iterator5.e(err);\n      } finally {\n        _iterator5.f();\n      }\n    } else {\n      var styles = getComputedStyle(element);\n\n      var _iterator6 = _createForOfIteratorHelper(styles),\n          _step6;\n\n      try {\n        for (_iterator6.s(); !(_step6 = _iterator6.n()).done;) {\n          var _prop = _step6.value;\n\n          if (_prop.startsWith('--')) {\n            ret[_prop] = styles.getPropertyValue(_prop);\n          }\n        }\n      } catch (err) {\n        _iterator6.e(err);\n      } finally {\n        _iterator6.f();\n      }\n    }\n\n    return inline(ret);\n  }\n\n  function _get_variable(element, name) {\n    if (typeof getComputedStyle === 'undefined') {\n      return '';\n    }\n\n    return getComputedStyle(element).getPropertyValue(name).trim().replace(/^\\(|\\)$/g, '');\n  }\n\n  function inline(map) {\n    var result = [];\n\n    for (var _i8 = 0, _Object$entries6 = Object.entries(map); _i8 < _Object$entries6.length; _i8++) {\n      var _Object$entries6$_i = _slicedToArray(_Object$entries6[_i8], 2),\n          prop = _Object$entries6$_i[0],\n          value = _Object$entries6$_i[1];\n\n      result.push(prop + ':' + value);\n    }\n\n    return result.join(';');\n  }\n\n  function transform(color) {\n    var _color$replace$split = color.replace(/rgba?\\((.+)\\)/, function (_, v) {\n      return v;\n    }).split(/,\\s*/),\n        _color$replace$split2 = _slicedToArray(_color$replace$split, 4),\n        r = _color$replace$split2[0],\n        g = _color$replace$split2[1],\n        b = _color$replace$split2[2],\n        _color$replace$split3 = _color$replace$split2[3],\n        a = _color$replace$split3 === void 0 ? 1 : _color$replace$split3;\n\n    return {\n      r: r,\n      g: g,\n      b: b,\n      a: a\n    };\n  }\n\n  function _get_rgba_color(root, value) {\n    var element = root.querySelector('#defs');\n\n    if (!element) {\n      return {\n        r: 0,\n        g: 0,\n        b: 0,\n        a: 1\n      };\n    }\n\n    element.style.color = value;\n    return transform(getComputedStyle(element).color);\n  }\n\n  if (typeof customElements !== 'undefined') {\n    var Doodle = /*#__PURE__*/function (_HTMLElement) {\n      _inherits(Doodle, _HTMLElement);\n\n      var _super = _createSuper(Doodle);\n\n      function Doodle() {\n        var _this9;\n\n        _classCallCheck(this, Doodle);\n\n        _this9 = _super.call(this);\n        _this9.doodle = _this9.attachShadow({\n          mode: 'open'\n        });\n        _this9.extra = {\n          get_variable: function get_variable(name) {\n            return _get_variable(_assertThisInitialized(_this9), name);\n          },\n          get_rgba_color: function get_rgba_color(value) {\n            return _get_rgba_color(_this9.shadowRoot, value);\n          }\n        };\n        return _this9;\n      }\n\n      _createClass(Doodle, [{\n        key: \"connectedCallback\",\n        value: function connectedCallback(again) {\n          var _this10 = this;\n\n          if (this.innerHTML) {\n            this.load(again);\n          } else {\n            setTimeout(function () {\n              return _this10.load(again);\n            });\n          }\n        }\n      }, {\n        key: \"update\",\n        value: function update(styles) {\n          var _this11 = this;\n\n          Cache.clear();\n          var use = this.get_use();\n          if (!styles) styles = un_entity(this.innerHTML);\n          this.innerHTML = styles;\n\n          if (!this.grid_size) {\n            this.grid_size = this.get_grid();\n          }\n\n          var _this$grid_size = this.grid_size,\n              gx = _this$grid_size.x,\n              gy = _this$grid_size.y,\n              gz = _this$grid_size.z;\n          var compiled = this.generate(parse$8(use + styles, this.extra));\n\n          if (!this.shadowRoot.innerHTML) {\n            Object.assign(this.grid_size, compiled.grid);\n            return this.build_grid(compiled, compiled.grid);\n          }\n\n          if (compiled.grid) {\n            var _compiled$grid = compiled.grid,\n                x = _compiled$grid.x,\n                y = _compiled$grid.y,\n                z = _compiled$grid.z;\n\n            if (gx !== x || gy !== y || gz !== z) {\n              Object.assign(this.grid_size, compiled.grid);\n              return this.build_grid(compiled, compiled.grid);\n            }\n\n            Object.assign(this.grid_size, compiled.grid);\n          } else {\n            var grid = this.get_grid();\n            var _x = grid.x,\n                _y = grid.y,\n                _z = grid.z;\n\n            if (gx !== _x || gy !== _y || gz !== _z) {\n              Object.assign(this.grid_size, grid);\n              return this.build_grid(this.generate(parse$8(use + styles, this.extra)), grid);\n            }\n          }\n\n          var replace = this.replace(compiled);\n          this.set_content('.style-keyframes', replace(compiled.styles.keyframes));\n\n          if (compiled.props.has_animation) {\n            this.set_content('.style-cells', '');\n            this.set_content('.style-container', '');\n          }\n\n          setTimeout(function () {\n            _this11.set_content('.style-container', replace(get_grid_styles(_this11.grid_size) + compiled.styles.host + compiled.styles.container));\n\n            _this11.set_content('.style-cells', replace(compiled.styles.cells));\n          });\n        }\n      }, {\n        key: \"grid\",\n        get: function get() {\n          return Object.assign({}, this.grid_size);\n        },\n        set: function set(grid) {\n          this.attr('grid', grid);\n          this.connectedCallback(true);\n        }\n      }, {\n        key: \"seed\",\n        get: function get() {\n          return this._seed_value;\n        },\n        set: function set(seed) {\n          this.attr('seed', seed);\n          this.connectedCallback(true);\n        }\n      }, {\n        key: \"use\",\n        get: function get() {\n          return this.attr('use');\n        },\n        set: function set(use) {\n          this.attr('use', use);\n          this.connectedCallback(true);\n        }\n      }, {\n        key: \"attributeChangedCallback\",\n        value: function attributeChangedCallback(name, old_val, new_val) {\n          if (old_val == new_val) {\n            return false;\n          }\n\n          var observed = ['grid', 'use', 'seed'].includes(name);\n\n          if (observed && !is_nil(old_val)) {\n            this[name] = new_val;\n          }\n        }\n      }, {\n        key: \"get_grid\",\n        value: function get_grid() {\n          return parse_grid(this.attr('grid'));\n        }\n      }, {\n        key: \"get_use\",\n        value: function get_use() {\n          var use = this.attr('use') || '';\n          if (use) use = \"@use:\".concat(use, \";\");\n          return use;\n        }\n      }, {\n        key: \"attr\",\n        value: function attr(name, value) {\n          if (arguments.length === 1) {\n            return this.getAttribute(name);\n          }\n\n          if (arguments.length === 2) {\n            this.setAttribute(name, value);\n            return value;\n          }\n        }\n      }, {\n        key: \"generate\",\n        value: function generate(parsed) {\n          var grid = this.get_grid();\n          var seed = this.attr('seed') || this.attr('data-seed');\n\n          if (is_nil(seed)) {\n            seed = Date.now();\n          }\n\n          seed = String(seed);\n          this._seed_value = seed;\n          var random = this.random = seedrandom(seed);\n          var compiled = this.compiled = generate_css(parsed, grid, random);\n          return compiled;\n        }\n      }, {\n        key: \"doodle_to_image\",\n        value: function doodle_to_image(code, options, fn) {\n          if (typeof options === 'function') {\n            fn = options;\n            options = null;\n          }\n\n          code = ':doodle { width:100%;height:100% }' + code;\n          var parsed = parse$8(code, this.extra);\n\n          var _grid = parse_grid({});\n\n          var compiled = generate_css(parsed, _grid, this.random);\n          var grid = compiled.grid ? compiled.grid : _grid;\n          var _compiled$styles = compiled.styles,\n              keyframes = _compiled$styles.keyframes,\n              host = _compiled$styles.host,\n              container = _compiled$styles.container,\n              cells = _compiled$styles.cells;\n          var replace = this.replace(compiled);\n          var grid_container = create_grid(grid);\n          var size = options && options.width && options.height ? \"width=\\\"\".concat(options.width, \"\\\" height=\\\"\").concat(options.height, \"\\\"\") : '';\n          replace(\"\\n        <svg \".concat(size, \" xmlns=\\\"http://www.w3.org/2000/svg\\\" preserveAspectRatio=\\\"none\\\">\\n          <foreignObject width=\\\"100%\\\" height=\\\"100%\\\">\\n            <div class=\\\"host\\\" xmlns=\\\"http://www.w3.org/1999/xhtml\\\">\\n              <style>\\n                \").concat(get_basic_styles(), \"\\n                \").concat(get_grid_styles(grid), \"\\n                \").concat(host, \"\\n                \").concat(container, \"\\n                \").concat(cells, \"\\n                \").concat(keyframes, \"\\n              </style>\\n              <svg id=\\\"defs\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" style=\\\"width:0; height:0\\\"></svg>\\n              \").concat(grid_container, \"\\n            </div>\\n          </foreignObject>\\n        </svg>\\n      \")).then(function (result) {\n            var source = \"data:image/svg+xml;base64,\".concat(window.btoa(unescape(encodeURIComponent(result))));\n\n            if (is_safari()) {\n              cache_image(source);\n            }\n\n            fn(source);\n          });\n        }\n      }, {\n        key: \"pattern_to_image\",\n        value: function pattern_to_image(_ref68, fn) {\n          var code = _ref68.code,\n              cell = _ref68.cell;\n          var shader = draw_pattern(code, this.extra);\n          this.shader_to_image({\n            shader: shader,\n            cell: cell\n          }, fn);\n        }\n      }, {\n        key: \"canvas_to_image\",\n        value: function canvas_to_image(_ref69, fn) {\n          var code = _ref69.code;\n          draw_canvas(code).then(fn);\n        }\n      }, {\n        key: \"shader_to_image\",\n        value: function shader_to_image(_ref70, fn) {\n          var _this12 = this;\n\n          var shader = _ref70.shader,\n              cell = _ref70.cell;\n          var parsed = parse$7(shader);\n          var element = this.doodle.getElementById(cell);\n\n          var _ref71 = element && element.getBoundingClientRect() || {\n            width: 0,\n            height: 0\n          },\n              width = _ref71.width,\n              height = _ref71.height;\n\n          var ratio = window.devicePixelRatio || 1;\n\n          if (!parsed.textures.length) {\n            draw_shader(parsed, width, height).then(fn);\n          } // Need to bind textures first\n          else {\n              var transforms = parsed.textures.map(function (texture) {\n                return new Promise(function (resolve) {\n                  _this12.doodle_to_image(texture.value, {\n                    width: width,\n                    height: height\n                  }, function (src) {\n                    var img = new Image();\n                    img.width = width * ratio;\n                    img.height = height * ratio;\n\n                    img.onload = function () {\n                      return resolve({\n                        name: texture.name,\n                        value: img\n                      });\n                    };\n\n                    img.src = src;\n                  });\n                });\n              });\n              Promise.all(transforms).then(function (textures) {\n                parsed.textures = textures;\n                draw_shader(parsed, width, height).then(fn);\n              });\n            }\n        }\n      }, {\n        key: \"load\",\n        value: function load(again) {\n          var _this13 = this;\n\n          var use = this.get_use();\n          var parsed = parse$8(use + un_entity(this.innerHTML), this.extra);\n          var compiled = this.generate(parsed);\n\n          if (!again) {\n            if (this.hasAttribute('click-to-update')) {\n              this.addEventListener('click', function (e) {\n                return _this13.update();\n              });\n            }\n          }\n\n          this.grid_size = compiled.grid ? compiled.grid : this.get_grid();\n          this.build_grid(compiled, this.grid_size);\n        }\n      }, {\n        key: \"replace\",\n        value: function replace(_ref72) {\n          var _this14 = this;\n\n          var doodles = _ref72.doodles,\n              shaders = _ref72.shaders,\n              canvas = _ref72.canvas,\n              pattern = _ref72.pattern;\n          var doodle_ids = Object.keys(doodles);\n          var shader_ids = Object.keys(shaders);\n          var canvas_ids = Object.keys(canvas);\n          var pattern_ids = Object.keys(pattern);\n          var length = doodle_ids.length + canvas_ids.length + shader_ids.length + pattern_ids.length;\n          return function (input) {\n            if (!length) {\n              return Promise.resolve(input);\n            }\n\n            var mappings = [].concat(doodle_ids.map(function (id) {\n              if (input.includes(id)) {\n                return new Promise(function (resolve) {\n                  _this14.doodle_to_image(doodles[id], function (value) {\n                    return resolve({\n                      id: id,\n                      value: value\n                    });\n                  });\n                });\n              } else {\n                return Promise.resolve('');\n              }\n            }), shader_ids.map(function (id) {\n              if (input.includes(id)) {\n                return new Promise(function (resolve) {\n                  _this14.shader_to_image(shaders[id], function (value) {\n                    return resolve({\n                      id: id,\n                      value: value\n                    });\n                  });\n                });\n              } else {\n                return Promise.resolve('');\n              }\n            }), canvas_ids.map(function (id) {\n              if (input.includes(id)) {\n                return new Promise(function (resolve) {\n                  _this14.canvas_to_image(canvas[id], function (value) {\n                    return resolve({\n                      id: id,\n                      value: value\n                    });\n                  });\n                });\n              } else {\n                return Promise.resolve('');\n              }\n            }), pattern_ids.map(function (id) {\n              if (input.includes(id)) {\n                return new Promise(function (resolve) {\n                  _this14.pattern_to_image(pattern[id], function (value) {\n                    return resolve({\n                      id: id,\n                      value: value\n                    });\n                  });\n                });\n              } else {\n                return Promise.resolve('');\n              }\n            }));\n            return Promise.all(mappings).then(function (mapping) {\n              if (input.replaceAll) {\n                mapping.forEach(function (_ref73) {\n                  var id = _ref73.id,\n                      value = _ref73.value;\n                  input = input.replaceAll('${' + id + '}', /^canvas/.test(id) ? value : \"url(\".concat(value, \")\"));\n                });\n              } else {\n                mapping.forEach(function (_ref74) {\n                  var id = _ref74.id,\n                      value = _ref74.value;\n                  input = input.replace('${' + id + '}', /^canvas/.test(id) ? value : \"url(\".concat(value, \")\"));\n                });\n              }\n\n              return input;\n            });\n          };\n        }\n      }, {\n        key: \"build_grid\",\n        value: function build_grid(compiled, grid) {\n          var _this15 = this;\n\n          var _compiled$props = compiled.props,\n              has_transition = _compiled$props.has_transition,\n              has_animation = _compiled$props.has_animation;\n          var has_delay = has_transition || has_animation;\n          var _compiled$styles2 = compiled.styles,\n              keyframes = _compiled$styles2.keyframes,\n              host = _compiled$styles2.host,\n              container = _compiled$styles2.container,\n              cells = _compiled$styles2.cells;\n          var style_container = get_grid_styles(grid) + host + container;\n          var style_cells = has_delay ? '' : cells;\n          var uniforms = compiled.uniforms;\n          var replace = this.replace(compiled);\n          this.doodle.innerHTML = \"\\n        <style>\".concat(get_basic_styles(), \"</style>\\n        <style class=\\\"style-keyframes\\\">\").concat(keyframes, \"</style>\\n        <style class=\\\"style-container\\\">\").concat(style_container, \"</style>\\n        <style class=\\\"style-cells\\\">\").concat(style_cells, \"</style>\\n        <svg id=\\\"defs\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" style=\\\"width:0;height:0\\\"></svg>\\n        \").concat(create_grid(grid), \"\\n      \");\n          this.set_content('.style-container', replace(style_container));\n\n          if (has_delay) {\n            setTimeout(function () {\n              _this15.set_content('.style-cells', replace(cells));\n            }, 50);\n          } else {\n            this.set_content('.style-cells', replace(cells));\n          }\n\n          if (uniforms.time) {\n            this.register_uniform_time();\n          }\n\n          if (uniforms.mousex || uniforms.mousey) {\n            this.register_uniform_mouse(uniforms);\n          } else {\n            this.remove_uniform_mouse();\n          }\n\n          if (uniforms.width || uniforms.height) {\n            this.register_uniform_resolution(uniforms);\n          } else {\n            this.remove_uniform_resolution();\n          }\n        }\n      }, {\n        key: \"register_uniform_mouse\",\n        value: function register_uniform_mouse(uniforms) {\n          var _this16 = this;\n\n          if (!this.uniform_mouse_callback) {\n            var _uniform_mousex = Uniforms.uniform_mousex,\n                _uniform_mousey = Uniforms.uniform_mousey;\n\n            this.uniform_mouse_callback = function (e) {\n              var data = e.detail || e;\n\n              if (uniforms.mousex) {\n                _this16.style.setProperty('--' + _uniform_mousex.name, data.offsetX);\n              }\n\n              if (uniforms.mousey) {\n                _this16.style.setProperty('--' + _uniform_mousey.name, data.offsetY);\n              }\n            };\n\n            this.addEventListener('pointermove', this.uniform_mouse_callback);\n            var event = new CustomEvent('pointermove', {\n              detail: {\n                offsetX: 0,\n                offsetY: 0\n              }\n            });\n            this.dispatchEvent(event);\n          }\n        }\n      }, {\n        key: \"remove_uniform_mouse\",\n        value: function remove_uniform_mouse() {\n          if (this.uniform_mouse_callback) {\n            var _uniform_mousex2 = Uniforms.uniform_mousex,\n                _uniform_mousey2 = Uniforms.uniform_mousey;\n            this.style.removeProperty('--' + _uniform_mousex2.name);\n            this.style.removeProperty('--' + _uniform_mousey2.name);\n            this.removeEventListener('pointermove', this.uniform_mouse_callback);\n            this.uniform_mouse_callback = null;\n          }\n        }\n      }, {\n        key: \"register_uniform_resolution\",\n        value: function register_uniform_resolution(uniforms) {\n          var _this17 = this;\n\n          if (!this.uniform_resolution_observer) {\n            var _uniform_width = Uniforms.uniform_width,\n                _uniform_height = Uniforms.uniform_height;\n\n            var setProperty = function setProperty() {\n              var box = _this17.getBoundingClientRect();\n\n              if (uniforms.width) {\n                _this17.style.setProperty('--' + _uniform_width.name, box.width);\n              }\n\n              if (uniforms.height) {\n                _this17.style.setProperty('--' + _uniform_height.name, box.height);\n              }\n            };\n\n            setProperty();\n            this.uniform_resolution_observer = new ResizeObserver(function (entries) {\n              var _iterator7 = _createForOfIteratorHelper(entries),\n                  _step7;\n\n              try {\n                for (_iterator7.s(); !(_step7 = _iterator7.n()).done;) {\n                  var entry = _step7.value;\n                  var data = entry.contentBoxSize || entry.contentRect;\n                  if (data) setProperty();\n                }\n              } catch (err) {\n                _iterator7.e(err);\n              } finally {\n                _iterator7.f();\n              }\n            });\n            this.uniform_resolution_observer.observe(this);\n          }\n        }\n      }, {\n        key: \"remove_uniform_resolution\",\n        value: function remove_uniform_resolution() {\n          if (this.uniform_resolution_observer) {\n            var _uniform_width2 = Uniforms.uniform_width,\n                _uniform_height2 = Uniforms.uniform_height;\n            this.style.removeProperty('--' + _uniform_width2.name);\n            this.style.removeProperty('--' + _uniform_height2.name);\n            this.uniform_resolution_observer.unobserve(this);\n            this.uniform_resolution_observer = null;\n          }\n        }\n      }, {\n        key: \"register_uniform_time\",\n        value: function register_uniform_time() {\n          if (!window.CSS || !window.CSS.registerProperty) {\n            return false;\n          }\n\n          if (!this.is_uniform_time_registered) {\n            var _uniform_time = Uniforms.uniform_time;\n\n            try {\n              CSS.registerProperty({\n                name: '--' + _uniform_time.name,\n                syntax: '<number>',\n                initialValue: 0,\n                inherits: true\n              });\n            } catch (e) {}\n\n            this.is_uniform_time_registered = true;\n          }\n        }\n      }, {\n        key: \"export\",\n        value: function _export() {\n          var _this18 = this;\n\n          var _ref75 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n              scale = _ref75.scale,\n              name = _ref75.name,\n              download = _ref75.download,\n              detail = _ref75.detail;\n\n          return new Promise(function (resolve, reject) {\n            var variables = get_all_variables(_this18);\n            var html = _this18.doodle.innerHTML;\n\n            var _this18$getBoundingCl = _this18.getBoundingClientRect(),\n                width = _this18$getBoundingCl.width,\n                height = _this18$getBoundingCl.height;\n\n            scale = parseInt(scale) || 1;\n            var w = width * scale;\n            var h = height * scale;\n            var svg = \"\\n          <svg xmlns=\\\"http://www.w3.org/2000/svg\\\"\\n            preserveAspectRatio=\\\"none\\\"\\n            viewBox=\\\"0 0 \".concat(width, \" \").concat(height, \"\\\"\\n            \").concat(is_safari() ? '' : \"width=\\\"\".concat(w, \"px\\\" height=\\\"\").concat(h, \"px\\\"\"), \"\\n          >\\n            <foreignObject width=\\\"100%\\\" height=\\\"100%\\\">\\n              <div\\n                class=\\\"host\\\"\\n                xmlns=\\\"http://www.w3.org/1999/xhtml\\\"\\n                style=\\\"width: \").concat(width, \"px; height: \").concat(height, \"px; \\\"\\n              >\\n                <style>.host { \").concat(entity(variables), \" }</style>\\n                \").concat(html, \"\\n              </div>\\n            </foreignObject>\\n          </svg>\\n        \");\n\n            if (download || detail) {\n              svg_to_png(svg, w, h, scale).then(function (_ref76) {\n                var source = _ref76.source,\n                    url = _ref76.url,\n                    blob = _ref76.blob;\n                resolve({\n                  width: w,\n                  height: h,\n                  svg: svg,\n                  blob: blob,\n                  source: source\n                });\n\n                if (download) {\n                  var a = document.createElement('a');\n                  a.download = normalize_png_name(name);\n                  a.href = url;\n                  a.click();\n                }\n              }).catch(function (error) {\n                reject(error);\n              });\n            } else {\n              resolve({\n                width: w,\n                height: h,\n                svg: svg\n              });\n            }\n          });\n        }\n      }, {\n        key: \"set_content\",\n        value: function set_content(selector, styles) {\n          var _this19 = this;\n\n          if (styles instanceof Promise) {\n            styles.then(function (value) {\n              _this19.set_content(selector, value);\n            });\n          } else {\n            var el = this.shadowRoot.querySelector(selector);\n            el && (el.styleSheet ? el.styleSheet.cssText = styles : el.innerHTML = styles);\n          }\n        }\n      }], [{\n        key: \"observedAttributes\",\n        get: function get() {\n          return ['grid', 'use', 'seed'];\n        }\n      }]);\n\n      return Doodle;\n    }( /*#__PURE__*/_wrapNativeSuper(HTMLElement));\n\n    if (!customElements.get('css-doodle')) {\n      customElements.define('css-doodle', Doodle);\n    }\n  }\n\n  function get_basic_styles() {\n    var uniform_time = Uniforms.uniform_time;\n    var inherited_grid_props = get_props(/grid/).map(function (n) {\n      return \"\".concat(n, \": inherit;\");\n    }).join('');\n    return \"\\n    * {\\n      box-sizing: border-box\\n    }\\n    *::after, *::before {\\n      box-sizing: inherit\\n    }\\n    :host, .host {\\n      display: block;\\n      visibility: visible;\\n      width: auto;\\n      height: auto;\\n      --\".concat(uniform_time.name, \": 0\\n    }\\n    :host([hidden]), .host[hidden] {\\n      display: none\\n    }\\n    .container {\\n      position: relative;\\n      width: 100%;\\n      height: 100%;\\n      display: grid;\\n      \").concat(inherited_grid_props, \"\\n    }\\n    cell:empty {\\n      position: relative;\\n      line-height: 1;\\n      display: grid;\\n      place-items: center\\n    }\\n    svg {\\n      position: absolute;\\n      width: 100%;\\n      height: 100%;\\n    }\\n  \");\n  }\n\n  function get_grid_styles(grid_obj) {\n    var _ref77 = grid_obj || {},\n        x = _ref77.x,\n        y = _ref77.y;\n\n    return \"\\n    :host, .host {\\n      grid-template-rows: repeat(\".concat(y, \", 1fr);\\n      grid-template-columns: repeat(\").concat(x, \", 1fr);\\n    }\\n  \");\n  }\n\n  function create_cell(x, y, z) {\n    var cell = document.createElement('cell');\n    cell.id = cell_id(x, y, z);\n    return cell;\n  }\n\n  function create_grid(grid_obj) {\n    var _ref78 = grid_obj || {},\n        x = _ref78.x,\n        y = _ref78.y,\n        z = _ref78.z;\n\n    var grid = document.createElement('grid');\n    var root = document.createDocumentFragment();\n\n    if (z == 1) {\n      for (var j = 1; j <= y; ++j) {\n        for (var i = 1; i <= x; ++i) {\n          root.appendChild(create_cell(i, j, 1));\n        }\n      }\n    } else {\n      var temp = null;\n\n      for (var _i9 = 1; _i9 <= z; ++_i9) {\n        var cell = create_cell(1, 1, _i9);\n        (temp || root).appendChild(cell);\n        temp = cell;\n      }\n\n      temp = null;\n    }\n\n    grid.className = 'container';\n    grid.appendChild(root);\n    return grid.outerHTML;\n  }\n\n  var CSSDoodle = make_tag_function(function (rules) {\n    var doodle = document.createElement('css-doodle');\n\n    if (doodle.update) {\n      doodle.update(rules);\n    }\n\n    return doodle;\n  });\n  exports.CSSDoodle = CSSDoodle;\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n});"],"sourceRoot":""}